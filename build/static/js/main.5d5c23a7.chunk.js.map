{"version":3,"sources":["compnents/Header/Header.js","compnents/LeftSider/LeftSider.js","compnents/MainBox/MainBox.js","compnents/Drawer/EventDrawer.js","compnents/Timelist/ExpTimeline.js","compnents/Drawer/CharDrawer.js","App.js","serviceWorker.js","index.js"],"names":["Header","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","visible","setState","react_default","a","createElement","className","props","title","onClick","handleClickbout","bind","about","modal","aboutTitle","okText","footer","onCancel","handleCancel","Component","defaultProps","Sider","Layout","SubMenu","Menu","LeftSider","onCollapse","collapsed","console","log","yearSelectedKeys","eventSelectedKeys","charSelectedKeys","e","keyPath","key","onSelect","onEventOpen","onCharOpen","onYearOpen","width","style","padding","collapsible","menu","mode","defaultOpenKeys","selectedKeys","onOpenChange","handleYearOpen","handleSelectChange","icon","type","years","map","year","idx","Item","Year","multiple","handleCharOpen","charProfiles","profile","Name","handleEventOpen","events","event","HName","MainBox","tangFeatureLayers","dojoUrl","tileMapUrl","baseFeatureUrl","highlightSelectChar","isPlay","stopUpdate","initMap","layers","length","items","layer","search","sources","isShowYear","yearSelected","push","searchSource","isShowEvent","isShowChar","t","clearTimeout","graphic","geometry","undefined","isCharSelectChangeToAnother","isEventSelectChangeToAnother","isYearSelectChangeToAnother","charSelected","definitionExpression","labelsVisible","queryForChar","highlight","remove","eventSelected","queryForEvent","highlightSelectEvent","pointA","pointB","speed","tmp","count","Math","abs","disX","x","disY","y","i","p","clone","feature","layerView","_this2","traj","interpolation","polyline","paths","symbol","color","j","nPolyline","cnt","draw","setTimeout","shift","curDrawingPoint","attributes","view","goTo","center","zoom","duration","easing","_this3","charLayer","whenLayerView","then","queryChar","createQuery","where","queryFeatures","result","features","drawLine","_this4","eventLayer","queryEvents","_this5","EsriLoader","loadModules","_ref","_ref2","slicedToArray","Map","Basemap","TileLayer","MapView","FeatureLayer","Graphic","Zoom","Compass","ScaleBar","Search","popupTemplateForCountry","content","fieldInfos","fieldName","label","format","places","digitSeparator","popupTemplateForEvent","popupTemplateForChar","popupTemplateForCity","tangLayerUrl","url","id","popupTemplate","baseMap","baseLayers","basemap","container","layout","compass","scaleBar","unit","allPlaceholder","includeDefaultSources","searchFields","suggestionTemplate","displayField","exactMatch","name","placeholder","graphics","add","ui","len","queryLayer","when","query","_this6","setInterval","f","clearInterval","play","height","es_button","loading","handleLayerPlay","ghost","position","left","bottom","EventDrawer","isOpen","drawer","placement","closable","isShow","mask","marginTop","HCityName","STime","ETime","textIndent","Intro","ExpTimeline","timeline","exp","place","intro","CharDrawer","iconURL","align","textAlign","alt","src","chars","zi","hao","Home","Content","App","isYearOpen","isEventOpen","isCharOpen","experience","curDrawing","isCharDrawerOpen","isEventDrawerOpen","fetch","res","json","data","Tang","ID","compnents_Header_Header","compnents_LeftSider_LeftSider","compnents_MainBox_MainBox","handleCurDrawing","Timelist_ExpTimeline","Drawer_EventDrawer","Drawer_CharDrawer","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","src_App_0","document","getElementById","URL","process","href","origin","addEventListener","concat","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.5d5c23a7.chunk.js","sourcesContent":["import React,{Component} from 'react'\r\nimport { Modal } from 'antd'\r\nimport './Header.css'\r\nclass Header extends Component{\r\n    static defaultProps = {\r\n        title:'唐代历史地理数据展示平台',\r\n        about:'关于我们',\r\n        aboutTitle:'ESRI DEMO-唐朝历史地理信息展示平台',\r\n\r\n    }\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            visible:false\r\n        }\r\n    }\r\n\r\n    handleClickbout(){\r\n        this.setState({\r\n            visible: true,\r\n      });\r\n    }\r\n    handleCancel(){\r\n        this.setState({\r\n            visible: false,\r\n      });\r\n    }\r\n    render(){\r\n        return(\r\n            <div className='header'>\r\n                <span className={'title'}>{this.props.title}</span>\r\n                <button className={'about'} onClick={this.handleClickbout.bind(this)}>{this.props.about}</button>\r\n                <Modal\r\n                    title={this.props.aboutTitle}\r\n                    visible={this.state.visible}\r\n                    okText={'确认'}\r\n                    footer={null}\r\n                    onCancel={this.handleCancel.bind(this)}\r\n              >\r\n                    <p>{'简介：该平台展示了唐朝不同年代的疆界范围、人物轨迹及历史事件，并支持查询搜索等功能。'}</p>\r\n                    <p>{'制作成员：侯骁谋 劳大钊 吴宇东 詹文'}</p>\r\n              </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Header","import React,{Component} from 'react'\r\nimport { Layout, Menu, Icon} from 'antd';\r\nconst {  Sider } = Layout;\r\nconst { SubMenu } = Menu;\r\n\r\nclass LeftSider extends Component {\r\n  constructor(){\r\n    super()\r\n    this.state = {\r\n      collapsed: false,\r\n      yearSelectedKeys:[],\r\n      eventSelectedKeys:[],\r\n      charSelectedKeys:[]\r\n    };\r\n  }\r\n\r\n  onCollapse = collapsed => {\r\n    console.log(collapsed);\r\n    this.setState({ collapsed });\r\n  };\r\n\r\n  handleSelectChange(e){\r\n    if(e.keyPath[1]==='years'){\r\n      if(!this.state.yearSelectedKeys){\r\n        this.setState({yearSelectedKeys:[e.key]})\r\n      }\r\n      else if(this.state.yearSelectedKeys[0]===e.key){\r\n        this.setState({yearSelectedKeys:[]})\r\n      }\r\n      else{\r\n        this.setState({yearSelectedKeys:[e.key]})\r\n      }\r\n    }\r\n    if(e.keyPath[1]==='characters'){\r\n      if(!this.state.charSelectedKeys){\r\n        this.setState({charSelectedKeys:[e.key]})\r\n      }\r\n      else if(this.state.charSelectedKeys[0]===e.key){\r\n        this.setState({charSelectedKeys:[]})\r\n      }\r\n      else{\r\n        this.setState({charSelectedKeys:[e.key]})\r\n      }\r\n    }\r\n    if(e.keyPath[1]==='events'){\r\n      if(!this.state.eventSelectedKeys){\r\n        this.setState({eventSelectedKeys:[e.key]})\r\n      }\r\n      else if(this.state.eventSelectedKeys[0]===e.key){\r\n        this.setState({eventSelectedKeys:[]})\r\n      }\r\n      else{\r\n        this.setState({eventSelectedKeys:[e.key]})\r\n      }\r\n    }\r\n    if(this.props.onSelect){\r\n      this.props.onSelect(e)\r\n    }\r\n  }\r\n  handleEventOpen(e){\r\n    this.setState({eventSelectedKeys:[]})\r\n    if(this.props.onEventOpen){\r\n      this.props.onEventOpen(e)\r\n    }\r\n  }\r\n  handleCharOpen(e){\r\n    this.setState({charSelectedKeys:[]})\r\n    if(this.props.onCharOpen){\r\n      this.props.onCharOpen(e)\r\n    }\r\n  }\r\n  handleYearOpen(e){\r\n    this.setState({yearSelectedKeys:[]})\r\n    if(this.props.onYearOpen){\r\n      this.props.onYearOpen(e)\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <Sider width={'20vh'} style={{padding:'0'}} collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\r\n        <Menu mode=\"inline\" defaultOpenKeys={['years']} selectedKeys={this.state.yearSelectedKeys}\r\n          onOpenChange={this.handleYearOpen.bind(this)}>\r\n          <SubMenu\r\n            onClick={this.handleSelectChange.bind(this)}\r\n            key='years'\r\n            title={\r\n              <span>\r\n                <Icon type=\"clock-circle\" />\r\n                <span>年代图层</span>\r\n              </span>\r\n            }\r\n          >\r\n            {this.props.years?this.props.years.map((year,idx)=>{\r\n              return <Menu.Item key={idx}>{year.Year}</Menu.Item>\r\n            }):console.log('year failed')}\r\n          </SubMenu>\r\n        </Menu>   \r\n        <Menu mode=\"inline\" multiple={false} selectedKeys={this.state.charSelectedKeys}\r\n          onOpenChange={this.handleCharOpen.bind(this)} >\r\n          <SubMenu\r\n            key='characters'\r\n            onClick={this.handleSelectChange.bind(this)}\r\n            \r\n            title={\r\n              <span>\r\n                <Icon type=\"user\" />\r\n                <span>人物轨迹</span>\r\n              </span>\r\n            }\r\n          >\r\n            {this.props.charProfiles?this.props.charProfiles.map((profile,idx)=>{\r\n              return <Menu.Item key={idx}>{profile.Name}</Menu.Item>\r\n          }):console.log('profile failed')}\r\n          </SubMenu>   \r\n        </Menu>\r\n        <Menu mode=\"inline\" multiple={false} selectedKeys={this.state.eventSelectedKeys}\r\n          onOpenChange={this.handleEventOpen.bind(this)}>\r\n          <SubMenu\r\n            key='events'\r\n            onClick={this.handleSelectChange.bind(this)}\r\n            \r\n            title={\r\n              <span>\r\n                <Icon type=\"read\" />\r\n                <span>历史事件</span>\r\n              </span>\r\n            }\r\n          >\r\n            {this.props.events?this.props.events.map((event,idx)=>{\r\n            return <Menu.Item key={idx}>{event.HName}</Menu.Item>\r\n        }):console.log('events failed')}\r\n          </SubMenu>            \r\n        </Menu>\r\n      </Sider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftSider","import React, { Component } from 'react'\r\nimport { Button} from 'antd';\r\nimport EsriLoader from 'esri-loader'\r\n\r\n\r\nclass MainBox extends Component {\r\n  constructor() {\r\n    super()\r\n    this.tangFeatureLayers = []\r\n    this.dojoUrl = \"http://tony-space.top:8007/arcgis_js_api/library/4.11/dojo/dojo.js\"\r\n    this.tileMapUrl = \"http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer\"\r\n    this.baseFeatureUrl = \"http://172.20.32.70:6080/arcgis/rest/services/TD/MapServer/\"\r\n    this.highlightSelectChar = []\r\n    this.state = {\r\n      isPlay:false,\r\n    }\r\n    this.stopUpdate = true\r\n  }\r\n  componentWillMount() {\r\n    this.initMap()\r\n  }\r\n  componentDidUpdate() {\r\n    if (this.map && this.stopUpdate) {\r\n      if (this.map.layers.length) {\r\n        this.map.layers.items.map((layer) => {\r\n          layer.visible = false;\r\n          return void 0;\r\n        })\r\n        this.search.sources = []\r\n        if (this.props.isShowYear) {\r\n          if (this.props.yearSelected) {\r\n            this.map.layers.items[15].visible = true\r\n            this.map.layers.items[this.props.yearSelected].visible = true\r\n            this.search.sources.push(this.searchSource[this.props.yearSelected])\r\n            this.search.sources.push(this.searchSource[15])\r\n          }\r\n        }\r\n        if (this.props.isShowEvent) {\r\n          this.map.layers.items[13].visible = true\r\n          this.search.sources.push(this.searchSource[13])\r\n        }\r\n        if (this.props.isShowChar) {\r\n          this.map.layers.items[14].visible = true\r\n          this.search.sources.push(this.searchSource[14])\r\n        }\r\n        else {\r\n          if(this.t)clearTimeout(this.t)\r\n          this.graphic.geometry = undefined\r\n        }\r\n        //\r\n        if(this.props.isCharSelectChangeToAnother && !this.props.isEventSelectChangeToAnother && !this.props.isYearSelectChangeToAnother){\r\n          if (this.props.charSelected) {\r\n            this.tangFeatureLayers[14].definitionExpression = 'ID='+this.props.charSelected\r\n            this.tangFeatureLayers[14].labelsVisible = true\r\n            if(this.t) clearTimeout(this.t)\r\n            this.queryForChar()\r\n          }else {\r\n            this.tangFeatureLayers[14].definitionExpression = undefined\r\n            this.tangFeatureLayers[14].labelsVisible = false\r\n            \r\n            if (this.highlightSelectChar.length) {\r\n              this.highlightSelectChar.map((highlight) => {\r\n                highlight.remove();\r\n                return void 0;\r\n              })\r\n            }\r\n            if(this.t) clearTimeout(this.t)\r\n            this.graphic.geometry = undefined\r\n          }\r\n        }\r\n\r\n        //\r\n        if(this.props.isEventSelectChangeToAnother && !this.props.isCharSelectChangeToAnother && !this.props.isYearSelectChangeToAnother){\r\n          if (this.props.eventSelected) {\r\n            this.queryForEvent()\r\n          } \r\n          else {\r\n            if (this.highlightSelectEvent) {\r\n              this.highlightSelectEvent.remove()\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  interpolation(pointA, pointB, speed) {\r\n    var tmp = [];\r\n    if (speed === undefined) {\r\n      speed = 1;\r\n    }\r\n    var count = Math.abs(speed) * 25;\r\n    var disX = (pointB.x - pointA.x) / count;\r\n    var disY = (pointB.y - pointA.y) / count;\r\n    var i = 0;\r\n    while (i <= count) {\r\n      var p = pointA.clone()\r\n      p.x = pointA.x + i * disX;\r\n      p.y = pointA.y + i * disY;\r\n\r\n      tmp.push(p);\r\n      i++;\r\n    }\r\n    tmp.push(pointB);//防止插值出来的最后一个点到不了B点\r\n    return tmp;\r\n  }\r\n  drawLine(feature,layerView) {\r\n    this.traj = []\r\n    for (let i = 0; i < feature.length - 1; i++) {\r\n      this.traj.push(this.interpolation(feature[i].geometry, feature[i + 1].geometry))\r\n    }\r\n    var polyline = {\r\n      type: 'polyline',\r\n      paths: []\r\n    }\r\n    var lineSymbol = {\r\n      type: \"simple-line\", // autocasts as SimpleLineSymbol()\r\n      color: [226, 119, 40],\r\n      width: 1.5\r\n    };\r\n\r\n    this.graphic.symbol = lineSymbol\r\n\r\n    for (let i = 0; i < this.traj.length; i++) {\r\n      for (let j = 0; j < this.traj[i].length - 1; j++) {\r\n        polyline.paths.push([this.traj[i][j].x, this.traj[i][j].y])\r\n      }\r\n    }\r\n    let nPolyline = {\r\n      type: 'polyline',\r\n      paths: []\r\n    };\r\n    let cnt = 0\r\n    let draw = () => {\r\n      if(this.props.isShowChar && this.props.charSelected){\r\n        if (polyline.paths.length > 0) {\r\n          this.t = setTimeout(() => {\r\n            let tmp = polyline.paths.shift()\r\n            nPolyline.paths.push(tmp);\r\n            if(tmp[0]===feature[cnt].geometry.x && tmp[1]===feature[cnt].geometry.y){\r\n              if(this.props.curDrawingPoint) this.props.curDrawingPoint(cnt)\r\n              this.highlightSelectChar.push(layerView.highlight(\r\n                feature[cnt++].attributes['FID']))\r\n            }\r\n            this.graphic.geometry = nPolyline;\r\n\r\n            this.view.goTo({center:[tmp[0]+3,tmp[1]],zoom:6},{duration:500,easing: 'in-out-expo'})\r\n            draw();\r\n          }, 100)\r\n        }else{\r\n          clearTimeout(this.t)\r\n        }\r\n      }else{\r\n        clearTimeout(this.t)\r\n        this.graphic.geometry = undefined\r\n      }\r\n    }\r\n    draw()\r\n  }\r\n  queryForChar() {\r\n    let charLayer = this.map.layers.items[14]\r\n    this.view.whenLayerView(charLayer).then((layerView) => {\r\n      var queryChar = charLayer.createQuery();\r\n      queryChar.where = \"ID=\" + this.props.charSelected\r\n      charLayer.queryFeatures(queryChar).then((result) => {\r\n        if (this.highlightSelectChar.length) {\r\n          this.highlightSelectChar.map((highlight) => {\r\n            highlight.remove()\r\n            return void 0;\r\n          })\r\n        }\r\n        let feature = result.features\r\n        // let x = 0, y = 0\r\n        // for (let i = 0; i < feature.length; i++) {\r\n        //   x += feature[i].geometry.x\r\n        //   y += feature[i].geometry.y\r\n        // }\r\n        // x /= feature.length\r\n        // y /= feature.length\r\n        this.view.goTo(\r\n          {\r\n            center:[feature[0].geometry.x+3,feature[0].geometry.y],\r\n            zoom: 6\r\n          },\r\n          {\r\n            duration: 1000,\r\n            easing: 'in-out-expo'\r\n          })\r\n        setTimeout(()=>{\r\n          this.drawLine(feature,layerView)\r\n        },1000)\r\n        return void 0;\r\n      })\r\n    })\r\n  }\r\n  queryForEvent() {\r\n    let eventLayer = this.map.layers.items[13]\r\n    this.view.whenLayerView(eventLayer).then((layerView) => {\r\n      var queryEvents = eventLayer.createQuery();\r\n      queryEvents.where = \"FID=\" + this.props.eventSelected\r\n      eventLayer.queryFeatures(queryEvents).then((result) => {\r\n        if (this.highlightSelectEvent) {\r\n          this.highlightSelectEvent.remove()\r\n        }\r\n        let feature = result.features[0]\r\n        this.highlightSelectEvent = layerView.highlight(\r\n          feature.attributes['FID']\r\n        )\r\n        this.view.goTo(\r\n          {\r\n            center: [feature.geometry.x + 3, feature.geometry.y],\r\n            zoom: 6,\r\n          },\r\n          {\r\n            duration: 1500,\r\n            easing: 'in-out-expo'\r\n          })\r\n      })\r\n    })\r\n  }\r\n  initMap() {\r\n    EsriLoader.loadModules([\r\n      \"esri/Map\",\r\n      \"esri/Basemap\",\r\n      \"esri/layers/TileLayer\",\r\n      \"esri/views/MapView\",\r\n      \"esri/layers/FeatureLayer\",\r\n      'esri/Graphic',\r\n      'esri/widgets/Zoom',\r\n      \"esri/widgets/Compass\",\r\n      'esri/widgets/ScaleBar',\r\n      'esri/widgets/Search',\r\n      \"dojo/domReady!\"\r\n    ], this.dojoUrl).then(([Map, Basemap, TileLayer, MapView, FeatureLayer,Graphic, Zoom, Compass, ScaleBar,Search]) => {\r\n      //\r\n      const popupTemplateForCountry = {\r\n        // autocasts as new PopupTemplate()\r\n        title: '国家信息',\r\n        content: [\r\n          {\r\n            type: \"fields\",\r\n            fieldInfos: [\r\n              {\r\n                fieldName: \"Name\",\r\n                label: \"国家名称\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"Area\",\r\n                label: \"面积  (Km^2)\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"isChina\",\r\n                label: \"是否属于中国\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      };\r\n      const popupTemplateForEvent = {\r\n        // autocasts as new PopupTemplate()\r\n        title: '事件信息',\r\n        content: [\r\n          {\r\n            type: \"fields\",\r\n            fieldInfos: [\r\n              {\r\n                fieldName: \"HName\",\r\n                label: \"名称\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"HCityName\",\r\n                label: \"发生地\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"Intro\",\r\n                label: \"简介\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"STime\",\r\n                label: \"开始时间\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"ETime\",\r\n                label: \"结束时间\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      };\r\n      const popupTemplateForChar = {\r\n        title: '人物经历',\r\n        content: [\r\n          {\r\n            type: \"fields\",\r\n            fieldInfos: [\r\n              {\r\n                fieldName: \"name\",\r\n                label: \"姓名\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"year\",\r\n                label: \"年份\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"place\",\r\n                label: \"地点\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"content\",\r\n                label: \"经历\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n            ]\r\n          }\r\n        ]\r\n      };\r\n      const popupTemplateForCity = {\r\n        title: '城市信息',\r\n        content: [\r\n          {\r\n            type: \"fields\",\r\n            fieldInfos: [\r\n              {\r\n                fieldName: \"CityName\",\r\n                label: \"名称\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"lat\",\r\n                label: \"纬度\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"lng\",\r\n                label: \"经度\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n            ]\r\n          }\r\n        ]\r\n      };\r\n      for (let i = 0; i <= 15; i++) {\r\n        if (i <= 15) {\r\n          let tangLayerUrl = this.baseFeatureUrl + i\r\n          this.tangFeatureLayers.push(\r\n            new FeatureLayer({\r\n              url: tangLayerUrl,\r\n              id: 'tangLayer' + i,\r\n              visible: false,\r\n              popupTemplate: i <= 12 ? popupTemplateForCountry : i === 13 ? popupTemplateForEvent : i === 14 ? popupTemplateForChar : popupTemplateForCity,\r\n            })\r\n          )\r\n        }\r\n      }\r\n      //\r\n      let tileLayer = new TileLayer({\r\n        url: this.tileMapUrl\r\n      });\r\n      let baseMap = new Basemap({\r\n        baseLayers: [tileLayer],\r\n        id: 'myBaseMap'\r\n      });\r\n      this.map = new Map({\r\n        basemap: baseMap,\r\n        layers: this.tangFeatureLayers\r\n      });\r\n      this.view = new MapView({\r\n        center: [115, 32.1],\r\n        map: this.map,\r\n        container: \"mapDiv\",\r\n        zoom: 5\r\n      });\r\n      this.graphic = new Graphic()\r\n      let zoom = new Zoom({\r\n        view: this.view,\r\n        layout:'horizontal'\r\n      })\r\n      let compass = new Compass({\r\n        view: this.view\r\n      });\r\n      let scaleBar = new ScaleBar({\r\n        view: this.view,\r\n        unit: 'metric'\r\n      })\r\n      this.search = new Search({\r\n        view:this.view,\r\n        allPlaceholder:'找点什么',\r\n        includeDefaultSources:false,\r\n      })\r\n      this.searchSource = this.tangFeatureLayers.map((layer,idx)=>{\r\n        return {\r\n          layer:layer,\r\n          searchFields:\r\n            idx<=12?['Name']:\r\n            idx===13?[\"HName\"]:\r\n            idx===14?['name']:\r\n            ['CityName'],\r\n          suggestionTemplate: \r\n            idx<=12?\"{Name}\":\r\n            idx===13?\"{HName}, 城市:{HCityName}, 起始时间:{STime}, 结束时间:{ETime}\":\r\n            idx===14?\"{name}, 年份:{year}, 地点:{place}, 经历:{content}\":\r\n            \"{CityName}, 经度:{lng}, 纬度:{lat}\",\r\n          displayField:\r\n            idx<=12?'Name':\r\n            idx===13?\"HName\":\r\n            idx===14?'name':\r\n            'CityName',\r\n          exactMatch:false,\r\n          name:\r\n            idx<=12?\"国家\":\r\n            idx===13?\"事件\":\r\n            idx===14?\"人物\":\r\n            \"城市\",\r\n          placeholder:\r\n            idx<=12?\"查找国家-例：唐\":\r\n            idx===13?\"查找事件-例：贞观之治\":\r\n            idx===14?\"查找人物-例：李白\":\r\n            \"查找城市-例：长安\",\r\n        }\r\n      })\r\n      this.view.graphics.add(this.graphic)\r\n      this.view.ui.remove('zoom')\r\n      this.view.ui.add(zoom)\r\n      this.view.ui.add(compass)\r\n      this.view.ui.add(scaleBar, 'bottom-right')\r\n      this.view.ui.add(this.search)\r\n      let len = this.map.layers.items.length\r\n      let queryLayer = this.map.layers.items[len - 1]\r\n      this.view.when(function () {\r\n          return queryLayer.when(function () {\r\n            let query = queryLayer.createQuery()\r\n            return queryLayer.queryFeatures(query)\r\n          })\r\n      })\r\n      //\r\n    })\r\n  }\r\n\r\n  handleLayerPlay(e){\r\n    this.stopUpdate = !this.stopUpdate\r\n    this.setState({isPlay:!this.state.isPlay})\r\n    console.log(this.state.isPlay)\r\n\r\n    this.view.goTo({center:[115, 32.1],zoom:4},{duration:1000,easing:'in-out-expo'})\r\n    for(let i=0;i<13;i++){\r\n      this.map.layers.items[i].visible = false\r\n      this.map.layers.items[i].definitionExpression = \"Name='唐'\"\r\n    }\r\n    var play = ()=>{\r\n      let i=0\r\n      let t=setInterval(()=>{\r\n        if(i<=12) {\r\n          if(i) {\r\n            this.map.layers.items[i-1].visible = false\r\n          }\r\n          this.map.layers.items[i].visible = true\r\n          this.map.layers.items[15].visible = true\r\n          console.log(i)\r\n        }\r\n        if(i===13){\r\n          this.stopUpdate = !this.stopUpdate\r\n          console.log(this.state)\r\n          this.setState({isPlay:!this.state.isPlay})\r\n          this.map.layers.items.map((f,idx)=>{\r\n            f.definitionExpression = undefined;\r\n            return void 0;\r\n          })\r\n          clearInterval(t)\r\n        }\r\n        i++;\r\n        return void 0;\r\n      },2000)\r\n    }\r\n    play()\r\n  }\r\n  render() {\r\n    return (\r\n        <div id='mapDiv' style={{ height: '100%', width: '100%',padding:'5px'}}>\r\n          <Button loading={this.state.isPlay} onClick={this.handleLayerPlay.bind(this)} ghost icon={'caret-right'} \r\n          style={{position:'absolute',left:'20px',bottom:'50px'}}>播放边界变化</Button>\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MainBox","import React,{Component} from 'react'\r\nimport {Drawer} from 'antd'\r\n\r\nclass EventDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isOpen:false\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <Drawer\r\n      title={\"事件简介\"}\r\n      placement=\"right\"\r\n      closable={false}\r\n      visible={this.props.isShow}\r\n      mask={false}\r\n      style={{marginTop:'60px'}}\r\n      >\r\n        <p>{'事件名称：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HName:'')}</p>\r\n        <p>{'发生地点：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HCityName:'')}</p>\r\n        <p>{'起始时间：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].STime+' 年':'')}</p>\r\n        <p>{'结束时间：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].ETime+' 年':'')}</p>\r\n        <p>{'事件简介：'}</p>\r\n        <p style={{textIndent:'2em'}}>{this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].Intro:''}</p>\r\n      </Drawer>\r\n  )}\r\n}\r\n\r\nexport default EventDrawer","import React,{Component} from 'react';\r\nimport { Timeline } from 'antd';\r\n\r\nclass ExpTimeline extends Component{\r\n  render(){\r\n    return(\r\n      <div>\r\n        <Timeline>\r\n          <div className={'charExp'}>人物经历</div>\r\n          {this.props.exp.map((e,idx)=>{ \r\n            return <Timeline.Item key={idx} color={'#dc9123'}>\r\n              {e.year+'年，'+e.place+'，'+e.intro}\r\n            </Timeline.Item>\r\n          })}\r\n        </Timeline>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ExpTimeline","import React,{Component} from 'react'\r\nimport {Drawer} from 'antd'\r\n\r\nclass CharDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isOpen:false\r\n    }\r\n    this.iconURL = '../../icon/'\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <Drawer\r\n      title={\"人物简介\"}\r\n      placement=\"right\"\r\n      closable={false}\r\n      visible={this.props.isShow}\r\n      mask={false}\r\n      style={{marginTop:'60px'}}\r\n      >\r\n        <div style={{align:'center',textAlign:'center'}}>\r\n          <img\r\n            alt=\"icon\" src={this.iconURL+(this.props.charSelected?this.props.charSelected:'-1')+'.jpg'} />\r\n        </div>\r\n        <hr/>\r\n        <p>{'姓名：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Name:'')}</p>\r\n        <p>{'字：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].zi:'')}</p>\r\n        <p>{'号：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].hao:'')}</p>\r\n        <p>{'生年：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].STime+' 年':'')}</p>\r\n        <p>{'卒年：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].ETime+' 年':'')}</p>\r\n        <p>{'出生地：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Home:'')}</p>\r\n        <p>{'简介：'}</p>\r\n        <p style={{textIndent:'2em'}}>{this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Intro:''}</p>\r\n      </Drawer>\r\n  )}\r\n}\r\n\r\nexport default CharDrawer","import React, { Component } from 'react';\nimport Header from './compnents/Header/Header'\nimport LeftSider from './compnents/LeftSider/LeftSider'\nimport MainBox from './compnents/MainBox/MainBox'\nimport EventDrawer from './compnents/Drawer/EventDrawer'\nimport ExpTimeline from './compnents/Timelist/ExpTimeline'\nimport { Layout } from 'antd';\nimport './App.css';\nimport CharDrawer from './compnents/Drawer/CharDrawer';\n\nconst { Content } = Layout\nclass App extends Component {\n  constructor() {\n    super()\n    this.state = {\n      yearSelectedKeys: [],\n      charSelectedKeys: [],\n      eventSelectedKeys: [],\n      isYearOpen: true,\n      isEventOpen: false,\n      isCharOpen: false,\n      charProfiles: [],\n      years: [],\n      events: [],\n      experience: [],\n      curDrawing: 0,\n      isCharDrawerOpen: false,\n      isEventDrawerOpen: false,\n      isCharSelectChangeToAnother: false,\n      isEventSelectChangeToAnother: false,\n      isYearSelectChangeToAnother: false,\n    }\n  }\n\n  componentDidMount() {\n    fetch('./json/year.json')\n      .then(res => res.json())\n      .then((data) => {\n        this.setState({\n          years: data.Tang\n        })\n      })\n    fetch('./json/profile.json')\n      .then(res => res.json())\n      .then((data) => {\n        this.setState({\n          charProfiles: data.Tang\n        })\n        console.log(data)\n      })\n    fetch('./json/event.json')\n      .then(res => res.json())\n      .then((data) => {\n        this.setState({\n          events: data.Tang\n        })\n      })\n    fetch('./json/experience.json')\n      .then(res => res.json())\n      .then((data) => {\n        this.setState({\n          experience: data.Tang\n        })\n        console.log(data)\n      })\n  }\n  componentWillUpdate() {\n\n  }\n  handleSelectChange(e) {\n    if (e.keyPath[1] === 'years') {\n      this.setState({\n        isYearSelectChangeToAnother: true,\n        isCharSelectChangeToAnother: false,\n        isEventSelectChangeToAnother: false\n      })\n      if (!this.state.yearSelectedKeys.length) {\n        this.setState({ yearSelectedKeys: [e.key] })\n      }\n      else if (this.state.yearSelectedKeys[0] === e.key) {\n        this.setState({ yearSelectedKeys: [] })\n      } else {\n        this.setState({ yearSelectedKeys: [e.key] })\n      }\n    }\n    if (e.keyPath[1] === 'events') {\n      this.setState({\n        isYearSelectChangeToAnother: false,\n        isCharSelectChangeToAnother: false,\n        isEventSelectChangeToAnother: true\n      })\n      if (!this.state.eventSelectedKeys.length) {\n        this.setState({\n          eventSelectedKeys: [e.key],\n          isEventDrawerOpen: true,\n          isCharDrawerOpen: false,\n        })\n      }\n      else if (this.state.eventSelectedKeys[0] === e.key) {\n        this.setState({\n          eventSelectedKeys: [],\n          isEventDrawerOpen: false,\n          isCharDrawerOpen: this.state.charSelectedKeys.length ? true : false,\n        })\n      } else {\n        this.setState({\n          eventSelectedKeys: [e.key],\n          isEventDrawerOpen: true,\n          isCharDrawerOpen: false,\n        })\n      }\n    }\n    if (e.keyPath[1] === 'characters') {\n      this.setState({\n        isYearSelectChangeToAnother: false,\n        isEventSelectChangeToAnother: false,\n        isCharSelectChangeToAnother: true\n      })\n      if (!this.state.charSelectedKeys.length) {\n        this.setState({\n          charSelectedKeys: [e.key],\n          isEventDrawerOpen: false,\n          isCharDrawerOpen: true,\n        })\n      }\n      else if (this.state.charSelectedKeys[0] === e.key) {\n        this.setState({\n          charSelectedKeys: [],\n          isCharDrawerOpen: false,\n          isEventDrawerOpen: this.state.eventSelectedKeys.length ? true : false,\n        })\n      } else {\n        this.setState({\n          charSelectedKeys: [e.key],\n          isEventDrawerOpen: false,\n          isCharDrawerOpen: true,\n        })\n      }\n    }\n  }\n\n  handleEventOpen(e) {\n    console.log(e)\n    if (!e.length) this.setState({ isEventDrawerOpen: false, isCharDrawerOpen: this.state.charSelectedKeys.length ? true : false })\n    this.setState({\n      isEventOpen: this.state.isEventOpen ? false : true,\n      eventSelectedKeys: [],\n      isEventSelectChangeToAnother: this.state.isEventSelectChangeToAnother ? false : true,\n      isCharSelectChangeToAnother: false,\n      isYearSelectChangeToAnother: false\n    })\n  }\n\n  handleCharOpen(e) {\n    if (!e.length) this.setState({ isCharDrawerOpen: false, isEventDrawerOpen: this.state.eventSelectedKeys.length ? true : false })\n    this.setState({\n      isCharOpen: this.state.isCharOpen ? false : true,\n      charSelectedKeys: [],\n      isCharSelectChangeToAnother: this.state.isCharSelectChangeToAnother ? false : true,\n      isEventSelectChangeToAnother: false,\n      isYearSelectChangeToAnother: false\n    })\n  }\n\n  handleYearOpen(e) {\n    if (!e.length) this.setState({ isYearOpen: this.state.isYearOpen ? false : true, yearSelectedKeys: [] })\n    this.setState({\n      isYearOpen: this.state.isYearOpen ? false : true,\n      isCharSelectChangeToAnother: false,\n      isEventSelectChangeToAnother: false,\n      isYearSelectChangeToAnother: this.state.isYearSelectChangeToAnother ? false : true\n    })\n  }\n  render() {\n    const exp = []\n    this.state.experience.map((e) => {\n      if (e.ID === this.state.charSelectedKeys[0]) exp.push(e)\n      return void 0;\n    })\n    return (\n      <div className=\"App\">\n        <Header />\n        <Layout style={{ position: 'relative', height: 'calc(100% - 60px)' }}>\n          <LeftSider\n            years={this.state.years} charProfiles={this.state.charProfiles} events={this.state.events}\n            onSelect={this.handleSelectChange.bind(this)} onYearOpen={this.handleYearOpen.bind(this)}\n            onEventOpen={this.handleEventOpen.bind(this)} onCharOpen={this.handleCharOpen.bind(this)} />\n          <Content style={{ position: 'relative' }}>\n            <MainBox\n              yearSelected={this.state.yearSelectedKeys[0]}\n              charSelected={this.state.charSelectedKeys[0]}\n              eventSelected={this.state.eventSelectedKeys[0]}\n              isShowYear={this.state.isYearOpen}\n              isShowEvent={this.state.isEventOpen}\n              isShowChar={this.state.isCharOpen}\n              isYearSelectChangeToAnother={this.state.isYearSelectChangeToAnother}\n              isCharSelectChangeToAnother={this.state.isCharSelectChangeToAnother}\n              isEventSelectChangeToAnother={this.state.isEventSelectChangeToAnother}\n              curDrawingPoint={this.handleCurDrawing}\n            />\n            {exp.length ? <ExpTimeline exp={exp} /> : null}\n          </Content>\n          <EventDrawer\n            events={this.state.events}\n            isShow={this.state.isEventDrawerOpen}\n            eventSelected={this.state.eventSelectedKeys[0]} />\n          <CharDrawer\n            chars={this.state.charProfiles}\n            isShow={this.state.isCharDrawerOpen}\n            charSelected={this.state.charSelectedKeys[0]} />\n        </Layout>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}