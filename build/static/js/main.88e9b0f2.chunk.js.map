{"version":3,"sources":["compnents/LeftSider/LeftSider.less","compnents/MainBox/mainBox.less","compnents/charts/YearSelector.less","compnents/Search/Search.less","compnents/ToolBox/index.less","compnents/Header/Header.js","compnents/charts/YearSelector.js","compnents/charts/DataAnalysis.js","compnents/YearModal/YearModal.js","compnents/LeftSider/WikiMap.js","compnents/Search/Search.js","compnents/MainBox/utils/timeMap.js","compnents/LeftSider/LeftSider.js","compnents/MainBox/utils/sketch.js","compnents/MainBox/utils/renderer.js","config/config.js","compnents/MainBox/utils/layerOptions.js","compnents/MainBox/utils/popUpTemplate.js","compnents/MainBox/utils/label.js","compnents/Drawer/Common.js","compnents/MainBox/MainBox.js","compnents/Comment/index.js","compnents/Drawer/EventDrawer.js","compnents/Drawer/CharDrawer.js","compnents/ToolBox/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","selectors","chartContainer","yearModal","play_button","traj_set","charts","searchWrapper","toolbox_button","Header","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","visible","setState","react_default","a","createElement","className","props","title","onClick","handleClickbout","bind","about","modal","aboutTitle","okText","footer","onCancel","handleCancel","Component","defaultProps","YearSelector","React","createRef","lineChartsInstance","option","data","_this2","echarts","init","current","setOption","tooltip","trigger","xAxis","map","item","yAxis","show","splitLine","interval","name","dataZoom","startValue","type","visualMap","top","right","series","defineProperty","color","areaStyle","toFixed","on","e","index","dataIndex","console","log","length","renderChart","style","s","ref","creatChartOption","text","left","textStyle","formatter","min","max","inRange","colorLightness","radius","center","roseType","label","normal","labelLine","lineStyle","smooth","length2","itemStyle","shadowBlur","shadowColor","animationType","animationEasing","animationDelay","idx","Math","random","DataAnalysis","selectedBoundary","i","attributes","Name","value","parseInt","Area","height","createEventOption","xData","yData","axisPointer","grid","bottom","containLabel","axisTick","alignWithLabel","barWidth","EventDataAnalysis","_this3","_this4","result","selectedEvents","forEach","HCityName","entries","push","YearModal","_React$Component","apply","arguments","inherits","createClass","key","onOk","handleOk","centered","width","children","wikiMap","夏","商","周","春秋","战国","秦","汉","三国","晋","十六国","隋","唐","五代十国","宋","元","明","清","民国","中华人民共和国","Option","AutoComplete","OptGroup","Complete","_Component","dataSource","initData","includes","dy","split","onSelect","payload","evtOrPpl","actionType","endsWith","event","findIndex","HName","people","find","year","Year","exist","keys","y","c","indexOf","content","options","group","opt","auto_complete","dropdownClassName","dropdownMatchSelectWidth","dropdownStyle","size","placeholder","optionLabelProp","onSearch","handleSearch","input","suffix","icon","timeMap","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","Select","SubMenu","Menu","LeftSider","collapsed","yearLabel","undefined","showYearModal","showWiki","currentYear","currentPeople","currentEvent","eventFID","onSelectEvent","charFID","onSelectChar","dynasty","onSelectDynasty","onSelectYear","toString","tmp","handleYearSelect","wikiname","years","menu","maxHeight","overflowY","yearList","_loop","_Object$keys","_i","Item","events","es_select","showSearch","onChange","handleEventSelect","allowClear","concat","LeftSider_Option","FID","handlePeopleSelect","charProfiles","char","tiles","currentTile","tilesMap","tile","handleTileSelect","dropdown","overlay","es_button","join","YearSelector_YearSelector","handleBarClick","yearArea","openYearModal","YearModal_YearModal","src","align","seamless","frameborder","position","createSketch","Obj","Sketch","sketch","view","layer","graphicsLayer2","rightDrawShow","selectGrphics","query","baseBoundaryFeatureLayer","createQuery","graphic","geometry","spatialRelationship","queryFeatures","then","results","boundaryhighlight","remove","featureLayerView","highlight","features","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","feature","err","return","baseEventFeatureLayer","eventHightLight","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","heatMapRenderer","colorStops","ratio","maxPixelIntensity","minPixelIntensity","simpleMarkerRender","symbol","font","family","weight","simplePeopleMarkerRender","Config","staticPath","gisRestServer","dojoServer","commentApi","baseBoundaryFeatureUrl","config","baseEventFeatureUrl","basePeopleFeatureUrl","boundaryLayerOption","url","popupTemplate","fieldInfos","fieldName","format","places","digitSeparator","renderer","field","defaultSymbol","uniqueValueInfos","outline","labelingInfo","haloColor","labelPlacement","labelExpressionInfo","expression","eventLayerOption","peopleLayerOption","definitionExpression","RightDrawer","isOpen","drawer","placement","closable","isShow","mask","marginTop","onClose","fontSize","DataAnalysis_DataAnalysis","DataAnalysis_EventDataAnalysis","onMouseOver","onHoverResult","Intro","trim","MainBox","Button","Group","dojoUrl","tileMapUrl","isPlay","playControllerText","sliderValue","showBoundary","showTraj","bntLabel","speedChange","speed","expIdx","showExp","playTimer","stopUpdate","changeBaseMap","initMap","mapPoint","popup","open","location","action","prevProps","prevState","eventHeatmap","heatmap","changeBoundaryLayer","currentTileMap","toolbar","ui","add","trajCtrl","currentChar","basePeopleFeatureLayer","showChar","showOther","showEvent","whenLayerView","layerView","where","goTo","zoom","duration","easing","setTimeout","prevChar","t","clearInterval","polyline","paths","currentDynasty","loadingPath","traj","play","setInterval","shift","track","manifestIdx","nodeIdx","unshift","queryChar","cnt","interpolation","pointA","pointB","inverse","angle","PI","round","pointC","x","abs","tan","k","x0","y0","dist","sqrt","incre","pnt","tmpPnt1","tmpPnt2","pntSet","_this5","EsriLoader","loadModules","_ref","_ref2","slicedToArray","GraphicsLayer","Map","Basemap","TileLayer","MapView","FeatureLayer","Graphic","Zoom","Compass","ScaleBar","tileLayer","baseMap","baseLayers","id","basemap","layers","container","layout","compass","scaleBar","unit","graphics","padding","slice","eventLayerIndex","searchKey","String","_this6","message","error","_this7","_this8","timeline","es_timeline","experience","handleExpNav","dot","Place","Content","empty","description","Fragment","handleShowPath","slider","included","marks","tooltipPlacement","step","defaultValue","onAfterChange","handleSpeedChange","handleLayerPlay","Common_RightDrawer","handleMouseOverSearchResult","Search_Complete","onSearchSelect","TextArea","Input","Editor","onSubmit","submitting","es_form","rows","htmlType","loading","CustomComment","comments","fetch","res","json","catch","getComments","target","comment","user","boxShadow","es_comment","author","Comment_Editor","EventDrawer","eventProfile","STime","ETime","textIndent","showComment","Comment_CustomComment","CharDrawer","iconURL","charProfile","textAlign","zi","hao","Home","ToolBox","_getPrototypeOf2","_len","args","Array","_key","showDrawer","overflow","onMouseEnter","onMouseLeave","getContainer","http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer","http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer","http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineCommunity/MapServer","https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer","Layout","App","Trigger","d","d1","yearData","profileData","eventData","experienceData","Promise","all","dataList","processYear","processYearArea","_ref3","toConsumableArray","values","compnents_Header_Header","compnents_LeftSider_LeftSider","onSelectTileMap","compnents_MainBox_MainBox","ToolBox_ToolBox","es_switch","b","objectSpread","checkedChildren","unCheckedChildren","divider","defaultChecked","Drawer_EventDrawer","Drawer_CharDrawer","isLocalhost","Boolean","window","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","src_App_0","document","getElementById","URL","process","href","origin","addEventListener","response","contentType","headers","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.88e9b0f2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectors\":\"iOiwMT-1TxxMLRgACDatD\",\"chartContainer\":\"_1b6gGgX2FWpShEK49xJe08\",\"yearModal\":\"_2LbZuV3XVAR4R6WKIkC_jX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"play_button\":\"_1A0Na77mvvdzir8BTaZ7Pe\",\"traj_set\":\"_2HdPtE-HXij_-jd6mw586p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"charts\":\"oEFAxP79VZEMLn9X4OCbh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchWrapper\":\"_5UDuQJuf1p8makYUDFNrA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbox_button\":\"WU8AGThvmAIisORzI8l_3\"};","import React,{Component} from 'react'\r\nimport { Modal,Divider } from 'antd'\r\nimport './Header.css'\r\nclass Header extends Component{\r\n    static defaultProps = {\r\n        title:'华夏印象——中国历史地理数据展示平台',\r\n        about:'关于我们',\r\n        aboutTitle:'华夏印象——中国历史地理数据展示平台',\r\n\r\n    }\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            visible:false\r\n        }\r\n    }\r\n\r\n    handleClickbout(){\r\n        this.setState({\r\n            visible: true,\r\n      });\r\n    }\r\n    handleCancel(){\r\n        this.setState({\r\n            visible: false,\r\n      });\r\n    }\r\n    render(){\r\n        return(\r\n            <div className='header'>\r\n                <span className={'title'}>{this.props.title}</span>\r\n                <button className={'about'} onClick={this.handleClickbout.bind(this)}>{this.props.about}</button>\r\n                <Modal\r\n                    title={this.props.aboutTitle}\r\n                    visible={this.state.visible}\r\n                    okText={'确认'}\r\n                    footer={null}\r\n                    onCancel={this.handleCancel.bind(this)}\r\n              >\r\n                    <p><strong>{'简介：'}</strong>{'该平台展示了中国自夏朝（公元前2100年）到新中国成立（1949年）以来的疆界范围、历史人物的人生轨迹和历史事件的分布情况，支持查询、搜索、评论等功能。'}</p>\r\n                    <p><strong>{'制作成员：'}</strong>{'侯骁谋 胡靖元 胡赛涵 劳大钊'}</p>\r\n                    <p><strong>{'指导老师：'}</strong>{'马林兵'}</p>\r\n                    <p><strong>{'特别鸣谢：'}</strong>{'2013级师姐 郑洁淳、袁琦芮、李筱睿、冷宛春、胡洁、张倩茹'}</p>\r\n                    <p><strong>{'单位：'}</strong>{'中山大学 地理科学与规划学院'}</p>\r\n\r\n              </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Header","import React, { Component } from 'react';\r\nimport echarts from 'echarts/lib/echarts';\r\nimport 'echarts/lib/chart/line';\r\nimport 'echarts/lib/component/tooltip';\r\nimport 'echarts/lib/component/dataZoom';\r\nimport 'echarts/lib/component/title';\r\nimport s from './YearSelector.less';\r\n\r\nclass YearSelector extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.charts = React.createRef();\r\n        this.lineChartsInstance = null;\r\n        this.option = null;\r\n\r\n    }\r\n\r\n    renderChart(data) {\r\n        //console.log(data)\r\n        this.lineChartsInstance = echarts.init(this.charts.current);\r\n        this.lineChartsInstance.setOption(this.option = {\r\n            tooltip: {\r\n                trigger: 'axis'\r\n            },\r\n            xAxis: {\r\n                data: data.map(function (item) {\r\n                    return item[0];\r\n                })\r\n            },\r\n            yAxis: {\r\n                show: true,\r\n                splitLine: {\r\n                    show: false\r\n                },\r\n                interval: 500000000,\r\n                name: '面积'\r\n            },\r\n            dataZoom: [{\r\n                startValue: '2014-06-01'\r\n            }, {\r\n                type: 'inside'\r\n            }],\r\n            visualMap: {\r\n                top: 10,\r\n                right: 10,\r\n            },\r\n            series: {\r\n                name: '疆域面积',\r\n                type: 'line',\r\n                color:['#b78b26'],\r\n                areaStyle: {\r\n                    color: '#b78b26' //折线下方色块颜色\r\n                },\r\n                data: data.map(function (item) {\r\n                    return (item[1] / 1.56).toFixed(0); // 面积数据存在问题，暂时解决\r\n                }),\r\n                areaStyle: {}\r\n            }\r\n        },true);\r\n        this.lineChartsInstance.on('click', 'series', e => {\r\n            const index = e.dataIndex;\r\n            const name = e.name\r\n            console.log(e)\r\n            this.props.onClick(index,name);\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.data.length) {\r\n            this.renderChart.call(this, this.props.data);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        //console.log(this.renderChart)\r\n        \r\n        if (this.props.data.length) {\r\n            this.renderChart.call(this, this.props.data);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div style={this.props.style} className={s.charts}>\r\n                <div  ref={this.charts}></div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport { YearSelector };","import React, { Component } from 'react';\r\nimport echarts from 'echarts/lib/echarts';\r\nimport 'echarts/lib/chart/pie';\r\nimport 'echarts/lib/chart/bar';\r\nimport 'echarts/lib/component/tooltip';\r\nimport 'echarts/lib/component/dataZoom';\r\nimport 'echarts/lib/component/title';\r\nimport { optionalCallExpression } from '@babel/types';\r\n\r\nconst creatChartOption = (data) => ({\r\n\r\n    title: {\r\n        text: '分布状况',\r\n        left: 'center',\r\n        textStyle: {\r\n            color: '#111'\r\n        }\r\n    },\r\n\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: \"{a} <br/>{b} : ({d}%)\"\r\n    },\r\n\r\n    visualMap: {\r\n        show: false,\r\n        min: 80,\r\n        max: 600,\r\n        inRange: {\r\n            colorLightness: [0, 1]\r\n        }\r\n    },\r\n    series: [\r\n        {\r\n            name: '比例',\r\n            type: 'pie',\r\n            radius: '55%',\r\n            center: ['50%', '50%'],\r\n            data,\r\n            roseType: 'radius',\r\n            label: {\r\n                normal: {\r\n                    textStyle: {\r\n                        color: 'rgba(255, 255, 255, 0.3)'\r\n                    }\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    lineStyle: {\r\n                        color: 'rgba(255, 255, 255, 0.3)'\r\n                    },\r\n                    smooth: 0.2,\r\n                    length: 10,\r\n                    length2: 20\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#c23531',\r\n                    shadowBlur: 200,\r\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                }\r\n            },\r\n\r\n            animationType: 'scale',\r\n            animationEasing: 'elasticOut',\r\n            animationDelay: function (idx) {\r\n                return Math.random() * 200;\r\n            }\r\n        }\r\n    ]\r\n});\r\n\r\n\r\nclass DataAnalysis extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.charts = React.createRef();\r\n        this.lineChartsInstance = null;\r\n        this.option = creatChartOption(props.data);\r\n\r\n    }\r\n\r\n    renderChart(data) {\r\n        //console.log(data)\r\n        data = data.selectedBoundary.map(i => {\r\n            return {\r\n                name: i.attributes.Name,\r\n                value: parseInt(i.attributes.Area)\r\n            }\r\n        })\r\n        console.log(data);\r\n        this.lineChartsInstance = echarts.init(this.charts.current);\r\n        this.lineChartsInstance.setOption(creatChartOption(data), true);\r\n        this.lineChartsInstance.on('click', 'series', e => {\r\n            const index = e.dataIndex;\r\n            const name = e.name\r\n            console.log(e)\r\n            this.props.onClick(index, name);\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.data.length) {\r\n            this.renderChart.call(this, this.props.data);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        //console.log(this.renderChart)\r\n\r\n        if (this.props.data.selectedBoundary.length > 0) {\r\n            this.renderChart.call(this, this.props.data);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div style={{ height: 200 }}>\r\n                <div style={{ height: 200 }} ref={this.charts}></div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst createEventOption = (xData, yData) => {\r\n    const option = {\r\n\r\n        title: {\r\n            text: '统计',\r\n            left: 'center',\r\n            textStyle: {\r\n                color: '#111'\r\n            }\r\n        },\r\n        color: ['#3398DB'],\r\n        tooltip: {\r\n            trigger: 'axis',\r\n            axisPointer: {            // 坐标轴指示器，坐标轴触发有效\r\n                type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\r\n            }\r\n        },\r\n        grid: {\r\n            left: '3%',\r\n            right: '4%',\r\n            bottom: '3%',\r\n            containLabel: true\r\n        },\r\n        xAxis: [\r\n            {\r\n                type: 'category',\r\n                data: xData,\r\n                axisTick: {\r\n                    alignWithLabel: true\r\n                }\r\n            }\r\n        ],\r\n        yAxis: [\r\n            {\r\n                type: 'value'\r\n            }\r\n        ],\r\n        series: [\r\n            {\r\n                name: '数量',\r\n                type: 'bar',\r\n                barWidth: '70%',\r\n                data: yData\r\n            }\r\n        ]\r\n    };\r\n    return option;\r\n}\r\n\r\nclass EventDataAnalysis extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.charts = React.createRef();\r\n        this.lineChartsInstance = null;\r\n        this.option = createEventOption(props.data);\r\n\r\n    }\r\n\r\n    renderChart(data) {\r\n        //console.log(data)\r\n        const result = {};\r\n        data = data.selectedEvents.forEach(i => {\r\n            if (result[i.attributes.HCityName]) {\r\n                result[i.attributes.HCityName]++;\r\n            } else {\r\n                result[i.attributes.HCityName] = 1;\r\n            }\r\n        });\r\n        const xData = [];\r\n        const yData = [];\r\n        Object.entries(result).forEach(i => {\r\n            xData.push(i[0]);\r\n            yData.push(i[1]);\r\n        })\r\n        console.log(xData, yData);\r\n        this.lineChartsInstance = echarts.init(this.charts.current);\r\n        this.lineChartsInstance.setOption(createEventOption(xData, yData), true);\r\n        this.lineChartsInstance.on('click', 'series', e => {\r\n            const index = e.dataIndex;\r\n            const name = e.name\r\n            console.log(e)\r\n            this.props.onClick(index, name);\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.data.length) {\r\n            this.renderChart.call(this, this.props.data);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        //console.log(this.renderChart)\r\n\r\n        if (this.props.data.selectedBoundary.length > 0) {\r\n            this.renderChart.call(this, this.props.data);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div style={{ height: 200 }}>\r\n                <div style={{ height: 200 }} ref={this.charts}></div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport { DataAnalysis, EventDataAnalysis };","import { Modal } from 'antd';\r\nimport React from 'react';\r\n\r\nexport class YearModal extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Modal\r\n          title=\"年代百科\"\r\n          visible={this.props.visible}\r\n          onOk={this.props.handleOk}\r\n          onCancel={this.props.handleCancel}\r\n          centered\r\n          width={'70%'}\r\n        >\r\n          {this.props.children}\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}","export const wikiMap = {\r\n    '夏': '夏朝',\r\n    '商': '商朝',\r\n    '周': '周朝',\r\n    '春秋': '春秋',\r\n    '战国': '战国',\r\n    '秦': '秦朝',\r\n    '汉': '汉朝',\r\n    '三国': '三国/5428',\r\n    '晋': '晋朝',\r\n    '十六国': '十六国',\r\n    '隋': '隋朝',\r\n    '唐': '唐朝',\r\n    '五代十国': '五代十国',\r\n    '宋': '宋朝',\r\n    '元': '元朝',\r\n    '明': '明朝',\r\n    '清': '清朝',\r\n    '民国': '民国',\r\n    '中华人民共和国': '中华人民共和国'\r\n}","import React, { Component } from 'react';\r\nimport s from './Search.less';\r\nimport { Icon, Input, AutoComplete } from 'antd';\r\n\r\nconst { Option, OptGroup } = AutoComplete;\r\n\r\n\r\nexport class Complete extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            dataSource: this.initData('')\r\n        }\r\n    }\r\n\r\n    onSelect(i) {\r\n        console.log(this.props)\r\n        if (i.includes(':')) {\r\n            const dy = i.split(': ')[0];\r\n            this.props.onSelect({\r\n                type: 0,\r\n                payload: dy\r\n            })\r\n            let evtOrPpl = i.split(': ')[1];\r\n            let actionType = evtOrPpl.endsWith('年') ? 3 : this.props.event[dy].findIndex(i => i.HName === evtOrPpl) !== -1 ? 2 : 1;\r\n            let payload = null;\r\n            if (actionType === 1) {\r\n                payload = this.props.people[dy].find(i => i.Name === evtOrPpl)['FID'];\r\n                this.props.onSelect({\r\n                    type: actionType,\r\n                    payload\r\n                })\r\n            } else if (actionType === 2) {\r\n                payload = this.props.event[dy].find(i => i.HName === evtOrPpl)['FID'];\r\n                console.log(this.props.event[dy].find(i => i.HName === evtOrPpl))\r\n                this.props.onSelect({\r\n                    type: actionType,\r\n                    payload\r\n                })\r\n            } else if (actionType === 3) {\r\n                payload = this.props.year[dy].find(i => i.Year === evtOrPpl)['idx'];\r\n                this.props.onSelect({\r\n                    type: actionType,\r\n                    payload\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    initData(value) {\r\n        if (!this.props.year) {\r\n            return null;\r\n        }\r\n        const year = [];\r\n        let exist = [];\r\n        Object.keys(this.props.year).forEach(y => {\r\n            this.props.year[y].forEach(c => {\r\n                if (exist.indexOf(y + ': ' + c.Year) === -1) {\r\n                    year.push({\r\n                        title: y,\r\n                        content: y + ': ' + c.Year\r\n                    })\r\n                    exist.push(y + ': ' + c.Year)\r\n                }\r\n            })\r\n        });\r\n        const event = [];\r\n        exist = [];\r\n        Object.keys(this.props.event).forEach(y => {\r\n            this.props.event[y].forEach(c => {\r\n                if (c.HName.includes(value)) {\r\n                    if (exist.indexOf(y + ': ' + c.HName) === -1) {\r\n                        event.push({\r\n                            title: y,\r\n                            content: y + ': ' + c.HName\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n        });\r\n        const people = [];\r\n        exist = [];\r\n        Object.keys(this.props.people).forEach(y => {\r\n            this.props.people[y].forEach(c => {\r\n                if (c.Name.includes(value)) {\r\n                    if (exist.indexOf(y + ': ' + c.Name) === -1) {\r\n                        people.push({\r\n                            title: y,\r\n                            content: y + ': ' + c.Name\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n        });\r\n        const dataSource = [\r\n            {\r\n                title: '年代',\r\n                children: year,\r\n            },\r\n            {\r\n                title: '事件',\r\n                children: event\r\n            },\r\n            {\r\n                title: '人物',\r\n                children: people\r\n            },\r\n        ];\r\n\r\n        function renderTitle(title) {\r\n            return (\r\n                <span>\r\n                    {title}\r\n                </span>\r\n            );\r\n        }\r\n\r\n        const options = dataSource\r\n            .map(group => (\r\n                <OptGroup key={group.title} label={renderTitle(group.title)}>\r\n                    {group.children.map((opt, index) => (\r\n                        <Option key={opt.title + opt.content + index} value={opt.content}>\r\n                            <span className=\"certain-search-item-count\">{opt.content}</span>\r\n                        </Option>\r\n                    ))}\r\n                </OptGroup>\r\n            ))\r\n\r\n        this.setState({\r\n            dataSource: options\r\n        })\r\n    }\r\n    handleSearch(value) {\r\n        this.initData(value);\r\n    }\r\n    render() {\r\n        return (\r\n            <div className={s.searchWrapper} style={{ width: 250 }}>\r\n                <AutoComplete\r\n                    className=\"certain-category-search\"\r\n                    dropdownClassName=\"certain-category-search-dropdown\"\r\n                    dropdownMatchSelectWidth={true}\r\n                    dropdownStyle={{ width: 300 }}\r\n                    size=\"large\"\r\n                    style={{ width: '100%' }}\r\n                    dataSource={this.state.dataSource}\r\n                    placeholder=\"搜索\"\r\n                    optionLabelProp=\"value\"\r\n                    onSearch={this.handleSearch.bind(this)}\r\n                    onSelect={this.onSelect.bind(this)}\r\n                >\r\n                    <Input suffix={<Icon type=\"search\" className=\"certain-category-icon\" />} />\r\n                </AutoComplete>\r\n            </div>\r\n        );\r\n    }\r\n}","export const timeMap = {\r\n    0: [0, 1],\r\n    1: [1, 2],\r\n    2: [2, 5],\r\n    3: [5, 10],\r\n    4: [10, 15],\r\n    5: [15, 19],\r\n    6: [19, 38],\r\n    7: [38, 41],\r\n    8: [41, 47],\r\n    9: [47, 51],\r\n    10: [51, 61],\r\n    11: [61, 69],\r\n    12: [69, 82],\r\n    13: [82, 91],\r\n    14: [91, 103],\r\n    15: [103, 111],\r\n    16: [111, 117],\r\n    17: [117, 128],\r\n    18: [128, 134]\r\n}\r\n\r\nexport const nameMap = {\r\n    '夏': [0, 1],\r\n    '商': [1, 2],\r\n    '周': [2, 5],\r\n    '春秋': [5, 10],\r\n    '战国': [10, 15],\r\n    '秦': [15, 19],\r\n    '汉': [19, 38],\r\n    '三国': [38, 41],\r\n    '晋': [41, 47],\r\n    '十六国': [47, 51],\r\n    '南北': [51, 61],\r\n    '隋': [61, 69],\r\n    '唐': [69, 82],\r\n    '五代十国': [82, 91],\r\n    '宋': [91, 103],\r\n    '元': [103, 111],\r\n    '民': [111, 117],\r\n    '清': [117, 128],\r\n    '民国': [128, 134]\r\n}\r\n\r\nexport function searchKey(dy) {\r\n    let result = 0;\r\n    Object.keys(timeMap).forEach(i => {\r\n        if (timeMap[i][1] > dy && timeMap[i][0] <= dy) {\r\n            result = parseInt(i);\r\n        }\r\n    })\r\n    return result;\r\n}\r\n\r\nexport function searchName(dy) {\r\n    let result = 0;\r\n    Object.keys(nameMap).forEach(i => {\r\n        if (nameMap[i][1] > dy && nameMap[i][0] <= dy) {\r\n            result = i;\r\n        }\r\n    })\r\n    return result;\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { Menu, Dropdown, Button } from 'antd';\r\nimport s from './LeftSider.less';\r\nimport { Select } from 'antd';\r\nimport { YearSelector } from '../charts';\r\nimport { YearModal } from '../YearModal/YearModal';\r\nimport { wikiMap } from './WikiMap';\r\nimport Search from '../Search';\r\nimport { searchKey, searchName } from '../MainBox/utils/timeMap';\r\nconst { Option } = Select;\r\nconst { SubMenu } = Menu;\r\n\r\nclass LeftSider extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      collapsed: false,\r\n      yearLabel: undefined,\r\n      showYearModal: false,\r\n      showWiki:false,\r\n      currentYear: ['唐', '619年'],\r\n      currentPeople: null,\r\n      currentEvent: null\r\n    };\r\n  }\r\n\r\n  handleEventSelect(eventFID) {\r\n    if(this.props.onSelectEvent) this.props.onSelectEvent(eventFID)\r\n    this.setState({ currentEvent: eventFID });\r\n  }\r\n  handlePeopleSelect(charFID) {\r\n    if(this.props.onSelectChar) this.props.onSelectChar(charFID)\r\n    this.setState({ currentPeople: charFID });\r\n  }\r\n  handleYearSelect(dynasty, year, idx) {\r\n    //console.log(dynasty,year,idx)\r\n    if(this.props.onSelectDynasty) {\r\n      this.props.onSelectDynasty(dynasty)\r\n    }\r\n    if(this.props.onSelectYear) this.props.onSelectYear(idx);\r\n    this.setState({ currentYear: [dynasty, year]});\r\n  }\r\n\r\n  handleBarClick(idx,name){\r\n    if(name.split(\" \").toString()+\"年\"!==this.state.currentYear.toString()){\r\n      let tmp = name.split(\" \")\r\n      tmp[1]+='年'\r\n      this.setState({currentYear:tmp})\r\n      this.handleYearSelect(tmp[0],tmp[1],idx)\r\n    }\r\n  }\r\n\r\n  openYearModal() {\r\n    this.setState({ showYearModal: true });\r\n  }\r\n\r\n  render() {\r\n    const wikiname = wikiMap[this.state.currentYear[0]];\r\n    const years = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {\r\n          ((years) => {\r\n            const yearList = [];\r\n            for (let name of Object.keys(years)) {\r\n              yearList.push(\r\n                <SubMenu title={name} key={name}>\r\n                  {years[name].map((year, index) => <Menu.Item key={name + year.Year + index} onClick={this.handleYearSelect.bind(this, name, year.Year, year.idx)}>{year.Year}</Menu.Item>)}\r\n                </SubMenu>\r\n              )\r\n            }\r\n            return yearList;\r\n          })(this.props.years)\r\n        }\r\n      </Menu>\r\n    );\r\n    const events = (\r\n      <Select showSearch\r\n        onChange = {this.handleEventSelect.bind(this)}\r\n        allowClear={true}\r\n        placeholder={`${this.state.currentYear[0]}: 历史事件`} \r\n        style={{ width:140,overflowY: 'auto' }}>\r\n        {this.props.events[this.state.currentYear[0]] &&\r\n          this.props.events[this.state.currentYear[0]].map(\r\n            event => (\r\n              <Option value={event.FID} key={event.FID}>\r\n                {event.HName}\r\n              </Option>\r\n            )\r\n          )}\r\n      </Select>\r\n    );\r\n    const people = (\r\n      <Select showSearch\r\n        onChange = {this.handlePeopleSelect.bind(this)}\r\n        allowClear={true}\r\n        placeholder={`${this.state.currentYear[0]}: 历史人物`} \r\n        style={{ width:140,overflowY: 'auto' }}>\r\n        {this.props.charProfiles[this.state.currentYear[0]] &&\r\n          this.props.charProfiles[this.state.currentYear[0]].map(\r\n            char => (\r\n              <Option value={char.FID} key={char.FID}>\r\n                {char.Name}\r\n              </Option>\r\n            )\r\n          )}\r\n      </Select>\r\n    );\r\n    const tiles = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {this.props.currentTile &&\r\n          Object.keys(this.props.tilesMap).map(\r\n            tile => (\r\n              <Menu.Item\r\n                key={tile}\r\n                onClick={() => { this.props.handleTileSelect(tile) }}>\r\n                {this.props.tilesMap[tile]}\r\n              </Menu.Item>\r\n            )\r\n          )}\r\n      </Menu>\r\n    );\r\n    return (\r\n      <div>\r\n      <div className={s.selectors}>\r\n        <div>\r\n          <Dropdown overlay={years} trigger={['click']} >\r\n            <Button type={'primary'} >{this.state.currentYear.join(' ') || '年代边界'}</Button>\r\n          </Dropdown>\r\n        </div>\r\n        <div>{people}</div>\r\n        <div>{events}</div>\r\n        <div>\r\n          <Dropdown overlay={tiles} trigger={['click']}>\r\n            <Button>{`底图: ${this.props.tilesMap[this.props.currentTile] || 'Community'}`}</Button>\r\n          </Dropdown>\r\n        </div>\r\n      </div>\r\n      <div className={s.chartContainer}>\r\n          <YearSelector onClick={this.handleBarClick.bind(this)}  data={this.props.yearArea} />\r\n      </div>\r\n      <div className={s.yearModal}>\r\n        <Button type={'primary'} onClick={this.openYearModal.bind(this)}>年代百科</Button>\r\n        <YearModal\r\n          visible={this.state.showYearModal}\r\n          handleCancel={() => this.setState({ showYearModal: false })}\r\n          handleOk={() => this.setState({ showYearModal: false })}\r\n        >\r\n          <Button onClick={() => this.setState({ showWiki: !this.state.showWiki })}>显示百科</Button>\r\n          {\r\n            this.state.showWiki &&\r\n            <iframe name=\"wiki_frame\" title=\"baike\" src={\"https://baike.baidu.com/item/\" + wikiname} height=\"600px\" width=\"1240px\" align=\"absmiddle\" seamless frameborder=\"0\"></iframe>\r\n          }\r\n          <YearSelector\r\n            style={{ position: 'relative', left: 0, right: 0, bottom: 0}}\r\n            onClick={this.handleBarClick.bind(this)}\r\n            data={this.props.yearArea} />\r\n        </YearModal>\r\n      </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftSider","function createSketch(Obj, Sketch) {\r\n    const sketch = new Sketch({\r\n        view: Obj.view,\r\n        layer: Obj.graphicsLayer2\r\n    });\r\n    sketch.on(\"create\", (event) => {\r\n        // check if the create event's state has changed to complete indicating\r\n        // the graphic create operation is completed.\r\n        Obj.setState({ rightDrawShow: true });\r\n        const selectedBoundary = [];\r\n        const selectedEvents = [];\r\n        if (event.state === \"complete\") {\r\n            Obj.selectGrphics = [];\r\n            let query = Obj.baseBoundaryFeatureLayer.createQuery();\r\n            Obj.selectGrphics.push(event.graphic);\r\n            query.geometry = event.graphic.geometry;\r\n            query.spatialRelationship = \"intersects\";\r\n            Obj.baseBoundaryFeatureLayer.queryFeatures(query).then(function (results) {\r\n                // prints an array of all the features in the service to the console\r\n                if (Obj.boundaryhighlight) {\r\n                    Obj.boundaryhighlight.remove();\r\n                }\r\n                Obj.boundaryhighlight = Obj.featureLayerView.highlight(results.features);\r\n                if (results.features.length) {\r\n                    for (let feature of results.features) {\r\n                        selectedBoundary.push(feature);\r\n                    }\r\n                    Obj.setState({ selectedBoundary });\r\n                }\r\n            });\r\n            query = Obj.baseEventFeatureLayer.createQuery();\r\n            Obj.selectGrphics.push(event.graphic);\r\n            query.geometry = event.graphic.geometry;\r\n            query.spatialRelationship = \"intersects\";\r\n            Obj.baseEventFeatureLayer.queryFeatures(query).then(function (results) {\r\n                // prints an array of all the features in the service to the console\r\n                if (Obj.eventHightLight) {\r\n                    Obj.eventHightLight.remove();\r\n                }\r\n                Obj.eventHightLight = Obj.featureLayerView.highlight(results.features);\r\n                if (results.features.length) {\r\n                    for (let feature of results.features) {\r\n                        selectedEvents.push(feature);\r\n                    }\r\n                    Obj.setState({ selectedEvents });\r\n                }\r\n            });\r\n        }\r\n    });\r\n    sketch.on(\"update\", (event) => {\r\n        // check if the create event's state has changed to complete indicating\r\n        // the graphic create operation is completed.\r\n        Obj.setState({ rightDrawShow: true });\r\n    });\r\n    return sketch;\r\n}\r\n\r\nexport { createSketch };\r\n","export const renderer = {\r\n    type: \"unique-value\",  // autocasts as new UniqueValueRenderer()\r\n    field: \"China\",\r\n    defaultSymbol: { type: \"simple-fill\" },  // autocasts as new SimpleFillSymbol()\r\n    uniqueValueInfos: [{\r\n        // All features with value of \"North\" will be blue\r\n        value: '0',\r\n        symbol: {\r\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\r\n            color: [51, 51, 204, 0.5],\r\n            outline: {  // autocasts as new SimpleLineSymbol()\r\n                color: [220, 220, 220, 0.5],\r\n                width: \"0.5px\"\r\n            }\r\n        }\r\n    }, {\r\n        // All features with value of \"East\" will be green\r\n        value: '1',\r\n        symbol: {\r\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\r\n            color: [151, 51, 204, 0.5],\r\n            outline: {  // autocasts as new SimpleLineSymbol()\r\n                color: [220, 220, 220, 0.5],\r\n                width: \"0.5px\"\r\n            }\r\n        }\r\n    }, {\r\n        // All features with value of \"South\" will be red\r\n        value: '2',\r\n        symbol: {\r\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\r\n            color: [51, 51, 44, 0.5],\r\n            outline: {  // autocasts as new SimpleLineSymbol()\r\n                color: [220, 220, 220, 0.5],\r\n                width: \"0.5px\"\r\n            }\r\n        }\r\n    }, {\r\n        // All features with value of \"West\" will be yellow\r\n        value: '3',\r\n        symbol: {\r\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\r\n            color: [251, 51, 204, 0.5],\r\n            outline: {  // autocasts as new SimpleLineSymbol()\r\n                color: [220, 220, 220, 0.5],\r\n                width: \"0.5px\"\r\n            }\r\n        }\r\n    }]\r\n};\r\n\r\nexport const heatMapRenderer = {\r\n    type: \"heatmap\",\r\n    colorStops: [\r\n        { color: \"rgba(63, 40, 102, 0)\", ratio: 0 },\r\n        { color: \"#472b77\", ratio: 0.083 },\r\n        { color: \"#4e2d87\", ratio: 0.166 },\r\n        { color: \"#563098\", ratio: 0.249 },\r\n        { color: \"#5d32a8\", ratio: 0.332 },\r\n        { color: \"#6735be\", ratio: 0.415 },\r\n        { color: \"#7139d4\", ratio: 0.498 },\r\n        { color: \"#7b3ce9\", ratio: 0.581 },\r\n        { color: \"#853fff\", ratio: 0.664 },\r\n        { color: \"#a46fbf\", ratio: 0.747 },\r\n        { color: \"#c29f80\", ratio: 0.83 },\r\n        { color: \"#e0cf40\", ratio: 0.913 },\r\n        { color: \"#ffff00\", ratio: 1 }\r\n    ],\r\n    maxPixelIntensity: 65,\r\n    minPixelIntensity: 0\r\n};\r\n\r\nconst textSymbol = {\r\n    type: \"text\", // autocasts as new TextSymbol()\r\n    color: \"#4e2d87\",\r\n    text: \"\\ue643\", // esri-icon-map-pin\r\n    font: {\r\n        // autocasts as new Font()\r\n        size: 22,\r\n        family: \"CalciteWebCoreIcons\", // Esri Icon Font\r\n        weight: 'lighter'\r\n    }\r\n};\r\n\r\nconst textPeopleSymbol = {\r\n    type: \"text\", // autocasts as new TextSymbol()\r\n    color: \"#c29f80\",\r\n    text: \"\\ue675\", // esri-icon-map-pin\r\n    font: {\r\n        // autocasts as new Font()\r\n        size: 22,\r\n        family: \"CalciteWebCoreIcons\", // Esri Icon Font\r\n        weight: 'lighter'\r\n    }\r\n};\r\n\r\nconst simpleMarker = {\r\n    type: \"simple-marker\", // autocasts as new SimpleMarkerSymbol()\r\n    size: 25,\r\n    color: [125, 255, 255],\r\n};\r\n\r\nexport const simpleMarkerRender = {\r\n    type: \"simple\", // autocasts as new SimpleRenderer()\r\n    symbol: textSymbol\r\n};\r\n\r\nexport const simplePeopleMarkerRender = {\r\n    type: \"simple\", // autocasts as new SimpleRenderer()\r\n    symbol: textPeopleSymbol\r\n};","export const Config = {\r\n    staticPath: 'http://tony-space.top:8007/',\r\n    gisRestServer: 'https://arcserver.tony-space.top:8001/arcgis/rest/services/',\r\n    dojoServer: \"http://tony-space.top:8007/arcgis_js_api/library/4.11/dojo/dojo.js\",\r\n    commentApi: \"http://tony-space.top:8007/api/esri-\"\r\n}","import { eventPopUpTemplate, peoplePopUpTemplate,boundaryPopUpTemplate } from \"./popUpTemplate\";\r\nimport { simpleMarkerRender, simplePeopleMarkerRender, renderer } from \"./renderer\";\r\nimport { labelingInfo } from './label';\r\nimport config from '../../../config';\r\n\r\nconst baseBoundaryFeatureUrl = config.gisRestServer + \"country_boundary/MapServer/\";\r\nconst baseEventFeatureUrl = config.gisRestServer + \"events_point/MapServer/\";\r\nconst basePeopleFeatureUrl = config.gisRestServer + \"experience/MapServer/0\";\r\n\r\nexport const boundaryLayerOption = {\r\n    url: baseBoundaryFeatureUrl + '69',\r\n    // id: '0',\r\n    visible: true,\r\n    popupTemplate: boundaryPopUpTemplate,\r\n    renderer,\r\n    labelingInfo\r\n};\r\nexport const eventLayerOption = {\r\n    url: baseEventFeatureUrl + '12',\r\n    //id: '4',\r\n    visible: true,\r\n    popupTemplate: eventPopUpTemplate,\r\n    renderer: simpleMarkerRender\r\n};\r\nexport const peopleLayerOption = {\r\n    url: basePeopleFeatureUrl,\r\n    visible: true,\r\n    renderer: simplePeopleMarkerRender,\r\n    popupTemplate: peoplePopUpTemplate,\r\n    definitionExpression: 'Sequence=0 and Dynasty_ID=12'\r\n};","export const eventPopUpTemplate = {\r\n    title:'事件信息',\r\n    content:[\r\n        {\r\n            type:'fields',\r\n            fieldInfos:[\r\n                {\r\n                    fieldName:'HName',\r\n                    label:'名称',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                },\r\n                {\r\n                    fieldName:'HCityName',\r\n                    label:'发生地',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                },\r\n                {\r\n                    fieldName:'Intro',\r\n                    label:'简介',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                },\r\n                {\r\n                    fieldName:'STime',\r\n                    label:'开始时间',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                },\r\n                {\r\n                    fieldName:'ETime',\r\n                    label:'结束时间',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n};\r\n\r\nexport const peoplePopUpTemplate = {\r\n    title:'人物经历',\r\n    content:[\r\n        {\r\n            type:'fields',\r\n            fieldInfos:[\r\n                {\r\n                    fieldName:'Poet',\r\n                    label:'姓名',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                },\r\n                {\r\n                    fieldName:'Year',\r\n                    label:'年份',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                },\r\n                {\r\n                    fieldName:'Place',\r\n                    label:'地点',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                },\r\n                {\r\n                    fieldName:'Content',\r\n                    label:'经历',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n};\r\n\r\nexport const boundaryPopUpTemplate = {\r\n    title:'国家信息',\r\n    content:[\r\n        {\r\n            type:'fields',\r\n            fieldInfos:[\r\n                {\r\n                    fieldName:'Name',\r\n                    label:'名称',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                },\r\n                {\r\n                    fieldName:'Area',\r\n                    label:'面积（km²）',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                },\r\n                {\r\n                    fieldName:'China',\r\n                    label:'是否属于中国',\r\n                    format:{\r\n                        places:0,\r\n                        digitSeparator:true\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n};\r\n","export const labelingInfo = [\r\n    {\r\n        // autocasts as new LabelClass()\r\n        symbol: {\r\n            type: \"text\",  // autocasts as new TextSymbol()\r\n            color: \"#555\",\r\n            haloColor: \"black\",\r\n            font: {  // autocast as new Font()\r\n                family: \"KaiTi\",\r\n                size: 18,\r\n            }\r\n        },\r\n        labelPlacement: \"above-center\",\r\n        labelExpressionInfo: {\r\n            expression: \"$feature.Name\"\r\n        }\r\n    }\r\n];\r\n","import React,{Component} from 'react'\r\nimport {Drawer} from 'antd'\r\nimport { DataAnalysis, EventDataAnalysis } from '../charts';\r\n\r\nexport class RightDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isOpen:false\r\n    }\r\n  }\r\n\r\n  render(){\r\n    //console.log(this.props.data)\r\n    return(\r\n      <Drawer\r\n      title={\"检索\"}\r\n      placement=\"right\"\r\n      closable={true}\r\n      visible={this.props.isShow}\r\n      mask={false}\r\n      style={{marginTop:'60px'}}\r\n      onClose={this.props.onClose}\r\n      >\r\n          <div style={{fontSize: 18}}>疆域</div><br/>\r\n          <DataAnalysis data={this.props.data}/>\r\n          {\r\n              this.props.data.selectedBoundary.map(i => {\r\n                  return (\r\n                      <div>\r\n                          名称：{i.attributes.Name} <br/>\r\n                          面积：{i.attributes.Area} <br/>\r\n                          <hr/>\r\n                      </div>\r\n                  )\r\n              })\r\n          }\r\n          <div style={{fontSize: 18}}>事件</div><br/>\r\n          <EventDataAnalysis data={this.props.data}/>\r\n          {\r\n              this.props.data.selectedEvents.map(i => {\r\n                  return (\r\n                      <div onMouseOver={() => { this.props.onHoverResult(i.geometry, i.attributes.HName, i.attributes.Intro) }}>\r\n                          名称：{i.attributes.HName} <br/>\r\n                          城市：{i.attributes.HCityName.trim() ? i.attributes.HCityName : '无城市信息'} <br/>\r\n                          <hr/>\r\n                      </div>\r\n                  )\r\n              })\r\n          }\r\n      </Drawer>\r\n  )}\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Button,Timeline, Empty, Icon,message,Slider } from 'antd';\r\nimport EsriLoader from 'esri-loader'\r\nimport s from './mainBox.less';\r\nimport { createSketch, heatMapRenderer, simpleMarkerRender, simplePeopleMarkerRender, boundaryLayerOption, eventLayerOption, peopleLayerOption } from './utils';\r\nimport Search from '../Search';\r\nimport config from '../../config';\r\nimport { searchKey, searchName } from './utils/timeMap';\r\nimport { RightDrawer } from '../Drawer/Common';\r\n\r\nconst ButtonGroup = Button.Group;\r\nconst BOUNDARY_LAYER_NUM = 121;\r\n\r\nclass MainBox extends Component {\r\n  constructor() {\r\n    super()\r\n    this.dojoUrl = config.dojoServer;\r\n    this.tileMapUrl = \"http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineCommunity/MapServer\"\r\n    this.baseBoundaryFeatureUrl = config.gisRestServer + \"country_boundary/MapServer/\";\r\n    this.baseEventFeatureUrl = config.gisRestServer + \"events_point/MapServer\";\r\n    this.basePeopleFeatureUrl = config.gisRestServer + \"experience/MapServer/\";\r\n    this.state = {\r\n      isPlay: false,\r\n      playControllerText: '播放边界变化',\r\n      sliderValue: 0,\r\n      selectedBoundary: [],\r\n      rightDrawShow: false,\r\n      showYearModal: false,\r\n      showBoundary: true,\r\n      selectedEvents: [],\r\n      showTraj: 0,\r\n      bntLabel: '显示轨迹',\r\n      speedChange: false,\r\n      speed: 100,\r\n      expIdx: -1,\r\n      showExp: false,\r\n    }\r\n    this.playTimer = null;\r\n    this.stopUpdate = true;\r\n    this.selectGrphics = [];\r\n    this.changeBaseMap = () => { };\r\n\r\n  }\r\n  componentWillMount() {\r\n    this.initMap()\r\n  }\r\n  handleMouseOverSearchResult(mapPoint, name, content, e) {\r\n    this.view && this.view.popup.open({\r\n      // Set the popup's title to the coordinates of the location\r\n      title: name,\r\n      content,\r\n      location: mapPoint, // Set the location of the popup to the clicked location\r\n    });\r\n  }\r\n  onSearchSelect(action) {\r\n    console.log('action', action);\r\n    switch (action.type) {\r\n      case 0: this.props.onSelectDynasty(action.payload); break;\r\n      case 1: this.props.onSelectChar(action.payload); break;\r\n      case 2: this.props.onSelectEvent(action.payload); break;\r\n      case 3: this.props.onSelectYear(action.payload); break;\r\n    }\r\n  }\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.currentYear !== this.props.currentYear ||\r\n      prevProps.trigger.eventHeatmap !== this.props.trigger.eventHeatmap ||\r\n      prevProps.trigger.heatmap !== this.props.trigger.heatmap) this.changeBoundaryLayer.call(this, this.props.currentYear);\r\n    if (prevProps.currentTileMap !== this.props.currentTileMap) {\r\n      console.log(this.props.currentTileMap)\r\n      this.changeBaseMap(this.props.currentTileMap);\r\n    }\r\n    if (prevState.selectedBoundary !== this.state.selectedBoundary) {\r\n\r\n      this.setState({ rightDrawShow: true });\r\n    }\r\n    // trigger start\r\n    if (this.sketch) {\r\n      if (!this.props.trigger.toolbar) {\r\n        this.view.ui.remove(this.sketch);\r\n      } else {\r\n        this.view.ui.add(this.sketch, 'top-left');\r\n      }\r\n    }\r\n\r\n    // trigger end\r\n    //人物点显示\r\n    this.trajCtrl(prevProps.currentChar);\r\n    this.basePeopleFeatureLayer && (this.basePeopleFeatureLayer.visible = this.props.trigger.showChar);\r\n    //\r\n    if(this.baseBoundaryFeatureLayer){\r\n      if(!this.props.trigger.showOther) this.baseBoundaryFeatureLayer.definitionExpression = `China>0`\r\n      else this.baseBoundaryFeatureLayer.definitionExpression = undefined\r\n    }\r\n    //事件点显示\r\n    //console.log(this.props.trigger)\r\n    if(this.baseEventFeatureLayer){\r\n      this.baseEventFeatureLayer.visible = this.props.trigger.showEvent\r\n      if(prevProps.currentEvent !== this.props.currentEvent && this.props.currentEvent!==null){\r\n        this.view.whenLayerView(this.baseEventFeatureLayer).then((layerView) => {\r\n          let query = this.baseEventFeatureLayer.createQuery();\r\n          query.where = 'FID=' + this.props.currentEvent\r\n          this.baseEventFeatureLayer.queryFeatures(query).then((result) => {\r\n            let feature = result.features[0]\r\n            this.view.goTo({center:feature.geometry,zoom:7},{duration:1000,easing:'in-out-expo'})\r\n            let highlight = layerView.highlight(feature)\r\n            setTimeout(() => {\r\n              highlight.remove()\r\n            },1000)\r\n          })\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  trajCtrl(prevChar) {\r\n    if (!this.props.trigger.showChar) {\r\n      if (this.t) {\r\n        clearInterval(this.t)\r\n        this.t = null\r\n      }\r\n      if (this.state.showTraj > 0) this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n      if (this.graphic) this.graphic.geometry = undefined\r\n      if (this.polyline) this.polyline.paths = []\r\n      return\r\n    }\r\n    if (prevChar >= 0 && this.props.currentChar === undefined) {\r\n      if (this.t) {\r\n        clearInterval(this.t)\r\n        this.t = null\r\n      }\r\n      if (this.state.showTraj > 0) this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n      if (this.graphic) this.graphic.geometry = undefined\r\n      if (this.polyline) this.polyline.paths = []\r\n      if (this.basePeopleFeatureLayer) this.basePeopleFeatureLayer.definitionExpression = `Sequence=0 and Dynasty='${this.props.currentDynasty}'`\r\n    }else if(prevChar >= 0 && this.props.currentChar >= 0 && prevChar!==this.props.currentChar){\r\n        if (this.t) {\r\n          clearInterval(this.t)\r\n          this.t = null\r\n        }\r\n        if (this.state.showTraj > 0) this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n        if (this.graphic) this.graphic.geometry = undefined\r\n        if (this.polyline) this.polyline.paths = []\r\n        if (this.view) this.loadingPath()\r\n        if (this.basePeopleFeatureLayer) this.basePeopleFeatureLayer.definitionExpression = 'Poet_ID=' + this.props.currentChar\r\n     }else if (prevChar || this.props.currentChar) {\r\n      if (this.basePeopleFeatureLayer && prevChar !== this.props.currentChar) this.basePeopleFeatureLayer.definitionExpression = 'Poet_ID=' + this.props.currentChar\r\n      if (this.state.showTraj === 0) {\r\n        //console.log('loading...')\r\n        if (this.t) {\r\n          clearInterval(this.t)\r\n          this.t = null\r\n        }\r\n\r\n        if (this.polyline) this.polyline.paths = []\r\n        if (this.view) this.loadingPath()\r\n      } else if (this.state.showTraj % 2 !== 0) {\r\n        //console.log('showing trajectory...')\r\n        if (this.state.speedChange) {\r\n          if (this.t) {\r\n            clearInterval(this.t)\r\n            this.t = null\r\n          }\r\n        }\r\n        if (this.traj && this.traj.length > 0) {\r\n          if (!this.t) {\r\n            this.play()\r\n          }\r\n        }\r\n      } else {\r\n        //console.log('pausing...')\r\n        if (this.t) {\r\n          clearInterval(this.t)\r\n          this.t = null\r\n        }\r\n      }\r\n    } else {\r\n      if (this.basePeopleFeatureLayer) this.basePeopleFeatureLayer.definitionExpression = `Sequence=0 and Dynasty='${this.props.currentDynasty}'`\r\n    }\r\n  }\r\n\r\n\r\n  play() {\r\n    //if(this.state.showTraj===1)this.view.goTo({center:this.traj[0],zoom:5},{duration:500,easing:'in-out-expo'})\r\n    this.t = setInterval(() => {\r\n      if (this.traj.length > 0) {\r\n        let tmp = this.traj.shift()\r\n        //console.log(tmp)\r\n        this.props.trigger.track && this.view.goTo({center:tmp,zoom:6},{duration:1000,easing:'in-out-expo'})\r\n        this.polyline.paths.push(tmp)\r\n        this.graphic.geometry = this.polyline\r\n        let manifestIdx = this.nodeIdx.shift()\r\n        if (this.polyline.paths.length === manifestIdx) {\r\n\r\n          this.view.whenLayerView(this.basePeopleFeatureLayer).then((layerView) => {\r\n            let query = this.basePeopleFeatureLayer.createQuery();\r\n            query.where = 'Poet_ID=' + this.props.currentChar\r\n            this.basePeopleFeatureLayer.queryFeatures(query).then((result) => {\r\n              //this.basePeopleFeatureLayer.definitionExpression = 'Poet_ID='+this.props.currentChar+' and Sequence<='+(result.features.length-this.nodeIdx.length-1)\r\n              this.setState({ expIdx: this.state.expIdx + 1 }, () => { })\r\n              let feature = result.features[result.features.length - this.nodeIdx.length - 1]\r\n              let highlight = layerView.highlight(feature)\r\n              setTimeout(() => {\r\n                highlight.remove()\r\n              },700)\r\n            })\r\n          });\r\n        } else {\r\n          this.nodeIdx.unshift(manifestIdx)\r\n        }\r\n      } else {\r\n        clearInterval(this.t)\r\n        this.t = null\r\n        this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n        setTimeout(() => {\r\n          this.setState({ expIdx: -1 })\r\n        }, 1000)\r\n      }\r\n    }, this.state.speed);\r\n\r\n  }\r\n\r\n  loadingPath() {\r\n    this.view.whenLayerView(this.basePeopleFeatureLayer).then(() => {\r\n      let queryChar = this.basePeopleFeatureLayer.createQuery();\r\n      queryChar.where = \"Poet_ID=\" + this.props.currentChar\r\n      this.basePeopleFeatureLayer.queryFeatures(queryChar).then((result) => {\r\n        let feature = result.features\r\n        this.traj = []\r\n        this.cnt = 0\r\n        this.nodeIdx = [1]\r\n        for (let i = 0; i < feature.length - 1; i++) {\r\n          this.traj.push.apply(this.traj, this.interpolation(feature[i].geometry, feature[i + 1].geometry, i % 2 === 0 ? 1 : -1))\r\n          this.nodeIdx.push(this.cnt)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  interpolation(pointA, pointB, inverse) {\r\n    //calculate center\r\n    let angle = (Math.PI / 6 + Math.round(Math.random()) / 5)\r\n    let pointC = { x: 0, y: 0 }\r\n    if (pointA.x === pointB.x) {\r\n      pointC.x = pointA.x + Math.abs(pointB.y - pointA.y) / 2 * Math.tan(angle)\r\n      pointC.y = pointA.y\r\n    } else {\r\n      let k = -(pointB.x - pointA.x) / (pointB.y - pointA.y)\r\n      let x0 = (pointA.x + pointB.x) / 2\r\n      let y0 = (pointA.y + pointB.y) / 2\r\n      let dist = inverse * Math.sqrt((pointA.x - pointB.x) * (pointA.x - pointB.x) + (pointA.y - pointB.y) * (pointA.y - pointB.y)) / 2 * Math.tan(angle)\r\n      pointC.x = x0 + dist * Math.sqrt(1 / (1 + k * k))\r\n      pointC.y = y0 + dist * Math.sqrt(1 / (1 + k * k)) * k\r\n    }\r\n    let t = 0\r\n    let incre = 0.1 / Math.sqrt((pointA.x - pointB.x) * (pointA.x - pointB.x) + (pointA.y - pointB.y) * (pointA.y - pointB.y))\r\n    let pnt = { x: 0, y: 0 }, tmpPnt1 = { x: 0, y: 0 }, tmpPnt2 = { x: 0, y: 0 }\r\n    let pntSet = []\r\n    while (t <= 1) {\r\n      tmpPnt1.x = (1 - t) * pointA.x + t * pointC.x\r\n      tmpPnt1.y = (1 - t) * pointA.y + t * pointC.y\r\n      tmpPnt2.x = (1 - t) * pointC.x + t * pointB.x\r\n      tmpPnt2.y = (1 - t) * pointC.y + t * pointB.y\r\n      pnt.x = (1 - t) * tmpPnt1.x + t * tmpPnt2.x\r\n      pnt.y = (1 - t) * tmpPnt1.y + t * tmpPnt2.y\r\n      pntSet.push([pnt.x, pnt.y])\r\n      this.cnt++\r\n      t += incre\r\n    }\r\n    pntSet.push([pointB.x, pointB.y])\r\n    this.cnt++\r\n    return pntSet\r\n  }\r\n\r\n  initMap() {\r\n    EsriLoader.loadModules([\r\n      \"esri/layers/GraphicsLayer\",\r\n      \"esri/widgets/Sketch\",\r\n      \"esri/Map\",\r\n      \"esri/Basemap\",\r\n      \"esri/layers/TileLayer\",\r\n      \"esri/views/MapView\",\r\n      \"esri/layers/FeatureLayer\",\r\n      'esri/Graphic',\r\n      'esri/widgets/Zoom',\r\n      \"esri/widgets/Compass\",\r\n      'esri/widgets/ScaleBar',\r\n      \"dojo/domReady!\"\r\n    ], this.dojoUrl).then(([GraphicsLayer, Sketch, Map, Basemap, TileLayer, MapView, FeatureLayer, Graphic, Zoom, Compass, ScaleBar]) => {\r\n      this.FeatureLayer = FeatureLayer;\r\n      this.Basemap = Basemap;\r\n      this.graphicsLayer2 = new GraphicsLayer();\r\n\r\n      this.baseBoundaryFeatureLayer = new FeatureLayer(boundaryLayerOption);\r\n      this.baseEventFeatureLayer = new FeatureLayer(eventLayerOption);\r\n      this.basePeopleFeatureLayer = new FeatureLayer(peopleLayerOption);\r\n\r\n      this.changeBaseMap = (tileMapUrl) => {\r\n        let tileLayer = new TileLayer({\r\n          url: tileMapUrl\r\n        });\r\n        let baseMap = new Basemap({\r\n          baseLayers: [tileLayer],\r\n          id: 'myBaseMap'\r\n        });\r\n        if (this.map) {\r\n          this.map.basemap = baseMap;\r\n        }\r\n      }\r\n\r\n      let tileLayer = new TileLayer({\r\n        url: this.tileMapUrl\r\n      });\r\n      let basemap = new Basemap({\r\n        baseLayers: [tileLayer],\r\n        id: 'myBaseMap'\r\n      });\r\n      this.map = new Map({\r\n        basemap,\r\n        layers: [\r\n          this.graphicsLayer2,\r\n          this.baseEventFeatureLayer,\r\n          this.basePeopleFeatureLayer,\r\n          this.baseBoundaryFeatureLayer,\r\n        ]\r\n      });\r\n      this.view = new MapView({\r\n        center: [115, 32.1],\r\n        map: this.map,\r\n        container: \"mapDiv\",\r\n        zoom: 5\r\n      });\r\n      this.view.whenLayerView(this.baseBoundaryFeatureLayer).then((layerView) => {\r\n        this.featureLayerView = layerView;\r\n      });\r\n      this.graphic = new Graphic()\r\n      let zoom = new Zoom({\r\n        view: this.view,\r\n        layout: 'horizontal'\r\n      })\r\n      let compass = new Compass({\r\n        view: this.view\r\n      });\r\n      let scaleBar = new ScaleBar({\r\n        view: this.view,\r\n        unit: 'metric'\r\n      })\r\n      this.sketch = createSketch(this, Sketch);\r\n      this.graphic.symbol = {\r\n        type: \"simple-line\",\r\n        color: [226, 119, 40],\r\n        width: 1.5\r\n      };\r\n      this.polyline = {\r\n        type: 'polyline',\r\n        paths: []\r\n      }\r\n      this.sketch = createSketch(this, Sketch);\r\n      this.view.graphics.add(this.graphic)\r\n      this.view.ui.padding = { top: 80, left: 30, right: 0, bottom: 0 };\r\n      this.view.ui.remove('zoom')\r\n      this.view.ui.add(zoom)\r\n      this.view.ui.add(compass)\r\n      this.view.ui.add(scaleBar, 'bottom-right');\r\n      //this.view.ui.add(this.sketch, \"top-left\");\r\n\r\n    })\r\n  }\r\n\r\n  changeBoundaryLayer(index) {\r\n    console.log('change layer')\r\n    if (!this.map || !this.FeatureLayer) {\r\n      return 0;\r\n    }\r\n    if (this.baseEventFeatureLayer) {\r\n      if (this.props.trigger.eventHeatmap) {\r\n        eventLayerOption.renderer = heatMapRenderer;\r\n      } else {\r\n        eventLayerOption.renderer = simpleMarkerRender;\r\n      }\r\n    }\r\n    if (this.basePeopleFeatureLayer) {\r\n      if (this.props.trigger.heatmap) {\r\n        peopleLayerOption.renderer = heatMapRenderer;\r\n      } else {\r\n        peopleLayerOption.renderer = simplePeopleMarkerRender;\r\n      }\r\n    }\r\n    boundaryLayerOption.url = boundaryLayerOption.url.split('/').slice(0, -1).join('/') + '/' + index;\r\n    this.baseBoundaryFeatureLayer = new this.FeatureLayer(boundaryLayerOption);\r\n    const eventLayerIndex = searchKey(index);\r\n    eventLayerOption.url = eventLayerOption.url.split('/').slice(0, -1).join('/') + '/' + eventLayerIndex;\r\n    //console.log(eventLayerOption,peopleLayerOption)\r\n    this.baseEventFeatureLayer = new this.FeatureLayer(eventLayerOption);\r\n    this.basePeopleFeatureLayer = new this.FeatureLayer(peopleLayerOption);\r\n\r\n    if (this.state.currentDynasty !== this.props.currentDynasty) { peopleLayerOption.definitionExpression = 'Sequence=0 and Dynasty_ID=' + String(this.props.currentDynasty) }\r\n    this.map.layers = [this.graphicsLayer2, this.baseEventFeatureLayer, this.basePeopleFeatureLayer,this.baseBoundaryFeatureLayer];\r\n  }\r\n\r\n  openYearModal() {\r\n    this.setState({ yearModal: true });\r\n  }\r\n\r\n  handleLayerPlay() {\r\n    this.stopUpdate = !this.stopUpdate\r\n    this.setState({ isPlay: !this.state.isPlay })\r\n\r\n    this.view.goTo({ center: [115, 32.1], zoom: 4 }, { duration: 1000, easing: 'in-out-expo' })\r\n    let i = this.props.currentYear\r\n    if (this.playTimer) {\r\n      clearInterval(this.playTimer);\r\n      this.playTimer = null;\r\n      this.setState({ playControllerText: '播放边界变化', isPlay: false })\r\n      return;\r\n    }\r\n    this.setState({ playControllerText: '\\u3000暂停播放\\u3000', isPlay: true })\r\n    this.playTimer = setInterval(() => {\r\n      if (i < BOUNDARY_LAYER_NUM) {\r\n        if (i) {\r\n          this.changeBoundaryLayer.call(this, i);\r\n        }\r\n        this.setState({ sliderValue: i });\r\n      }\r\n      else {\r\n        this.stopUpdate = !this.stopUpdate\r\n        this.setState({ isPlay: false })\r\n        this.changeBoundaryLayer.call(this, i);\r\n        clearInterval(this.playTimer);\r\n        this.playTimer = null;\r\n      }\r\n      i++;\r\n      return void 0;\r\n    }, 2000)\r\n  }\r\n\r\n  //人物开关\r\n  \r\n  //trajectory\r\n  handleShowPath() {\r\n    if(this.props.currentChar===null || this.props.currentChar===undefined) message.error('请选择人物',2);\r\n    this.setState({ showTraj: this.props.currentChar ? this.state.showTraj + 1 : 0, bntLabel: this.props.currentChar ? this.state.showTraj % 2 === 0 ? '暂\\u3000停\\u3000 ' : '继\\u3000续\\u3000 ' : '显示轨迹', speedChange: false })\r\n  }\r\n  handleSpeedChange(speed){\r\n    this.setState({ speed: (2.1-speed)*100, speedChange: true })\r\n  }\r\n  //\r\n  handleExpNav(idx) {\r\n    //console.log(idx)\r\n\r\n    this.view.whenLayerView(this.basePeopleFeatureLayer).then((layerView) => {\r\n      let query = this.basePeopleFeatureLayer.createQuery()\r\n      query.where = `Poet_ID=${this.props.currentChar} and Sequence=${idx}`\r\n      this.basePeopleFeatureLayer.queryFeatures(query).then((result) => {\r\n        let feature = result.features[0]\r\n        let highlight = layerView.highlight(feature)\r\n        setTimeout(() => {\r\n          highlight.remove()\r\n        }, 2000)\r\n        this.view.goTo({ center: feature.geometry, zoom: 6 }, { duration: 1000, easing: 'in-out-expo' })\r\n      })\r\n    })\r\n\r\n  }\r\n  render() {\r\n    //console.log(this.props.startAndEnd)\r\n    const speedMark = {\r\n      0:'Speed',\r\n      1:'×1',\r\n      2:'×2'\r\n    }\r\n    let timeline = (\r\n      <Timeline >\r\n        <div className={'charExp'}>人物经历</div>\r\n        {this.props.currentChar !== null ? this.props.experience.map((e, idx) => {\r\n          return (<Timeline.Item\r\n            onClick={this.handleExpNav.bind(this, idx)}\r\n            style={{ color: this.state.expIdx === idx ? 'deepskyblue' : '' }}\r\n            dot={idx === this.state.expIdx ? <Icon type=\"loading\" style={{ fontSize: '20px' }} /> : undefined} >\r\n            {e.Year + '年，' + e.Place + '，' + e.Content}</Timeline.Item>)\r\n        }) : <Empty description={'请选择人物'} />}\r\n      </Timeline>\r\n    )\r\n    return (\r\n      <>\r\n        <div id='mapDiv' style={{ height: '100%', width: '100%', padding: '5px' }}></div>\r\n\r\n        {this.props.trigger.showExp ? timeline : undefined}\r\n        <div className={s['traj_set']}>\r\n          <Button type={'primary'}  icon={this.state.showTraj%2===0?'caret-right':'loading'} onClick={this.handleShowPath.bind(this)}>{this.state.bntLabel}</Button>\r\n          <Slider included={false} marks={speedMark} tooltipPlacement={'bottom'} min={0} max={2} step={0.1} defaultValue={1} onAfterChange={this.handleSpeedChange.bind(this)}></Slider>\r\n        </div>\r\n        <div className={s['play_button']}>\r\n          <Button type={'primary'}  onClick={this.handleLayerPlay.bind(this)} icon={this.state.isPlay ? 'loading' : 'caret-right'}>\r\n            {this.state.playControllerText}\r\n          </Button>\r\n        </div>\r\n        <RightDrawer\r\n          isShow={this.state.rightDrawShow}\r\n          onClose={() => this.setState({ rightDrawShow: false })}\r\n          onHoverResult={this.handleMouseOverSearchResult.bind(this)}\r\n          data={{\r\n            years: this.props.years,\r\n            charProfiles: this.props.charProfiles,\r\n            events: this.props.events,\r\n            selectedBoundary: this.state.selectedBoundary,\r\n            selectedEvents: this.state.selectedEvents\r\n          }}\r\n        />\r\n        {\r\n          !this.state.rightDrawShow &&\r\n          <Button\r\n            style={{ position: 'absolute', right: 0, bottom: 3, height: '99%', width: 15, padding: 0 }}\r\n            onClick={() => this.setState({ rightDrawShow: true })}\r\n          >\r\n            &lt;\r\n        </Button>\r\n        }\r\n        <Search\r\n          year={this.props.years}\r\n          event={this.props.events}\r\n          people={this.props.charProfiles}\r\n          onSelect={this.onSearchSelect.bind(this)}\r\n        />\r\n        {/* <Slider\r\n          years={this.props.years}\r\n          value={this.state.sliderValue}\r\n          onChange={this.handleSliderChange.bind(this)}\r\n        /> */}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MainBox","import React from 'react';\r\nimport { Button, Comment, Form, Input } from 'antd';\r\nimport config from '../../config';\r\n\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst Editor = ({ onChange, onSubmit, submitting, value }) => (\r\n    <div>\r\n        <Form.Item>\r\n            <TextArea rows={4} onChange={onChange} value={value} />\r\n        </Form.Item>\r\n        <Form.Item>\r\n            <Button htmlType=\"submit\" loading={submitting} onClick={onSubmit} type=\"primary\">\r\n                添加评论\r\n      </Button>\r\n        </Form.Item>\r\n    </div>\r\n);\r\nexport class CustomComment extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            comments: [],\r\n            submitting: false,\r\n            value: ''\r\n        }\r\n    }\r\n\r\n    getComments() {\r\n        const url = config.commentApi + 'getcomments?id=' + this.props.id;\r\n        fetch(url).then((res) => {\r\n            return res.json()\r\n        }).then((json) => {\r\n            this.setState({ comments: json })\r\n        }).catch((e) => {\r\n            this.setState({ comments: [] })\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getComments();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.id !== prevProps.id) {\r\n            this.getComments();\r\n        }\r\n    }\r\n\r\n    onChange(e) {\r\n        const value = e.target.value;\r\n        this.setState({ value })\r\n    }\r\n\r\n    onSubmit() {\r\n        const comment = this.state.value;\r\n        const name = this.props.user ? this.props.user : 'anonymous'\r\n        const url = config.commentApi + `addcomments?id=${this.props.id}&name=${name}&content=${comment}`;\r\n        this.setState({ submitting: true });\r\n        fetch(url).then((res) => {\r\n            this.setState({ submitting: false })\r\n            this.getComments();\r\n        }, (e) => {\r\n            this.setState({ submitting: false })\r\n            this.getComments();\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"comments_container\" style={{boxShadow: '0px 0px 5px #e6e6e6', padding: 5 }}>\r\n                <div style={{fontSize: 18}}>评论</div>\r\n                {this.state.comments.map(i => {\r\n                    return (\r\n                        <Comment\r\n                            author={<a>{i.name}</a>}\r\n                            content={\r\n                                <p>\r\n                                    {i.content}\r\n                                </p>\r\n                            }\r\n                        />\r\n                    )\r\n                })}\r\n                <Comment\r\n                    content={\r\n                        <Editor\r\n                            onChange={this.onChange.bind(this)}\r\n                            value={this.state.value}\r\n                            submitting={this.state.submitting}\r\n                            onSubmit={this.onSubmit.bind(this)}\r\n                        />\r\n                    }\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}","import React,{Component} from 'react'\r\nimport {Drawer, Button,Empty} from 'antd'\r\nimport { CustomComment } from '../Comment';\r\n\r\nclass EventDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      visible:false\r\n    }\r\n  }\r\n\r\n  render(){\r\n    let content = (<div/>)\r\n    if(this.props.eventProfile){\r\n      let eventProfile = this.props.eventProfile\r\n      content = (\r\n        <div>\r\n          <p>{`事件名称：${eventProfile.HName}`}</p>\r\n          <p>{`发生地点：${eventProfile.HCityName}`}</p>\r\n          <p>{`起始时间：${eventProfile.STime}`}</p>\r\n          <p>{`结束时间：${eventProfile.ETime}`}</p>\r\n          <p>{`简介：`}</p>\r\n          <p style={{textIndent:'2em'}}>{eventProfile.Intro}</p>\r\n        </div>\r\n      )\r\n    }else{\r\n      content=(\r\n        <Empty description={'请选择事件'}/>\r\n      )\r\n    }\r\n    return(\r\n      <div>\r\n        <Button style={{position:'absolute',right:330,top:25}} type=\"primary\" onClick={()=>{this.setState({visible:!this.state.visible})}}>\r\n          事件简介\r\n        </Button>\r\n        <Drawer\r\n        title={\"事件简介\"}\r\n        placement=\"right\"\r\n        closable={false}\r\n        visible={this.state.visible}\r\n        mask={false}\r\n        style={{marginTop:'60px'}}\r\n        >\r\n          {content}\r\n          {\r\n            this.props.showComment &&\r\n            <CustomComment id={this.props.eventProfile ? this.props.eventProfile.HName : '-1'} />\r\n          }\r\n        </Drawer>\r\n      </div>\r\n  )}\r\n}\r\n\r\nexport default EventDrawer","import React, { Component } from 'react'\r\nimport { CustomComment } from '../Comment';\r\nimport { Drawer, Button, Empty } from 'antd'\r\n\r\nclass CharDrawer extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      visible: false\r\n    }\r\n    this.iconURL = 'icon/'\r\n  }\r\n\r\n  render() {\r\n    let content = (<div />)\r\n\r\n    if (this.props.charProfile) {\r\n      let charProfile = this.props.charProfile\r\n      //let icon=require(this.iconURL+charProfile.FID+'.jpg')\r\n      content = (\r\n        <div>\r\n          <div style={{ align: 'center', textAlign: 'center' }}>\r\n            <img src={[this.iconURL + charProfile.FID + '.jpg']} height={200} width={200} />\r\n          </div>\r\n          <hr />\r\n          <p>{`姓名：${charProfile.Name}`}</p>\r\n          <p>{`字：${charProfile.zi}`}</p>\r\n          <p>{`号：${charProfile.hao}`}</p>\r\n          <p>{`生年：${charProfile.STime}`}</p>\r\n          <p>{`卒年：${charProfile.ETime}`}</p>\r\n          <p>{`出生地：${charProfile.Home}`}</p>\r\n          <p>{`简介：`}</p>\r\n          <p style={{ textIndent: '2em' }}>{charProfile.Intro}</p>\r\n        </div>\r\n      )\r\n    } else {\r\n      content = (\r\n        <Empty description={'请选择人物'} />\r\n      )\r\n    }\r\n    return (\r\n      <div>\r\n        <Button style={{ position: 'absolute', right: 430, top: 25 }} type=\"primary\" onClick={() => { this.setState({ visible: !this.state.visible }) }}>\r\n          人物简介\r\n        </Button>\r\n        <Drawer\r\n          title={\"人物简介\"}\r\n          placement=\"right\"\r\n          closable={false}\r\n          visible={this.state.visible}\r\n          mask={false}\r\n          style={{ marginTop: '60px' }}\r\n        >\r\n          {content}\r\n          {\r\n            this.props.showComment &&\r\n            <CustomComment id={this.props.charProfile ? this.props.charProfile.Name : '1'} />\r\n          }\r\n        </Drawer>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CharDrawer","import { Drawer, Button } from 'antd';\r\nimport React from 'react';\r\nimport s from './index.less';\r\n\r\nexport class ToolBox extends React.Component {\r\n  state = { visible: false, placement: 'left' };\r\n\r\n  showDrawer = () => {\r\n    this.setState({\r\n      visible: true,\r\n    });\r\n  };\r\n\r\n  onClose = () => {\r\n    this.setState({\r\n      visible: false,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        style={{\r\n          overflow: 'hidden',\r\n          position: 'absolute',\r\n          width: 20,\r\n          height: \"100%\"\r\n        }}\r\n      >\r\n        <Button className={s.toolbox_button} onMouseEnter={this.showDrawer}>\r\n          &gt;\r\n        </Button>\r\n        <Drawer\r\n          title=\"工具箱\"\r\n          placement=\"left\"\r\n          closable={true}\r\n          onClose={this.onClose}\r\n          visible={this.state.visible}\r\n          mask={false}\r\n          onMouseLeave={this.onClose}\r\n          getContainer={false}\r\n          style={{height: 'calc(100% - 64px)', top: 64}}\r\n        >\r\n          {this.props.children}\r\n        </Drawer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport Header from './compnents/Header/Header'\r\nimport LeftSider from './compnents/LeftSider/LeftSider'\r\nimport MainBox from './compnents/MainBox/MainBox'\r\nimport EventDrawer from './compnents/Drawer/EventDrawer'\r\nimport { Layout, Switch,Divider } from 'antd';\r\nimport './App.css';\r\nimport CharDrawer from './compnents/Drawer/CharDrawer';\r\nimport Config from './config';\r\nimport { ToolBox } from './compnents/ToolBox';\r\n\r\nconst staticPath = Config.staticPath;\r\n\r\nconst tilesMap = {\r\n  'http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer': 'Warm',\r\n  'http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer': 'PurplishBlue',\r\n  'http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineCommunity/MapServer': 'Community',\r\n  'https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer': 'Satellite',\r\n  \r\n};\r\n\r\n\r\nconst { Content } = Layout\r\nclass App extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      charProfiles: [],\r\n      years: [],\r\n      events: [],\r\n      experience: [],\r\n      yearArea: [],\r\n      Trigger: {\r\n        heatmap: false,\r\n        eventHeatmap: false,\r\n        toolbar: false,\r\n        comment: true,\r\n        showChar: true,\r\n        showEvent:true,\r\n        showExp: false,\r\n        showOther: true,\r\n        track: false\r\n      },\r\n      currentYear: 69,\r\n      currentTileMap: 'topo',\r\n      currentChar: null,\r\n      currentDynasty: \"唐\",\r\n      currentEvent: null,\r\n    }\r\n  }\r\n\r\n  onSelectYear(id) {\r\n    this.setState({ currentYear: id });\r\n  }\r\n\r\n  onSelectTileMap(currentTileMap) {\r\n    this.setState({ currentTileMap })\r\n  }\r\n\r\n  onSelectDynasty(dynasty) {\r\n    this.setState({ currentDynasty: dynasty })\r\n  }\r\n\r\n  processYearArea(data) {\r\n    const result = [];\r\n    Object.keys(data).forEach(d => {\r\n      Object.keys(data[d][0]).forEach(d1 => {\r\n        result.push([\r\n          d + ' ' + d1,\r\n          data[d][0][d1]\r\n        ])\r\n      })\r\n    });\r\n    return result;\r\n  }\r\n\r\n  processYear(data) {\r\n    let idx = 0;\r\n    Object.keys(data).forEach(d => {\r\n      data[d].forEach((item, index) => {\r\n        data[d][index] = {\r\n          Year: data[d][index] + '年',\r\n          idx\r\n        }\r\n        idx++;\r\n      });\r\n    });\r\n    return data;\r\n  }\r\n  //handle character selection\r\n  onSelectChar(charFID) {\r\n    this.setState({ currentChar: charFID })\r\n\r\n  }\r\n\r\n  onSelectEvent(eventFID) {\r\n    this.setState({ currentEvent: eventFID })\r\n  }\r\n\r\n  componentDidMount() {\r\n    const yearData = fetch(staticPath + 'json/year.json').then(res => res.json())\r\n    const profileData = fetch(staticPath + 'json/profile.json').then(res => res.json())\r\n    const eventData = fetch(staticPath + 'json/event.json').then(res => res.json())\r\n    const experienceData = fetch(staticPath + 'json/experience.json').then(res => res.json())\r\n    const yearArea = fetch(staticPath + 'json/area.json').then(res => res.json())\r\n    Promise.all([yearData, profileData, eventData, experienceData, yearArea]).then((dataList) => {\r\n      console.log(dataList)\r\n      this.setState({\r\n        years: this.processYear(dataList[0]),\r\n        charProfiles: dataList[1],\r\n        events: dataList[2],\r\n        experience: dataList[3],\r\n        yearArea: this.processYearArea(dataList[4])\r\n      })\r\n    }).catch((err) => {\r\n      console.error(err);\r\n    })\r\n  }\r\n\r\n  render() {\r\n    //console.log(this);\r\n    let experience = []\r\n    let trash = null\r\n    if (this.state.experience && this.state.currentChar !== null) {\r\n      [].concat(...Object.values(this.state.experience)).map((e) => { e[\"Poet ID\"] === String(this.state.currentChar) ? experience.push(e) : trash = undefined })\r\n    }\r\n    return (\r\n      <div className=\"App\">\r\n        <Header />\r\n        <LeftSider\r\n          years={this.state.years}\r\n          charProfiles={this.state.charProfiles}\r\n          events={this.state.events}\r\n          yearArea={this.state.yearArea}\r\n          tilesMap={tilesMap}\r\n          handleTileSelect={this.onSelectTileMap.bind(this)}\r\n          currentTile={this.state.currentTileMap}\r\n          onSelectYear={this.onSelectYear.bind(this)}\r\n          onSelectDynasty={this.onSelectDynasty.bind(this)}\r\n          onSelectChar={this.onSelectChar.bind(this)}\r\n          onSelectEvent={this.onSelectEvent.bind(this)}\r\n        />\r\n        <Layout style={{ position: 'relative', height: 'calc(100% - 60px)' }}>\r\n          <Content style={{ position: 'relative' }}>\r\n            <MainBox\r\n              years={this.state.years}\r\n              charProfiles={this.state.charProfiles}\r\n              events={this.state.events}\r\n              yearArea={this.state.yearArea}\r\n              onSelectYear={this.onSelectYear.bind(this)}\r\n              onSelectDynasty={this.onSelectDynasty.bind(this)}\r\n              onSelectChar={this.onSelectChar.bind(this)}\r\n              onSelectEvent={this.onSelectEvent.bind(this)}\r\n              currentYear={this.state.currentYear}\r\n              currentTileMap={this.state.currentTileMap}\r\n              trigger={this.state.Trigger}\r\n              currentEvent={this.state.currentEvent}\r\n              currentDynasty={this.state.currentDynasty}\r\n              currentChar={this.state.currentChar}\r\n              experience={experience}\r\n            />\r\n          </Content>\r\n          <ToolBox>\r\n            <div className=\"toolbox_item\">\r\n              <span>{' '}</span>\r\n            </div>\r\n            <div className=\"toolbox_item\">\r\n              <span>人物人生轨迹面板</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ showExp: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\r\n            </div>\r\n            <Divider />\r\n            <div className=\"toolbox_item\">\r\n              <span>显示其他国家</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ showOther: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked/>\r\n            </div>\r\n            <Divider />\r\n            <div className=\"toolbox_item\">\r\n              <span>显示人物</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ showChar: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked />\r\n            </div>\r\n            <Divider />\r\n            <div className=\"toolbox_item\">\r\n              <span>显示事件</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ showEvent: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked />\r\n            </div>\r\n            <Divider />\r\n            <div className=\"toolbox_item\">\r\n              <span>历史人物分布热力图</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ heatmap: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\r\n            </div>\r\n            <Divider />\r\n            <div className=\"toolbox_item\">\r\n              <span>历史事件分布热力图</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ eventHeatmap: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\r\n            </div>\r\n            <Divider />\r\n            <div className=\"toolbox_item\">\r\n              <span>工具栏</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ toolbar: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\r\n            </div>\r\n            <Divider />\r\n            <div className=\"toolbox_item\">\r\n              <span>轨迹跟踪</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ track: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\r\n            </div>\r\n            <Divider />\r\n            <div className=\"toolbox_item\">\r\n              <span>开启评论</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ comment: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked />\r\n            </div>\r\n          </ToolBox>\r\n          <EventDrawer showComment={this.state.Trigger.comment} eventProfile={this.state.events && this.state.currentEvent !== null ? [].concat(...this.state.events[this.state.currentDynasty])[this.state.currentEvent] : undefined} />\r\n          <CharDrawer showComment={this.state.Trigger.comment} charProfile={this.state.charProfiles && this.state.currentChar !== null ? [].concat(...Object.values(this.state.charProfiles))[this.state.currentChar] : undefined} />\r\n        </Layout>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}