{"version":3,"sources":["compnents/LeftSider/LeftSider.less","compnents/MainBox/mainBox.less","compnents/charts/YearSelector.less","compnents/Search/Search.less","compnents/ToolBox/index.less","compnents/Header/Header.js","compnents/charts/YearSelector.js","compnents/charts/DataAnalysis.js","compnents/YearModal/YearModal.js","compnents/LeftSider/WikiMap.js","compnents/Search/Search.js","compnents/MainBox/utils/timeMap.js","compnents/LeftSider/LeftSider.js","compnents/MainBox/utils/sketch.js","compnents/MainBox/utils/renderer.js","config/config.js","compnents/MainBox/utils/layerOptions.js","compnents/MainBox/utils/label.js","compnents/MainBox/utils/popUpTemplate.js","compnents/Drawer/Common.js","compnents/MainBox/MainBox.js","compnents/Comment/index.js","compnents/Drawer/EventDrawer.js","compnents/Drawer/CharDrawer.js","compnents/ToolBox/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","selectors","chartContainer","yearModal","play_button","traj_set","charts","searchWrapper","toolbox_button","Header","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","visible","setState","react_default","a","createElement","className","props","title","onClick","handleClickbout","bind","about","modal","aboutTitle","okText","footer","onCancel","handleCancel","Component","defaultProps","YearSelector","React","createRef","lineChartsInstance","option","data","_this2","echarts","init","current","setOption","tooltip","trigger","xAxis","map","item","yAxis","show","splitLine","interval","name","dataZoom","startValue","type","visualMap","top","right","series","areaStyle","on","e","index","dataIndex","console","log","length","renderChart","style","s","ref","creatChartOption","text","left","textStyle","color","formatter","min","max","inRange","colorLightness","radius","center","roseType","label","normal","labelLine","lineStyle","smooth","length2","itemStyle","shadowBlur","shadowColor","animationType","animationEasing","animationDelay","idx","Math","random","DataAnalysis","selectedBoundary","i","attributes","Name","value","parseInt","Area","height","createEventOption","xData","yData","axisPointer","grid","bottom","containLabel","axisTick","alignWithLabel","barWidth","EventDataAnalysis","_this3","_this4","result","selectedEvents","forEach","HCityName","entries","push","YearModal","_React$Component","apply","arguments","inherits","createClass","key","onOk","handleOk","centered","width","children","wikiMap","夏","商","周","春秋","战国","秦","汉","三国","晋","十六国","隋","唐","五代十国","宋","元","明","清","民国","中华人民共和国","Option","AutoComplete","OptGroup","Complete","_Component","dataSource","initData","includes","dy","split","onSelect","payload","evtOrPpl","actionType","endsWith","event","findIndex","HName","people","find","year","Year","exist","keys","y","c","indexOf","content","options","group","opt","auto_complete","dropdownClassName","dropdownMatchSelectWidth","dropdownStyle","size","placeholder","optionLabelProp","onSearch","handleSearch","input","suffix","icon","timeMap","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","Select","SubMenu","Menu","LeftSider","collapsed","yearLabel","undefined","showYearModal","showWiki","currentYear","currentPeople","currentEvent","eventFID","onSelectEvent","charFID","onSelectChar","dynasty","onSelectDynasty","onSelectYear","toString","tmp","handleYearSelect","wikiname","years","menu","maxHeight","overflowY","yearList","_loop","_Object$keys","_i","Item","events","es_select","showSearch","onChange","handleEventSelect","allowClear","concat","LeftSider_Option","FID","handlePeopleSelect","charProfiles","char","tiles","currentTile","tilesMap","tile","handleTileSelect","dropdown","overlay","es_button","join","YearSelector_YearSelector","handleBarClick","yearArea","openYearModal","YearModal_YearModal","src","seamless","frameborder","position","createSketch","Obj","Sketch","sketch","view","layer","graphicsLayer2","rightDrawShow","selectGrphics","query","baseBoundaryFeatureLayer","createQuery","graphic","geometry","spatialRelationship","queryFeatures","then","results","boundaryhighlight","remove","featureLayerView","highlight","features","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","feature","err","return","baseEventFeatureLayer","eventHightLight","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","heatMapRenderer","colorStops","ratio","maxPixelIntensity","minPixelIntensity","simpleMarkerRender","symbol","font","family","weight","simplePeopleMarkerRender","Config","staticPath","gisRestServer","dojoServer","commentApi","baseBoundaryFeatureUrl","config","baseEventFeatureUrl","basePeopleFeatureUrl","boundaryLayerOption","url","renderer","field","defaultSymbol","uniqueValueInfos","outline","labelingInfo","haloColor","labelPlacement","labelExpressionInfo","expression","eventLayerOption","popupTemplate","fieldInfos","fieldName","format","places","digitSeparator","peopleLayerOption","definitionExpression","RightDrawer","isOpen","drawer","placement","closable","isShow","mask","marginTop","onClose","fontSize","DataAnalysis_DataAnalysis","DataAnalysis_EventDataAnalysis","onMouseOver","onHoverResult","Intro","trim","ButtonGroup","Button","Group","MainBox","dojoUrl","tileMapUrl","isPlay","playControllerText","sliderValue","showBoundary","showChar","showEvent","showTraj","bntLabel","speedChange","speed","expIdx","showExp","playTimer","stopUpdate","changeBaseMap","initMap","mapPoint","popup","open","location","action","prevProps","prevState","eventHeatmap","heatmap","changeBoundaryLayer","currentTileMap","toolbar","ui","add","trajCtrl","currentChar","basePeopleFeatureLayer","showOther","prevChar","t","clearInterval","polyline","paths","currentDynasty","loadingPath","traj","play","setInterval","shift","track","goTo","zoom","duration","easing","manifestIdx","nodeIdx","whenLayerView","layerView","where","setTimeout","unshift","queryChar","cnt","interpolation","pointA","pointB","inverse","angle","PI","round","pointC","x","abs","tan","k","x0","y0","dist","sqrt","incre","pnt","tmpPnt1","tmpPnt2","pntSet","EsriLoader","loadModules","_ref","_ref2","slicedToArray","GraphicsLayer","Map","Basemap","TileLayer","MapView","FeatureLayer","Graphic","Zoom","Compass","ScaleBar","tileLayer","baseMap","baseLayers","id","basemap","layers","container","layout","compass","scaleBar","unit","graphics","padding","slice","eventLayerIndex","searchKey","String","_this5","message","error","_this6","_this7","timeline","es_timeline","experience","handleExpNav","dot","Place","Content","empty","description","Fragment","handleShowPath","handleSpeedDown","toFixed","handleSpeedUp","handleLayerPlay","Common_RightDrawer","handleMouseOverSearchResult","Search_Complete","onSearchSelect","TextArea","Input","Editor","onSubmit","submitting","es_form","rows","htmlType","loading","CustomComment","comments","fetch","res","json","catch","getComments","target","comment","user","boxShadow","es_comment","author","Comment_Editor","EventDrawer","eventProfile","STime","ETime","textIndent","showComment","Comment_CustomComment","CharDrawer","iconURL","charProfile","align","textAlign","zi","hao","Home","ToolBox","_getPrototypeOf2","_len","args","Array","_key","showDrawer","overflow","onMouseEnter","onMouseLeave","getContainer","http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer","http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer","http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineCommunity/MapServer","https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer","Layout","App","Trigger","d","d1","yearData","profileData","eventData","experienceData","Promise","all","dataList","processYear","processYearArea","_ref3","toConsumableArray","values","compnents_Header_Header","compnents_LeftSider_LeftSider","onSelectTileMap","compnents_MainBox_MainBox","ToolBox_ToolBox","es_switch","b","objectSpread","checkedChildren","unCheckedChildren","divider","defaultChecked","Drawer_EventDrawer","Drawer_CharDrawer","isLocalhost","Boolean","window","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","src_App_0","document","getElementById","URL","process","href","origin","addEventListener","response","contentType","headers","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.d1b4e1f6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectors\":\"iOiwMT-1TxxMLRgACDatD\",\"chartContainer\":\"_1b6gGgX2FWpShEK49xJe08\",\"yearModal\":\"_2LbZuV3XVAR4R6WKIkC_jX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"play_button\":\"_1A0Na77mvvdzir8BTaZ7Pe\",\"traj_set\":\"_2HdPtE-HXij_-jd6mw586p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"charts\":\"oEFAxP79VZEMLn9X4OCbh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchWrapper\":\"_5UDuQJuf1p8makYUDFNrA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbox_button\":\"WU8AGThvmAIisORzI8l_3\"};","import React,{Component} from 'react'\r\nimport { Modal } from 'antd'\r\nimport './Header.css'\r\nclass Header extends Component{\r\n    static defaultProps = {\r\n        title:'中国历史地理数据展示平台',\r\n        about:'关于我们',\r\n        aboutTitle:'ESRI DEMO-历史地理信息展示平台',\r\n\r\n    }\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            visible:false\r\n        }\r\n    }\r\n\r\n    handleClickbout(){\r\n        this.setState({\r\n            visible: true,\r\n      });\r\n    }\r\n    handleCancel(){\r\n        this.setState({\r\n            visible: false,\r\n      });\r\n    }\r\n    render(){\r\n        return(\r\n            <div className='header'>\r\n                <span className={'title'}>{this.props.title}</span>\r\n                <button className={'about'} onClick={this.handleClickbout.bind(this)}>{this.props.about}</button>\r\n                <Modal\r\n                    title={this.props.aboutTitle}\r\n                    visible={this.state.visible}\r\n                    okText={'确认'}\r\n                    footer={null}\r\n                    onCancel={this.handleCancel.bind(this)}\r\n              >\r\n                    <p>{'简介：该平台展示了唐朝不同年代的疆界范围、人物轨迹及历史事件，并支持查询搜索等功能。'}</p>\r\n                    <p>{'制作成员：侯骁谋 劳大钊 吴宇东 詹文'}</p>\r\n              </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Header","import React, { Component } from 'react';\nimport echarts from 'echarts/lib/echarts';\nimport 'echarts/lib/chart/line';\nimport 'echarts/lib/component/tooltip';\nimport 'echarts/lib/component/dataZoom';\nimport 'echarts/lib/component/title';\nimport s from './YearSelector.less';\n\nclass YearSelector extends Component {\n    constructor(props) {\n        super(props);\n        this.charts = React.createRef();\n        this.lineChartsInstance = null;\n        this.option = null;\n\n    }\n\n    renderChart(data) {\n        //console.log(data)\n        this.lineChartsInstance = echarts.init(this.charts.current);\n        this.lineChartsInstance.setOption(this.option = {\n            tooltip: {\n                trigger: 'axis'\n            },\n            xAxis: {\n                data: data.map(function (item) {\n                    return item[0];\n                })\n            },\n            yAxis: {\n                show: true,\n                splitLine: {\n                    show: false\n                },\n                interval: 500000000,\n                name: '面积'\n            },\n            dataZoom: [{\n                startValue: '2014-06-01'\n            }, {\n                type: 'inside'\n            }],\n            visualMap: {\n                top: 10,\n                right: 10,\n            },\n            series: {\n                name: '疆域面积',\n                type: 'line',\n                data: data.map(function (item) {\n                    return item[1] / 1.56; // 面积数据存在问题，暂时解决\n                }),\n                areaStyle: {}\n            }\n        },true);\n        this.lineChartsInstance.on('click', 'series', e => {\n            const index = e.dataIndex;\n            const name = e.name\n            console.log(e)\n            this.props.onClick(index,name);\n        });\n    }\n\n    componentDidMount() {\n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    componentDidUpdate() {\n        //console.log(this.renderChart)\n        \n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    render() {\n        return (\n            <div style={this.props.style} className={s.charts}>\n                <div  ref={this.charts}></div>\n            </div>\n        )\n    }\n}\n\nexport { YearSelector };","import React, { Component } from 'react';\nimport echarts from 'echarts/lib/echarts';\nimport 'echarts/lib/chart/pie';\nimport 'echarts/lib/chart/bar';\nimport 'echarts/lib/component/tooltip';\nimport 'echarts/lib/component/dataZoom';\nimport 'echarts/lib/component/title';\nimport { optionalCallExpression } from '@babel/types';\n\nconst creatChartOption = (data) => ({\n\n    title: {\n        text: '分布状况',\n        left: 'center',\n        textStyle: {\n            color: '#111'\n        }\n    },\n\n    tooltip: {\n        trigger: 'item',\n        formatter: \"{a} <br/>{b} : ({d}%)\"\n    },\n\n    visualMap: {\n        show: false,\n        min: 80,\n        max: 600,\n        inRange: {\n            colorLightness: [0, 1]\n        }\n    },\n    series: [\n        {\n            name: '比例',\n            type: 'pie',\n            radius: '55%',\n            center: ['50%', '50%'],\n            data,\n            roseType: 'radius',\n            label: {\n                normal: {\n                    textStyle: {\n                        color: 'rgba(255, 255, 255, 0.3)'\n                    }\n                }\n            },\n            labelLine: {\n                normal: {\n                    lineStyle: {\n                        color: 'rgba(255, 255, 255, 0.3)'\n                    },\n                    smooth: 0.2,\n                    length: 10,\n                    length2: 20\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#c23531',\n                    shadowBlur: 200,\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\n                }\n            },\n\n            animationType: 'scale',\n            animationEasing: 'elasticOut',\n            animationDelay: function (idx) {\n                return Math.random() * 200;\n            }\n        }\n    ]\n});\n\n\nclass DataAnalysis extends Component {\n    constructor(props) {\n        super(props);\n        this.charts = React.createRef();\n        this.lineChartsInstance = null;\n        this.option = creatChartOption(props.data);\n\n    }\n\n    renderChart(data) {\n        //console.log(data)\n        data = data.selectedBoundary.map(i => {\n            return {\n                name: i.attributes.Name,\n                value: parseInt(i.attributes.Area)\n            }\n        })\n        console.log(data);\n        this.lineChartsInstance = echarts.init(this.charts.current);\n        this.lineChartsInstance.setOption(creatChartOption(data), true);\n        this.lineChartsInstance.on('click', 'series', e => {\n            const index = e.dataIndex;\n            const name = e.name\n            console.log(e)\n            this.props.onClick(index, name);\n        });\n    }\n\n    componentDidMount() {\n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    componentDidUpdate() {\n        //console.log(this.renderChart)\n\n        if (this.props.data.selectedBoundary.length > 0) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    render() {\n        return (\n            <div style={{ height: 200 }}>\n                <div style={{ height: 200 }} ref={this.charts}></div>\n            </div>\n        )\n    }\n}\n\n\nconst createEventOption = (xData, yData) => {\n    const option = {\n\n        title: {\n            text: '统计',\n            left: 'center',\n            textStyle: {\n                color: '#111'\n            }\n        },\n        color: ['#3398DB'],\n        tooltip: {\n            trigger: 'axis',\n            axisPointer: {            // 坐标轴指示器，坐标轴触发有效\n                type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\n            }\n        },\n        grid: {\n            left: '3%',\n            right: '4%',\n            bottom: '3%',\n            containLabel: true\n        },\n        xAxis: [\n            {\n                type: 'category',\n                data: xData,\n                axisTick: {\n                    alignWithLabel: true\n                }\n            }\n        ],\n        yAxis: [\n            {\n                type: 'value'\n            }\n        ],\n        series: [\n            {\n                name: '数量',\n                type: 'bar',\n                barWidth: '70%',\n                data: yData\n            }\n        ]\n    };\n    return option;\n}\n\nclass EventDataAnalysis extends Component {\n    constructor(props) {\n        super(props);\n        this.charts = React.createRef();\n        this.lineChartsInstance = null;\n        this.option = createEventOption(props.data);\n\n    }\n\n    renderChart(data) {\n        //console.log(data)\n        const result = {};\n        data = data.selectedEvents.forEach(i => {\n            if (result[i.attributes.HCityName]) {\n                result[i.attributes.HCityName]++;\n            } else {\n                result[i.attributes.HCityName] = 1;\n            }\n        });\n        const xData = [];\n        const yData = [];\n        Object.entries(result).forEach(i => {\n            xData.push(i[0]);\n            yData.push(i[1]);\n        })\n        console.log(xData, yData);\n        this.lineChartsInstance = echarts.init(this.charts.current);\n        this.lineChartsInstance.setOption(createEventOption(xData, yData), true);\n        this.lineChartsInstance.on('click', 'series', e => {\n            const index = e.dataIndex;\n            const name = e.name\n            console.log(e)\n            this.props.onClick(index, name);\n        });\n    }\n\n    componentDidMount() {\n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    componentDidUpdate() {\n        //console.log(this.renderChart)\n\n        if (this.props.data.selectedBoundary.length > 0) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    render() {\n        return (\n            <div style={{ height: 200 }}>\n                <div style={{ height: 200 }} ref={this.charts}></div>\n            </div>\n        )\n    }\n}\n\n\nexport { DataAnalysis, EventDataAnalysis };","import { Modal } from 'antd';\nimport React from 'react';\n\nexport class YearModal extends React.Component {\n\n  render() {\n    return (\n      <div>\n        <Modal\n          title=\"Basic Modal\"\n          visible={this.props.visible}\n          onOk={this.props.handleOk}\n          onCancel={this.props.handleCancel}\n          centered\n          width={'80%'}\n        >\n          {this.props.children}\n        </Modal>\n      </div>\n    );\n  }\n}","export const wikiMap = {\n    '夏': '夏朝',\n    '商': '商朝',\n    '周': '周朝',\n    '春秋': '春秋',\n    '战国': '战国',\n    '秦': '秦朝',\n    '汉': '汉朝',\n    '三国': '三国/5428',\n    '晋': '晋朝',\n    '十六国': '十六国',\n    '隋': '隋朝',\n    '唐': '唐朝',\n    '五代十国': '五代十国',\n    '宋': '宋朝',\n    '元': '元朝',\n    '明': '明朝',\n    '清': '清朝',\n    '民国': '民国',\n    '中华人民共和国': '中华人民共和国'\n}","import React, { Component } from 'react';\nimport s from './Search.less';\nimport { Icon, Input, AutoComplete } from 'antd';\n\nconst { Option, OptGroup } = AutoComplete;\n\n\nexport class Complete extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dataSource: this.initData('')\n        }\n    }\n\n    onSelect(i) {\n        console.log(this.props)\n        if (i.includes(':')) {\n            const dy = i.split(': ')[0];\n            this.props.onSelect({\n                type: 0,\n                payload: dy\n            })\n            let evtOrPpl = i.split(': ')[1];\n            let actionType = evtOrPpl.endsWith('年') ? 3 : this.props.event[dy].findIndex(i => i.HName === evtOrPpl) !== -1 ? 2 : 1;\n            let payload = null;\n            if (actionType === 1) {\n                payload = this.props.people[dy].find(i => i.Name === evtOrPpl)['FID'];\n                this.props.onSelect({\n                    type: actionType,\n                    payload\n                })\n            } else if (actionType === 2) {\n                payload = this.props.event[dy].find(i => i.HName === evtOrPpl)['FID'];\n                console.log(this.props.event[dy].find(i => i.HName === evtOrPpl))\n                this.props.onSelect({\n                    type: actionType,\n                    payload\n                })\n            } else if (actionType === 3) {\n                payload = this.props.year[dy].find(i => i.Year === evtOrPpl)['idx'];\n                this.props.onSelect({\n                    type: actionType,\n                    payload\n                })\n            }\n        }\n    }\n\n    initData(value) {\n        if (!this.props.year) {\n            return null;\n        }\n        const year = [];\n        let exist = [];\n        Object.keys(this.props.year).forEach(y => {\n            this.props.year[y].forEach(c => {\n                if (exist.indexOf(y + ': ' + c.Year) === -1) {\n                    year.push({\n                        title: y,\n                        content: y + ': ' + c.Year\n                    })\n                    exist.push(y + ': ' + c.Year)\n                }\n            })\n        });\n        const event = [];\n        exist = [];\n        Object.keys(this.props.event).forEach(y => {\n            this.props.event[y].forEach(c => {\n                if (c.HName.includes(value)) {\n                    if (exist.indexOf(y + ': ' + c.HName) === -1) {\n                        event.push({\n                            title: y,\n                            content: y + ': ' + c.HName\n                        })\n                    }\n                }\n            })\n        });\n        const people = [];\n        exist = [];\n        Object.keys(this.props.people).forEach(y => {\n            this.props.people[y].forEach(c => {\n                if (c.Name.includes(value)) {\n                    if (exist.indexOf(y + ': ' + c.Name) === -1) {\n                        people.push({\n                            title: y,\n                            content: y + ': ' + c.Name\n                        })\n                    }\n                }\n            })\n        });\n        const dataSource = [\n            {\n                title: '年代',\n                children: year,\n            },\n            {\n                title: '事件',\n                children: event\n            },\n            {\n                title: '人物',\n                children: people\n            },\n        ];\n\n        function renderTitle(title) {\n            return (\n                <span>\n                    {title}\n                </span>\n            );\n        }\n\n        const options = dataSource\n            .map(group => (\n                <OptGroup key={group.title} label={renderTitle(group.title)}>\n                    {group.children.map((opt, index) => (\n                        <Option key={opt.title + opt.content + index} value={opt.content}>\n                            <span className=\"certain-search-item-count\">{opt.content}</span>\n                        </Option>\n                    ))}\n                </OptGroup>\n            ))\n\n        this.setState({\n            dataSource: options\n        })\n    }\n    handleSearch(value) {\n        this.initData(value);\n    }\n    render() {\n        return (\n            <div className={s.searchWrapper} style={{ width: 250 }}>\n                <AutoComplete\n                    className=\"certain-category-search\"\n                    dropdownClassName=\"certain-category-search-dropdown\"\n                    dropdownMatchSelectWidth={true}\n                    dropdownStyle={{ width: 300 }}\n                    size=\"large\"\n                    style={{ width: '100%' }}\n                    dataSource={this.state.dataSource}\n                    placeholder=\"搜索\"\n                    optionLabelProp=\"value\"\n                    onSearch={this.handleSearch.bind(this)}\n                    onSelect={this.onSelect.bind(this)}\n                >\n                    <Input suffix={<Icon type=\"search\" className=\"certain-category-icon\" />} />\n                </AutoComplete>\n            </div>\n        );\n    }\n}","export const timeMap = {\n    0: [0, 1],\n    1: [1, 2],\n    2: [2, 5],\n    3: [5, 10],\n    4: [10, 15],\n    5: [15, 19],\n    6: [19, 38],\n    7: [38, 41],\n    8: [41, 47],\n    9: [47, 51],\n    10: [51, 61],\n    11: [61, 69],\n    12: [69, 82],\n    13: [82, 91],\n    14: [91, 103],\n    15: [103, 111],\n    16: [111, 117],\n    17: [117, 128],\n    18: [128, 134]\n}\n\nexport const nameMap = {\n    '夏': [0, 1],\n    '商': [1, 2],\n    '周': [2, 5],\n    '春秋': [5, 10],\n    '战国': [10, 15],\n    '秦': [15, 19],\n    '汉': [19, 38],\n    '三国': [38, 41],\n    '晋': [41, 47],\n    '十六国': [47, 51],\n    '南北': [51, 61],\n    '隋': [61, 69],\n    '唐': [69, 82],\n    '五代十国': [82, 91],\n    '宋': [91, 103],\n    '元': [103, 111],\n    '民': [111, 117],\n    '清': [117, 128],\n    '民国': [128, 134]\n}\n\nexport function searchKey(dy) {\n    let result = 0;\n    Object.keys(timeMap).forEach(i => {\n        if (timeMap[i][1] > dy && timeMap[i][0] <= dy) {\n            result = parseInt(i);\n        }\n    })\n    return result;\n}\n\nexport function searchName(dy) {\n    let result = 0;\n    Object.keys(nameMap).forEach(i => {\n        if (nameMap[i][1] > dy && nameMap[i][0] <= dy) {\n            result = i;\n        }\n    })\n    return result;\n}\n\n","import React, { Component } from 'react'\r\nimport { Menu, Dropdown, Button } from 'antd';\r\nimport s from './LeftSider.less';\r\nimport { Select } from 'antd';\r\nimport { YearSelector } from '../charts';\r\nimport { YearModal } from '../YearModal/YearModal';\r\nimport { wikiMap } from './WikiMap';\r\nimport Search from '../Search';\r\nimport { searchKey, searchName } from '../MainBox/utils/timeMap';\r\nconst { Option } = Select;\r\nconst { SubMenu } = Menu;\r\n\r\nclass LeftSider extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      collapsed: false,\r\n      yearLabel: undefined,\r\n      showYearModal: false,\r\n      showWiki:false,\r\n      currentYear: ['唐', '619年'],\r\n      currentPeople: null,\r\n      currentEvent: null\r\n    };\r\n  }\r\n\r\n  handleEventSelect(eventFID) {\r\n    if(this.props.onSelectEvent) this.props.onSelectEvent(eventFID)\r\n    this.setState({ currentEvent: eventFID });\r\n  }\r\n  handlePeopleSelect(charFID) {\r\n    if(this.props.onSelectChar) this.props.onSelectChar(charFID)\r\n    this.setState({ currentPeople: charFID });\r\n  }\r\n  handleYearSelect(dynasty, year, idx) {\r\n    //console.log(dynasty,year,idx)\r\n    if(this.props.onSelectDynasty) {\r\n      this.props.onSelectDynasty(dynasty)\r\n    }\r\n    if(this.props.onSelectYear) this.props.onSelectYear(idx);\r\n    this.setState({ currentYear: [dynasty, year]});\r\n  }\r\n\r\n  handleBarClick(idx,name){\r\n    if(name.split(\" \").toString()+\"年\"!==this.state.currentYear.toString()){\r\n      let tmp = name.split(\" \")\r\n      tmp[1]+='年'\r\n      this.setState({currentYear:tmp})\r\n      this.handleYearSelect(tmp[0],tmp[1],idx)\r\n    }\r\n  }\r\n\r\n  openYearModal() {\r\n    this.setState({ showYearModal: true });\r\n  }\r\n\r\n  render() {\r\n    const wikiname = wikiMap[this.state.currentYear[0]];\r\n    const years = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {\r\n          ((years) => {\r\n            const yearList = [];\r\n            for (let name of Object.keys(years)) {\r\n              yearList.push(\r\n                <SubMenu title={name} key={name}>\r\n                  {years[name].map((year, index) => <Menu.Item key={name + year.Year + index} onClick={this.handleYearSelect.bind(this, name, year.Year, year.idx)}>{year.Year}</Menu.Item>)}\r\n                </SubMenu>\r\n              )\r\n            }\r\n            return yearList;\r\n          })(this.props.years)\r\n        }\r\n      </Menu>\r\n    );\r\n    const events = (\r\n      <Select showSearch\r\n        onChange = {this.handleEventSelect.bind(this)}\r\n        allowClear={true}\r\n        placeholder={`${this.state.currentYear[0]}: 历史事件`} \r\n        style={{ width:140,overflowY: 'auto' }}>\r\n        {this.props.events[this.state.currentYear[0]] &&\r\n          this.props.events[this.state.currentYear[0]].map(\r\n            event => (\r\n              <Option value={event.FID} key={event.FID}>\r\n                {event.HName}\r\n              </Option>\r\n            )\r\n          )}\r\n      </Select>\r\n    );\r\n    const people = (\r\n      <Select showSearch\r\n        onChange = {this.handlePeopleSelect.bind(this)}\r\n        allowClear={true}\r\n        placeholder={`${this.state.currentYear[0]}: 历史人物`} \r\n        style={{ width:140,overflowY: 'auto' }}>\r\n        {this.props.charProfiles[this.state.currentYear[0]] &&\r\n          this.props.charProfiles[this.state.currentYear[0]].map(\r\n            char => (\r\n              <Option value={char.FID} key={char.FID}>\r\n                {char.Name}\r\n              </Option>\r\n            )\r\n          )}\r\n      </Select>\r\n    );\r\n    const tiles = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {this.props.currentTile &&\r\n          Object.keys(this.props.tilesMap).map(\r\n            tile => (\r\n              <Menu.Item\r\n                key={tile}\r\n                onClick={() => { this.props.handleTileSelect(tile) }}>\r\n                {this.props.tilesMap[tile]}\r\n              </Menu.Item>\r\n            )\r\n          )}\r\n      </Menu>\r\n    );\r\n    return (\r\n      <div>\r\n      <div className={s.selectors}>\r\n        <div>\r\n          <Dropdown overlay={years} trigger={['click']}>\r\n            <Button>{this.state.currentYear.join(' ') || '年代边界'}</Button>\r\n          </Dropdown>\r\n        </div>\r\n        <div>{people}</div>\r\n        <div>{events}</div>\r\n        <div>\r\n          <Dropdown overlay={tiles} trigger={['click']}>\r\n            <Button>{`底图: ${this.props.tilesMap[this.props.currentTile] || 'Community'}`}</Button>\r\n          </Dropdown>\r\n        </div>\r\n      </div>\r\n      <div className={s.chartContainer}>\r\n          <YearSelector onClick={this.handleBarClick.bind(this)}  data={this.props.yearArea} />\r\n      </div>\r\n      <div className={s.yearModal}>\r\n        <Button onClick={this.openYearModal.bind(this)}>年代变化</Button>\r\n        <YearModal\r\n          visible={this.state.showYearModal}\r\n          handleCancel={() => this.setState({ showYearModal: false })}\r\n          handleOk={() => this.setState({ showYearModal: false })}\r\n        >\r\n          <Button onClick={() => this.setState({ showWiki: !this.state.showWiki })}>显示百科</Button>\r\n          {\r\n            this.state.showWiki &&\r\n            <iframe name=\"wiki_frame\" title=\"baike\" src={\"https://baike.baidu.com/item/\" + wikiname} height=\"600px\" width=\"1240px\" seamless frameborder=\"0\"></iframe>\r\n          }\r\n          <YearSelector\r\n            style={{ position: 'relative', left: 0, right: 0, bottom: 0 }}\r\n            onClick={this.handleBarClick.bind(this)}\r\n            data={this.props.yearArea} />\r\n        </YearModal>\r\n      </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftSider","function createSketch(Obj, Sketch) {\n    const sketch = new Sketch({\n        view: Obj.view,\n        layer: Obj.graphicsLayer2\n    });\n    sketch.on(\"create\", (event) => {\n        // check if the create event's state has changed to complete indicating\n        // the graphic create operation is completed.\n        Obj.setState({ rightDrawShow: true });\n        const selectedBoundary = [];\n        const selectedEvents = [];\n        if (event.state === \"complete\") {\n            Obj.selectGrphics = [];\n            let query = Obj.baseBoundaryFeatureLayer.createQuery();\n            Obj.selectGrphics.push(event.graphic);\n            query.geometry = event.graphic.geometry;\n            query.spatialRelationship = \"intersects\";\n            Obj.baseBoundaryFeatureLayer.queryFeatures(query).then(function (results) {\n                // prints an array of all the features in the service to the console\n                if (Obj.boundaryhighlight) {\n                    Obj.boundaryhighlight.remove();\n                }\n                Obj.boundaryhighlight = Obj.featureLayerView.highlight(results.features);\n                if (results.features.length) {\n                    for (let feature of results.features) {\n                        selectedBoundary.push(feature);\n                    }\n                    Obj.setState({ selectedBoundary });\n                }\n            });\n            query = Obj.baseEventFeatureLayer.createQuery();\n            Obj.selectGrphics.push(event.graphic);\n            query.geometry = event.graphic.geometry;\n            query.spatialRelationship = \"intersects\";\n            Obj.baseEventFeatureLayer.queryFeatures(query).then(function (results) {\n                // prints an array of all the features in the service to the console\n                if (Obj.eventHightLight) {\n                    Obj.eventHightLight.remove();\n                }\n                Obj.eventHightLight = Obj.featureLayerView.highlight(results.features);\n                if (results.features.length) {\n                    for (let feature of results.features) {\n                        selectedEvents.push(feature);\n                    }\n                    Obj.setState({ selectedEvents });\n                }\n            });\n        }\n    });\n    sketch.on(\"update\", (event) => {\n        // check if the create event's state has changed to complete indicating\n        // the graphic create operation is completed.\n        Obj.setState({ rightDrawShow: true });\n    });\n    return sketch;\n}\n\nexport { createSketch };\n","export const renderer = {\n    type: \"unique-value\",  // autocasts as new UniqueValueRenderer()\n    field: \"China\",\n    defaultSymbol: { type: \"simple-fill\" },  // autocasts as new SimpleFillSymbol()\n    uniqueValueInfos: [{\n        // All features with value of \"North\" will be blue\n        value: '0',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [51, 51, 204, 0.5],\n            outline: {  // autocasts as new SimpleLineSymbol()\n                color: [220, 220, 220, 0.5],\n                width: \"0.5px\"\n            }\n        }\n    }, {\n        // All features with value of \"East\" will be green\n        value: '1',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [151, 51, 204, 0.5],\n            outline: {  // autocasts as new SimpleLineSymbol()\n                color: [220, 220, 220, 0.5],\n                width: \"0.5px\"\n            }\n        }\n    }, {\n        // All features with value of \"South\" will be red\n        value: '2',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [51, 51, 44, 0.5],\n            outline: {  // autocasts as new SimpleLineSymbol()\n                color: [220, 220, 220, 0.5],\n                width: \"0.5px\"\n            }\n        }\n    }, {\n        // All features with value of \"West\" will be yellow\n        value: '3',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [251, 51, 204, 0.5],\n            outline: {  // autocasts as new SimpleLineSymbol()\n                color: [220, 220, 220, 0.5],\n                width: \"0.5px\"\n            }\n        }\n    }]\n};\n\nexport const heatMapRenderer = {\n    type: \"heatmap\",\n    colorStops: [\n        { color: \"rgba(63, 40, 102, 0)\", ratio: 0 },\n        { color: \"#472b77\", ratio: 0.083 },\n        { color: \"#4e2d87\", ratio: 0.166 },\n        { color: \"#563098\", ratio: 0.249 },\n        { color: \"#5d32a8\", ratio: 0.332 },\n        { color: \"#6735be\", ratio: 0.415 },\n        { color: \"#7139d4\", ratio: 0.498 },\n        { color: \"#7b3ce9\", ratio: 0.581 },\n        { color: \"#853fff\", ratio: 0.664 },\n        { color: \"#a46fbf\", ratio: 0.747 },\n        { color: \"#c29f80\", ratio: 0.83 },\n        { color: \"#e0cf40\", ratio: 0.913 },\n        { color: \"#ffff00\", ratio: 1 }\n    ],\n    maxPixelIntensity: 65,\n    minPixelIntensity: 0\n};\n\nconst textSymbol = {\n    type: \"text\", // autocasts as new TextSymbol()\n    color: \"#4e2d87\",\n    text: \"\\ue643\", // esri-icon-map-pin\n    font: {\n        // autocasts as new Font()\n        size: 22,\n        family: \"CalciteWebCoreIcons\", // Esri Icon Font\n        weight: 'lighter'\n    }\n};\n\nconst textPeopleSymbol = {\n    type: \"text\", // autocasts as new TextSymbol()\n    color: \"#c29f80\",\n    text: \"\\ue675\", // esri-icon-map-pin\n    font: {\n        // autocasts as new Font()\n        size: 22,\n        family: \"CalciteWebCoreIcons\", // Esri Icon Font\n        weight: 'lighter'\n    }\n};\n\nconst simpleMarker = {\n    type: \"simple-marker\", // autocasts as new SimpleMarkerSymbol()\n    size: 25,\n    color: [125, 255, 255],\n};\n\nexport const simpleMarkerRender = {\n    type: \"simple\", // autocasts as new SimpleRenderer()\n    symbol: textSymbol\n};\n\nexport const simplePeopleMarkerRender = {\n    type: \"simple\", // autocasts as new SimpleRenderer()\n    symbol: textPeopleSymbol\n};","export const Config = {\n    staticPath: 'http://tony-space.top:8007/',\n    gisRestServer: 'https://arcserver.tony-space.top:8001/arcgis/rest/services/',\n    dojoServer: \"http://tony-space.top:8007/arcgis_js_api/library/4.11/dojo/dojo.js\",\n    commentApi: \"http://tony-space.top:8007/api/esri-\"\n}","import { eventPopUpTemplate, peoplePopUpTemplate } from \"./popUpTemplate\";\nimport { simpleMarkerRender, simplePeopleMarkerRender, renderer } from \"./renderer\";\nimport { labelingInfo } from './label';\nimport config from '../../../config';\n\nconst baseBoundaryFeatureUrl = config.gisRestServer + \"country_boundary/MapServer/\";\nconst baseEventFeatureUrl = config.gisRestServer + \"events_point/MapServer/\";\nconst basePeopleFeatureUrl = config.gisRestServer + \"experience/MapServer/0\";\n\nexport const boundaryLayerOption = {\n    url: baseBoundaryFeatureUrl + '69',\n    // id: '0',\n    visible: true,\n    renderer,\n    labelingInfo\n};\nexport const eventLayerOption = {\n    url: baseEventFeatureUrl + '12',\n    //id: '4',\n    visible: true,\n    popupTemplate: eventPopUpTemplate,\n    renderer: simpleMarkerRender\n};\nexport const peopleLayerOption = {\n    url: basePeopleFeatureUrl,\n    visible: true,\n    renderer: simplePeopleMarkerRender,\n    popupTemplate: peoplePopUpTemplate,\n    definitionExpression: 'Sequence=0 and Dynasty_ID=12'\n};","export const labelingInfo = [\n    {\n        // autocasts as new LabelClass()\n        symbol: {\n            type: \"text\",  // autocasts as new TextSymbol()\n            color: \"#555\",\n            haloColor: \"black\",\n            font: {  // autocast as new Font()\n                family: \"KaiTi\",\n                size: 18,\n            }\n        },\n        labelPlacement: \"above-center\",\n        labelExpressionInfo: {\n            expression: \"$feature.Name\"\n        }\n    }\n];\n","export const eventPopUpTemplate = {\n    title:'事件信息',\n    content:[\n        {\n            type:'fields',\n            fieldInfos:[\n                {\n                    fieldName:'HName',\n                    label:'名称',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'HCityName',\n                    label:'发生地',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'Intro',\n                    label:'简介',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'STime',\n                    label:'开始时间',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'ETime',\n                    label:'结束时间',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                }\n            ]\n        }\n    ]\n};\n\nexport const peoplePopUpTemplate = {\n    title:'人物经历',\n    content:[\n        {\n            type:'fields',\n            fieldInfos:[\n                {\n                    fieldName:'Poet',\n                    label:'姓名',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'Year',\n                    label:'年份',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'Place',\n                    label:'地点',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'Content',\n                    label:'经历',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                }\n            ]\n        }\n    ]\n};\n","import React,{Component} from 'react'\nimport {Drawer} from 'antd'\nimport { DataAnalysis, EventDataAnalysis } from '../charts';\n\nexport class RightDrawer extends Component{\n  constructor(){\n    super();\n    this.state = {\n      isOpen:false\n    }\n  }\n\n  render(){\n    //console.log(this.props.data)\n    return(\n      <Drawer\n      title={\"检索\"}\n      placement=\"right\"\n      closable={true}\n      visible={this.props.isShow}\n      mask={false}\n      style={{marginTop:'60px'}}\n      onClose={this.props.onClose}\n      >\n          <div style={{fontSize: 18}}>疆域</div><br/>\n          <DataAnalysis data={this.props.data}/>\n          {\n              this.props.data.selectedBoundary.map(i => {\n                  return (\n                      <div>\n                          名称：{i.attributes.Name} <br/>\n                          面积：{i.attributes.Area} <br/>\n                          <hr/>\n                      </div>\n                  )\n              })\n          }\n          <div style={{fontSize: 18}}>事件</div><br/>\n          <EventDataAnalysis data={this.props.data}/>\n          {\n              this.props.data.selectedEvents.map(i => {\n                  return (\n                      <div onMouseOver={() => { this.props.onHoverResult(i.geometry, i.attributes.HName, i.attributes.Intro) }}>\n                          名称：{i.attributes.HName} <br/>\n                          城市：{i.attributes.HCityName.trim() ? i.attributes.HCityName : '无城市信息'} <br/>\n                          <hr/>\n                      </div>\n                  )\n              })\n          }\n      </Drawer>\n  )}\n}\n","import React, { Component } from 'react'\r\nimport { Button, Switch, Timeline, Empty, Icon,message } from 'antd';\r\nimport EsriLoader from 'esri-loader'\r\nimport s from './mainBox.less';\r\nimport { createSketch, heatMapRenderer, simpleMarkerRender, simplePeopleMarkerRender, boundaryLayerOption, eventLayerOption, peopleLayerOption } from './utils';\r\nimport { YearSelector } from '../charts';\r\nimport Search from '../Search';\r\nimport config from '../../config';\r\nimport { searchKey, searchName } from './utils/timeMap';\r\nimport { RightDrawer } from '../Drawer/Common';\r\nimport { YearModal } from '../YearModal/YearModal';\r\nimport { eventPopUpTemplate,peoplePopUpTemplate } from './utils/popUpTemplate';\r\n\r\nconst ButtonGroup = Button.Group;\r\nconst BOUNDARY_LAYER_NUM = 121;\r\n\r\nclass MainBox extends Component {\r\n  constructor() {\r\n    super()\r\n    this.dojoUrl = config.dojoServer;\r\n    this.tileMapUrl = \"http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineCommunity/MapServer\"\r\n    this.baseBoundaryFeatureUrl = config.gisRestServer + \"country_boundary/MapServer/\";\r\n    this.baseEventFeatureUrl = config.gisRestServer + \"events_point/MapServer\";\r\n    this.basePeopleFeatureUrl = config.gisRestServer + \"experience/MapServer/\";\r\n    this.state = {\r\n      isPlay: false,\r\n      playControllerText: '播放边界变化',\r\n      sliderValue: 0,\r\n      selectedBoundary: [],\r\n      rightDrawShow: false,\r\n      showYearModal: false,\r\n      showBoundary: true,\r\n      showChar: true,\r\n      showEvent: true,\r\n      selectedEvents: [],\r\n      showTraj: 0,\r\n      bntLabel: '显示轨迹',\r\n      speedChange: false,\r\n      speed: 101,\r\n      expIdx: -1,\r\n      showExp: false,\r\n    }\r\n    this.playTimer = null;\r\n    this.stopUpdate = true;\r\n    this.selectGrphics = [];\r\n    this.changeBaseMap = () => { };\r\n\r\n  }\r\n  componentWillMount() {\r\n    this.initMap()\r\n  }\r\n  handleMouseOverSearchResult(mapPoint, name, content, e) {\r\n    this.view && this.view.popup.open({\r\n      // Set the popup's title to the coordinates of the location\r\n      title: name,\r\n      content,\r\n      location: mapPoint, // Set the location of the popup to the clicked location\r\n    });\r\n  }\r\n  onSearchSelect(action) {\r\n    console.log('action', action);\r\n    switch (action.type) {\r\n      case 0: this.props.onSelectDynasty(action.payload); break;\r\n      case 1: this.props.onSelectChar(action.payload); break;\r\n      case 2: this.props.onSelectEvent(action.payload); break;\r\n      case 3: this.props.onSelectYear(action.payload); break;\r\n    }\r\n  }\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.currentYear !== this.props.currentYear ||\r\n      prevProps.trigger.eventHeatmap !== this.props.trigger.eventHeatmap ||\r\n      prevProps.trigger.heatmap !== this.props.trigger.heatmap) this.changeBoundaryLayer.call(this, this.props.currentYear);\r\n    if (prevProps.currentTileMap !== this.props.currentTileMap) {\r\n      console.log(this.props.currentTileMap)\r\n      this.changeBaseMap(this.props.currentTileMap);\r\n    }\r\n    if (prevState.selectedBoundary !== this.state.selectedBoundary) {\r\n\r\n      this.setState({ rightDrawShow: true });\r\n    }\r\n    // trigger start\r\n    if (this.sketch) {\r\n      if (!this.props.trigger.toolbar) {\r\n        this.view.ui.remove(this.sketch);\r\n      } else {\r\n        this.view.ui.add(this.sketch, 'top-left');\r\n      }\r\n    }\r\n\r\n    // trigger end\r\n    //人物点显示\r\n    this.trajCtrl(prevProps.currentChar);\r\n    this.basePeopleFeatureLayer && (this.basePeopleFeatureLayer.visible = this.props.trigger.showChar);\r\n    //\r\n    if(this.baseBoundaryFeatureLayer){\r\n      if(!this.props.trigger.showOther) this.baseBoundaryFeatureLayer.definitionExpression = `China>0`\r\n      else this.baseBoundaryFeatureLayer.definitionExpression = undefined\r\n    }\r\n\r\n  }\r\n\r\n  trajCtrl(prevChar) {\r\n    if (!this.props.trigger.showChar) {\r\n      if (this.t) {\r\n        clearInterval(this.t)\r\n        this.t = null\r\n      }\r\n      if (this.state.showTraj > 0) this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n      if (this.graphic) this.graphic.geometry = undefined\r\n      if (this.polyline) this.polyline.paths = []\r\n      return\r\n    }\r\n    if (prevChar >= 0 && this.props.currentChar === undefined) {\r\n      if (this.t) {\r\n        clearInterval(this.t)\r\n        this.t = null\r\n      }\r\n      if (this.state.showTraj > 0) this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n      if (this.graphic) this.graphic.geometry = undefined\r\n      if (this.polyline) this.polyline.paths = []\r\n      if (this.basePeopleFeatureLayer) this.basePeopleFeatureLayer.definitionExpression = `Sequence=0 and Dynasty='${this.props.currentDynasty}'`\r\n    }else if(prevChar >= 0 && this.props.currentChar >= 0 && prevChar!==this.props.currentChar){\r\n        if (this.t) {\r\n          clearInterval(this.t)\r\n          this.t = null\r\n        }\r\n        if (this.state.showTraj > 0) this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n        if (this.graphic) this.graphic.geometry = undefined\r\n        if (this.polyline) this.polyline.paths = []\r\n        if (this.view) this.loadingPath()\r\n        if (this.basePeopleFeatureLayer) this.basePeopleFeatureLayer.definitionExpression = 'Poet_ID=' + this.props.currentChar\r\n     }else if (prevChar || this.props.currentChar) {\r\n      if (this.basePeopleFeatureLayer && prevChar !== this.props.currentChar) this.basePeopleFeatureLayer.definitionExpression = 'Poet_ID=' + this.props.currentChar\r\n      if (this.state.showTraj === 0) {\r\n        //console.log('loading...')\r\n        if (this.t) {\r\n          clearInterval(this.t)\r\n          this.t = null\r\n        }\r\n\r\n        if (this.polyline) this.polyline.paths = []\r\n        if (this.view) this.loadingPath()\r\n      } else if (this.state.showTraj % 2 !== 0) {\r\n        //console.log('showing trajectory...')\r\n        if (this.state.speedChange) {\r\n          if (this.t) {\r\n            clearInterval(this.t)\r\n            this.t = null\r\n          }\r\n        }\r\n        if (this.traj && this.traj.length > 0) {\r\n          if (!this.t) {\r\n            this.play()\r\n          }\r\n        }\r\n      } else {\r\n        //console.log('pausing...')\r\n        if (this.t) {\r\n          clearInterval(this.t)\r\n          this.t = null\r\n        }\r\n      }\r\n    } else {\r\n      if (this.basePeopleFeatureLayer) this.basePeopleFeatureLayer.definitionExpression = `Sequence=0 and Dynasty='${this.props.currentDynasty}'`\r\n    }\r\n  }\r\n\r\n\r\n  play() {\r\n    //if(this.state.showTraj===1)this.view.goTo({center:this.traj[0],zoom:5},{duration:500,easing:'in-out-expo'})\r\n    this.t = setInterval(() => {\r\n      if (this.traj.length > 0) {\r\n        let tmp = this.traj.shift()\r\n        //console.log(tmp)\r\n        this.props.trigger.track && this.view.goTo({center:tmp,zoom:6},{duration:1000,easing:'in-out-expo'})\r\n        this.polyline.paths.push(tmp)\r\n        this.graphic.geometry = this.polyline\r\n        let manifestIdx = this.nodeIdx.shift()\r\n        if (this.polyline.paths.length === manifestIdx) {\r\n\r\n          this.view.whenLayerView(this.basePeopleFeatureLayer).then((layerView) => {\r\n            let query = this.basePeopleFeatureLayer.createQuery();\r\n            query.where = 'Poet_ID=' + this.props.currentChar\r\n            this.basePeopleFeatureLayer.queryFeatures(query).then((result) => {\r\n              //this.basePeopleFeatureLayer.definitionExpression = 'Poet_ID='+this.props.currentChar+' and Sequence<='+(result.features.length-this.nodeIdx.length-1)\r\n              this.setState({ expIdx: this.state.expIdx + 1 }, () => { })\r\n              let feature = result.features[result.features.length - this.nodeIdx.length - 1]\r\n              let highlight = layerView.highlight(feature)\r\n              setTimeout(() => {\r\n                highlight.remove()\r\n              },700)\r\n            })\r\n          });\r\n        } else {\r\n          this.nodeIdx.unshift(manifestIdx)\r\n        }\r\n      } else {\r\n        clearInterval(this.t)\r\n        this.t = null\r\n        this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n        setTimeout(() => {\r\n          this.setState({ expIdx: -1 })\r\n        }, 1000)\r\n      }\r\n    }, this.state.speed);\r\n\r\n  }\r\n\r\n  loadingPath() {\r\n    this.view.whenLayerView(this.basePeopleFeatureLayer).then(() => {\r\n      let queryChar = this.basePeopleFeatureLayer.createQuery();\r\n      queryChar.where = \"Poet_ID=\" + this.props.currentChar\r\n      this.basePeopleFeatureLayer.queryFeatures(queryChar).then((result) => {\r\n        let feature = result.features\r\n        this.traj = []\r\n        this.cnt = 0\r\n        this.nodeIdx = [1]\r\n        for (let i = 0; i < feature.length - 1; i++) {\r\n          this.traj.push.apply(this.traj, this.interpolation(feature[i].geometry, feature[i + 1].geometry, i % 2 === 0 ? 1 : -1))\r\n          this.nodeIdx.push(this.cnt)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  interpolation(pointA, pointB, inverse) {\r\n    //calculate center\r\n    let angle = (Math.PI / 6 + Math.round(Math.random()) / 5)\r\n    let pointC = { x: 0, y: 0 }\r\n    if (pointA.x === pointB.x) {\r\n      pointC.x = pointA.x + Math.abs(pointB.y - pointA.y) / 2 * Math.tan(angle)\r\n      pointC.y = pointA.y\r\n    } else {\r\n      let k = -(pointB.x - pointA.x) / (pointB.y - pointA.y)\r\n      let x0 = (pointA.x + pointB.x) / 2\r\n      let y0 = (pointA.y + pointB.y) / 2\r\n      let dist = inverse * Math.sqrt((pointA.x - pointB.x) * (pointA.x - pointB.x) + (pointA.y - pointB.y) * (pointA.y - pointB.y)) / 2 * Math.tan(angle)\r\n      pointC.x = x0 + dist * Math.sqrt(1 / (1 + k * k))\r\n      pointC.y = y0 + dist * Math.sqrt(1 / (1 + k * k)) * k\r\n    }\r\n    let t = 0\r\n    let incre = 0.1 / Math.sqrt((pointA.x - pointB.x) * (pointA.x - pointB.x) + (pointA.y - pointB.y) * (pointA.y - pointB.y))\r\n    let pnt = { x: 0, y: 0 }, tmpPnt1 = { x: 0, y: 0 }, tmpPnt2 = { x: 0, y: 0 }\r\n    let pntSet = []\r\n    while (t <= 1) {\r\n      tmpPnt1.x = (1 - t) * pointA.x + t * pointC.x\r\n      tmpPnt1.y = (1 - t) * pointA.y + t * pointC.y\r\n      tmpPnt2.x = (1 - t) * pointC.x + t * pointB.x\r\n      tmpPnt2.y = (1 - t) * pointC.y + t * pointB.y\r\n      pnt.x = (1 - t) * tmpPnt1.x + t * tmpPnt2.x\r\n      pnt.y = (1 - t) * tmpPnt1.y + t * tmpPnt2.y\r\n      pntSet.push([pnt.x, pnt.y])\r\n      this.cnt++\r\n      t += incre\r\n    }\r\n    pntSet.push([pointB.x, pointB.y])\r\n    this.cnt++\r\n    return pntSet\r\n  }\r\n\r\n  initMap() {\r\n    EsriLoader.loadModules([\r\n      \"esri/layers/GraphicsLayer\",\r\n      \"esri/widgets/Sketch\",\r\n      \"esri/Map\",\r\n      \"esri/Basemap\",\r\n      \"esri/layers/TileLayer\",\r\n      \"esri/views/MapView\",\r\n      \"esri/layers/FeatureLayer\",\r\n      'esri/Graphic',\r\n      'esri/widgets/Zoom',\r\n      \"esri/widgets/Compass\",\r\n      'esri/widgets/ScaleBar',\r\n      \"dojo/domReady!\"\r\n    ], this.dojoUrl).then(([GraphicsLayer, Sketch, Map, Basemap, TileLayer, MapView, FeatureLayer, Graphic, Zoom, Compass, ScaleBar]) => {\r\n      this.FeatureLayer = FeatureLayer;\r\n      this.Basemap = Basemap;\r\n      this.graphicsLayer2 = new GraphicsLayer();\r\n\r\n      this.baseBoundaryFeatureLayer = new FeatureLayer(boundaryLayerOption);\r\n      this.baseEventFeatureLayer = new FeatureLayer(eventLayerOption);\r\n      this.basePeopleFeatureLayer = new FeatureLayer(peopleLayerOption);\r\n\r\n      this.changeBaseMap = (tileMapUrl) => {\r\n        let tileLayer = new TileLayer({\r\n          url: tileMapUrl\r\n        });\r\n        let baseMap = new Basemap({\r\n          baseLayers: [tileLayer],\r\n          id: 'myBaseMap'\r\n        });\r\n        if (this.map) {\r\n          this.map.basemap = baseMap;\r\n        }\r\n      }\r\n\r\n      let tileLayer = new TileLayer({\r\n        url: this.tileMapUrl\r\n      });\r\n      let basemap = new Basemap({\r\n        baseLayers: [tileLayer],\r\n        id: 'myBaseMap'\r\n      });\r\n      this.map = new Map({\r\n        basemap,\r\n        layers: [\r\n          this.graphicsLayer2,\r\n          this.baseEventFeatureLayer,\r\n          this.basePeopleFeatureLayer,\r\n          this.baseBoundaryFeatureLayer,\r\n        ]\r\n      });\r\n      this.view = new MapView({\r\n        center: [115, 32.1],\r\n        map: this.map,\r\n        container: \"mapDiv\",\r\n        zoom: 5\r\n      });\r\n      this.view.whenLayerView(this.baseBoundaryFeatureLayer).then((layerView) => {\r\n        this.featureLayerView = layerView;\r\n      });\r\n      this.graphic = new Graphic()\r\n      let zoom = new Zoom({\r\n        view: this.view,\r\n        layout: 'horizontal'\r\n      })\r\n      let compass = new Compass({\r\n        view: this.view\r\n      });\r\n      let scaleBar = new ScaleBar({\r\n        view: this.view,\r\n        unit: 'metric'\r\n      })\r\n      this.sketch = createSketch(this, Sketch);\r\n      this.graphic.symbol = {\r\n        type: \"simple-line\",\r\n        color: [226, 119, 40],\r\n        width: 1.5\r\n      };\r\n      this.polyline = {\r\n        type: 'polyline',\r\n        paths: []\r\n      }\r\n      this.sketch = createSketch(this, Sketch);\r\n      this.view.graphics.add(this.graphic)\r\n      this.view.ui.padding = { top: 80, left: 30, right: 0, bottom: 0 };\r\n      this.view.ui.remove('zoom')\r\n      this.view.ui.add(zoom)\r\n      this.view.ui.add(compass)\r\n      this.view.ui.add(scaleBar, 'bottom-right');\r\n      this.view.ui.add(this.sketch, \"top-left\");\r\n\r\n    })\r\n  }\r\n\r\n  changeBoundaryLayer(index, name) {\r\n    if (!this.map || !this.FeatureLayer) {\r\n      return 0;\r\n    }\r\n    if (this.baseEventFeatureLayer) {\r\n      if (this.props.trigger.eventHeatmap) {\r\n        eventLayerOption.renderer = heatMapRenderer;\r\n      } else {\r\n        eventLayerOption.renderer = simpleMarkerRender;\r\n      }\r\n    }\r\n    if (this.basePeopleFeatureLayer) {\r\n      if (this.props.trigger.heatmap) {\r\n        peopleLayerOption.renderer = heatMapRenderer;\r\n      } else {\r\n        peopleLayerOption.renderer = simplePeopleMarkerRender;\r\n      }\r\n    }\r\n    boundaryLayerOption.url = boundaryLayerOption.url.split('/').slice(0, -1).join('/') + '/' + index;\r\n    this.baseBoundaryFeatureLayer = new this.FeatureLayer(boundaryLayerOption);\r\n    const eventLayerIndex = searchKey(index);\r\n    eventLayerOption.url = boundaryLayerOption.url.split('/').slice(0, -1).join('/') + '/' + eventLayerIndex;\r\n    this.baseEventFeatureLayer = new this.FeatureLayer(eventLayerOption);\r\n    this.basePeopleFeatureLayer = new this.FeatureLayer(peopleLayerOption);\r\n    if (this.state.currentDynasty !== this.props.currentDynasty) { peopleLayerOption.definitionExpression = 'Sequence=0 and Dynasty_ID=' + String(this.props.currentDynasty) }\r\n    this.map.layers = [this.graphicsLayer2, this.baseEventFeatureLayer, this.basePeopleFeatureLayer, this.baseBoundaryFeatureLayer];\r\n  }\r\n\r\n  openYearModal() {\r\n    this.setState({ yearModal: true });\r\n  }\r\n\r\n  // handleSliderChange(value) {\r\n  //   if (!this.map) {\r\n  //     return 0;\r\n  //   }\r\n  //   // TO FIX: slider切换年份不生效\r\n  //   this.changeBoundaryLayer(value);\r\n  //   this.setState({ sliderValue: value });\r\n  // }\r\n\r\n  handleLayerPlay() {\r\n    this.stopUpdate = !this.stopUpdate\r\n    this.setState({ isPlay: !this.state.isPlay })\r\n\r\n    this.view.goTo({ center: [115, 32.1], zoom: 4 }, { duration: 1000, easing: 'in-out-expo' })\r\n    let i = 0\r\n    if (this.playTimer) {\r\n      clearInterval(this.playTimer);\r\n      this.playTimer = null;\r\n      this.setState({ playControllerText: '播放边界变化', isPlay: false })\r\n      return;\r\n    }\r\n    this.setState({ playControllerText: '\\u3000暂停播放\\u3000', isPlay: true })\r\n    this.playTimer = setInterval(() => {\r\n      if (i < BOUNDARY_LAYER_NUM) {\r\n        if (i) {\r\n          this.changeBoundaryLayer.call(this, i);\r\n        }\r\n        this.setState({ sliderValue: i });\r\n      }\r\n      else {\r\n        this.stopUpdate = !this.stopUpdate\r\n        this.setState({ isPlay: false })\r\n        this.changeBoundaryLayer.call(this, i);\r\n        clearInterval(this.playTimer);\r\n        this.playTimer = null;\r\n      }\r\n      i++;\r\n      return void 0;\r\n    }, 2000)\r\n  }\r\n\r\n  //人物开关\r\n  \r\n  //trajectory\r\n  handleShowPath() {\r\n    if(this.props.currentChar===null || this.props.currentChar===undefined) message.error('请选择人物',2);\r\n    this.setState({ showTraj: this.props.currentChar ? this.state.showTraj + 1 : 0, bntLabel: this.props.currentChar ? this.state.showTraj % 2 === 0 ? '暂\\u3000停\\u3000 ' : '继\\u3000续\\u3000 ' : '显示轨迹', speedChange: false })\r\n  }\r\n  handleSpeedDown() {\r\n    if (this.state.speed < 191) this.setState({ speed: this.state.speed + 10, speedChange: true })\r\n  }\r\n  handleSpeedUp() {\r\n    if (this.state.speed > 1) this.setState({ speed: this.state.speed - 10, speedChange: true })\r\n  }\r\n  //\r\n  handleExpNav(idx) {\r\n    //console.log(idx)\r\n\r\n    this.view.whenLayerView(this.basePeopleFeatureLayer).then((layerView) => {\r\n      let query = this.basePeopleFeatureLayer.createQuery()\r\n      query.where = `Poet_ID=${this.props.currentChar} and Sequence=${idx}`\r\n      this.basePeopleFeatureLayer.queryFeatures(query).then((result) => {\r\n        let feature = result.features[0]\r\n        let highlight = layerView.highlight(feature)\r\n        setTimeout(() => {\r\n          highlight.remove()\r\n        }, 2000)\r\n        this.view.goTo({ center: feature.geometry, zoom: 6 }, { duration: 1000, easing: 'in-out-expo' })\r\n      })\r\n    })\r\n\r\n  }\r\n  render() {\r\n    //console.log(this.props.startAndEnd)\r\n    let timeline = (\r\n      <Timeline >\r\n        <div className={'charExp'}>人物经历</div>\r\n        {this.props.currentChar >= 0 ? this.props.experience.map((e, idx) => {\r\n          return (<Timeline.Item\r\n            onClick={this.handleExpNav.bind(this, idx)}\r\n            style={{ color: this.state.expIdx === idx ? 'deepskyblue' : '' }}\r\n            dot={idx === this.state.expIdx ? <Icon type=\"loading\" style={{ fontSize: '20px' }} /> : undefined} >\r\n            {e.Year + '年，' + e.Place + '，' + e.Content}</Timeline.Item>)\r\n        }) : <Empty description={'请选择人物'} />}\r\n      </Timeline>\r\n    )\r\n    return (\r\n      <>\r\n        <div id='mapDiv' style={{ height: '100%', width: '100%', padding: '5px' }}></div>\r\n\r\n        {this.props.trigger.showExp ? timeline : undefined}\r\n        <div className={s['traj_set']}>\r\n          <Button icon={this.state.showTraj%2===0?'caret-right':'loading'} onClick={this.handleShowPath.bind(this)}>{this.state.bntLabel}</Button>\r\n          <ButtonGroup>\r\n            <Button icon={'step-backward'} onClick={this.handleSpeedDown.bind(this)}></Button>\r\n            <Button>{'×' + ((101 - this.state.speed) / 100 + 1).toFixed(1)}</Button>\r\n            <Button icon={'step-forward'} onClick={this.handleSpeedUp.bind(this)}></Button>\r\n          </ButtonGroup>\r\n        </div>\r\n        <div className={s['play_button']}>\r\n          <Button onClick={this.handleLayerPlay.bind(this)} icon={this.state.isPlay ? 'loading' : 'caret-right'}>\r\n            {this.state.playControllerText}\r\n          </Button>\r\n        </div>\r\n        {/* <YearSelector onClick={this.changeBoundaryLayer.bind(this)} data={this.props.yearArea} />\r\n        <Button\r\n          style={{ position: 'absolute', right: 70, bottom: 80 }}\r\n          onClick={this.openYearModal.bind(this)}>年代变化</Button>\r\n        <YearModal\r\n          visible={this.state.yearModal}\r\n          handleCancel={() => this.setState({ yearModal: false })}\r\n          handleOk={() => this.setState({ yearModal: false })}\r\n        >\r\n          <Button onClick={() => this.setState({ showWiki: !this.state.showWiki })}>显示百科</Button>\r\n          {\r\n            this.state.showWiki &&\r\n            <iframe name=\"wiki_frame\" title=\"baike\" src={\"https://baike.baidu.com/item/\" + encodeURIComponent(searchName(this.props.currentYear)) + \"朝\"} height=\"600px\" width=\"1240px\" seamless frameborder=\"0\"></iframe>\r\n          }\r\n          <YearSelector\r\n            style={{ position: 'relative', left: 0, right: 0, bottom: 0 }}\r\n            onClick={this.props.onSelectYear}\r\n            data={this.props.yearArea} />\r\n        </YearModal> */}\r\n        <RightDrawer\r\n          isShow={this.state.rightDrawShow}\r\n          onClose={() => this.setState({ rightDrawShow: false })}\r\n          onHoverResult={this.handleMouseOverSearchResult.bind(this)}\r\n          data={{\r\n            years: this.props.years,\r\n            charProfiles: this.props.charProfiles,\r\n            events: this.props.events,\r\n            selectedBoundary: this.state.selectedBoundary,\r\n            selectedEvents: this.state.selectedEvents\r\n          }}\r\n        />\r\n        {\r\n          !this.state.rightDrawShow &&\r\n          <Button\r\n            style={{ position: 'absolute', right: 0, bottom: 3, height: '99%', width: 15, padding: 0 }}\r\n            onClick={() => this.setState({ rightDrawShow: true })}\r\n          >\r\n            &lt;\r\n        </Button>\r\n        }\r\n        <Search\r\n          year={this.props.years}\r\n          event={this.props.events}\r\n          people={this.props.charProfiles}\r\n          onSelect={this.onSearchSelect.bind(this)}\r\n        />\r\n        {/* <Slider\r\n          years={this.props.years}\r\n          value={this.state.sliderValue}\r\n          onChange={this.handleSliderChange.bind(this)}\r\n        /> */}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MainBox","import React from 'react';\nimport { Button, Comment, Form, Input } from 'antd';\nimport config from '../../config';\n\n\nconst { TextArea } = Input;\n\nconst Editor = ({ onChange, onSubmit, submitting, value }) => (\n    <div>\n        <Form.Item>\n            <TextArea rows={4} onChange={onChange} value={value} />\n        </Form.Item>\n        <Form.Item>\n            <Button htmlType=\"submit\" loading={submitting} onClick={onSubmit} type=\"primary\">\n                添加评论\n      </Button>\n        </Form.Item>\n    </div>\n);\nexport class CustomComment extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            comments: [],\n            submitting: false,\n            value: ''\n        }\n    }\n\n    getComments() {\n        const url = config.commentApi + 'getcomments?id=' + this.props.id;\n        fetch(url).then((res) => {\n            return res.json()\n        }).then((json) => {\n            this.setState({ comments: json })\n        }).catch((e) => {\n            this.setState({ comments: [] })\n        })\n    }\n\n    componentDidMount() {\n        this.getComments();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.id !== prevProps.id) {\n            this.getComments();\n        }\n    }\n\n    onChange(e) {\n        const value = e.target.value;\n        this.setState({ value })\n    }\n\n    onSubmit() {\n        const comment = this.state.value;\n        const name = this.props.user ? this.props.user : 'anonymous'\n        const url = config.commentApi + `addcomments?id=${this.props.id}&name=${name}&content=${comment}`;\n        this.setState({ submitting: true });\n        fetch(url).then((res) => {\n            this.setState({ submitting: false })\n            this.getComments();\n        }, (e) => {\n            this.setState({ submitting: false })\n            this.getComments();\n        })\n    }\n\n    render() {\n        return (\n            <div id=\"comments_container\" style={{boxShadow: '0px 0px 5px #e6e6e6', padding: 5 }}>\n                <div style={{fontSize: 18}}>评论</div>\n                {this.state.comments.map(i => {\n                    return (\n                        <Comment\n                            author={<a>{i.name}</a>}\n                            content={\n                                <p>\n                                    {i.content}\n                                </p>\n                            }\n                        />\n                    )\n                })}\n                <Comment\n                    content={\n                        <Editor\n                            onChange={this.onChange.bind(this)}\n                            value={this.state.value}\n                            submitting={this.state.submitting}\n                            onSubmit={this.onSubmit.bind(this)}\n                        />\n                    }\n                />\n            </div>\n        )\n    }\n}","import React,{Component} from 'react'\r\nimport {Drawer, Button,Empty} from 'antd'\r\nimport { CustomComment } from '../Comment';\r\n\r\nclass EventDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      visible:false\r\n    }\r\n  }\r\n\r\n  render(){\r\n    let content = (<div/>)\r\n    if(this.props.eventProfile){\r\n      let eventProfile = this.props.eventProfile\r\n      content = (\r\n        <div>\r\n          <p>{`事件名称：${eventProfile.HName}`}</p>\r\n          <p>{`发生地点：${eventProfile.HCityName}`}</p>\r\n          <p>{`起始时间：${eventProfile.STime}`}</p>\r\n          <p>{`结束时间：${eventProfile.ETime}`}</p>\r\n          <p>{`简介：`}</p>\r\n          <p style={{textIndent:'2em'}}>{eventProfile.Intro}</p>\r\n        </div>\r\n      )\r\n    }else{\r\n      content=(\r\n        <Empty description={'请选择事件'}/>\r\n      )\r\n    }\r\n    return(\r\n      <div>\r\n        <Button style={{position:'absolute',right:350,top:25}} type=\"primary\" onClick={()=>{this.setState({visible:!this.state.visible})}}>\r\n          事件简介\r\n        </Button>\r\n        <Drawer\r\n        title={\"事件简介\"}\r\n        placement=\"right\"\r\n        closable={false}\r\n        visible={this.state.visible}\r\n        mask={false}\r\n        style={{marginTop:'60px'}}\r\n        >\r\n          {content}\r\n          {\r\n            this.props.showComment &&\r\n            <CustomComment id={this.props.eventProfile ? this.props.eventProfile.HName : '-1'} />\r\n          }\r\n        </Drawer>\r\n      </div>\r\n  )}\r\n}\r\n\r\nexport default EventDrawer","import React, { Component } from 'react'\r\nimport { CustomComment } from '../Comment';\r\nimport { Drawer, Button, Empty } from 'antd'\r\n\r\nclass CharDrawer extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      visible: false\r\n    }\r\n    this.iconURL = 'icon/'\r\n  }\r\n\r\n  render() {\r\n    let content = (<div />)\r\n\r\n    if (this.props.charProfile) {\r\n      let charProfile = this.props.charProfile\r\n      //let icon=require(this.iconURL+charProfile.FID+'.jpg')\r\n      content = (\r\n        <div>\r\n          <div style={{ align: 'center', textAlign: 'center' }}>\r\n            <img src={[this.iconURL + charProfile.FID + '.jpg']} height={200} width={200} />\r\n          </div>\r\n          <hr />\r\n          <p>{`姓名：${charProfile.Name}`}</p>\r\n          <p>{`字：${charProfile.zi}`}</p>\r\n          <p>{`号：${charProfile.hao}`}</p>\r\n          <p>{`生年：${charProfile.STime}`}</p>\r\n          <p>{`卒年：${charProfile.ETime}`}</p>\r\n          <p>{`出生地：${charProfile.Home}`}</p>\r\n          <p>{`简介：`}</p>\r\n          <p style={{ textIndent: '2em' }}>{charProfile.Intro}</p>\r\n        </div>\r\n      )\r\n    } else {\r\n      content = (\r\n        <Empty description={'请选择人物'} />\r\n      )\r\n    }\r\n    return (\r\n      <div>\r\n        <Button style={{ position: 'absolute', right: 450, top: 25 }} type=\"primary\" onClick={() => { this.setState({ visible: !this.state.visible }) }}>\r\n          人物简介\r\n        </Button>\r\n        <Drawer\r\n          title={\"人物简介\"}\r\n          placement=\"right\"\r\n          closable={false}\r\n          visible={this.state.visible}\r\n          mask={false}\r\n          style={{ marginTop: '60px' }}\r\n        >\r\n          {content}\r\n          {\r\n            this.props.showComment &&\r\n            <CustomComment id={this.props.charProfile ? this.props.charProfile.Name : '1'} />\r\n          }\r\n        </Drawer>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CharDrawer","import { Drawer, Button } from 'antd';\nimport React from 'react';\nimport s from './index.less';\n\nexport class ToolBox extends React.Component {\n  state = { visible: false, placement: 'left' };\n\n  showDrawer = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n\n  onClose = () => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          overflow: 'hidden',\n          position: 'absolute',\n          width: 20,\n          height: \"100%\"\n        }}\n      >\n        <Button className={s.toolbox_button} onMouseEnter={this.showDrawer}>\n          &gt;\n        </Button>\n        <Drawer\n          title=\"工具箱\"\n          placement=\"left\"\n          closable={true}\n          onClose={this.onClose}\n          visible={this.state.visible}\n          mask={false}\n          onMouseLeave={this.onClose}\n          getContainer={false}\n          style={{height: 'calc(100% - 64px)', top: 64}}\n        >\n          {this.props.children}\n        </Drawer>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Header from './compnents/Header/Header'\nimport LeftSider from './compnents/LeftSider/LeftSider'\nimport MainBox from './compnents/MainBox/MainBox'\nimport EventDrawer from './compnents/Drawer/EventDrawer'\nimport { Layout, Switch,Divider } from 'antd';\nimport './App.css';\nimport CharDrawer from './compnents/Drawer/CharDrawer';\nimport Config from './config';\nimport { ToolBox } from './compnents/ToolBox';\n\nconst staticPath = Config.staticPath;\n\nconst tilesMap = {\n  'http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer': 'Warm',\n  'http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer': 'PurplishBlue',\n  'http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineCommunity/MapServer': 'Community',\n  'https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer': 'Satellite',\n  \n};\n\n\nconst { Content } = Layout\nclass App extends Component {\n  constructor() {\n    super()\n    this.state = {\n      charProfiles: [],\n      years: [],\n      events: [],\n      experience: [],\n      yearArea: [],\n      Trigger: {\n        heatmap: false,\n        eventHeatmap: false,\n        toolbar: true,\n        comment: true,\n        showChar: true,\n        showExp: false,\n        showOther: true,\n        track: false\n      },\n      currentYear: 69,\n      currentTileMap: 'topo',\n      currentChar: null,\n      currentDynasty: \"唐\",\n      currentEvent: null,\n    }\n  }\n\n  onSelectYear(id) {\n    this.setState({ currentYear: id });\n  }\n\n  onSelectTileMap(currentTileMap) {\n    this.setState({ currentTileMap })\n  }\n\n  onSelectDynasty(dynasty) {\n    this.setState({ currentDynasty: dynasty })\n  }\n\n  processYearArea(data) {\n    const result = [];\n    Object.keys(data).forEach(d => {\n      Object.keys(data[d][0]).forEach(d1 => {\n        result.push([\n          d + ' ' + d1,\n          data[d][0][d1]\n        ])\n      })\n    });\n    return result;\n  }\n\n  processYear(data) {\n    let idx = 0;\n    Object.keys(data).forEach(d => {\n      data[d].forEach((item, index) => {\n        data[d][index] = {\n          Year: data[d][index] + '年',\n          idx\n        }\n        idx++;\n      });\n    });\n    return data;\n  }\n  //handle character selection\n  onSelectChar(charFID) {\n    this.setState({ currentChar: charFID })\n\n  }\n\n  onSelectEvent(eventFID) {\n    this.setState({ currentEvent: eventFID })\n  }\n\n  componentDidMount() {\n    const yearData = fetch(staticPath + 'json/year.json').then(res => res.json())\n    const profileData = fetch(staticPath + 'json/profile.json').then(res => res.json())\n    const eventData = fetch(staticPath + 'json/event.json').then(res => res.json())\n    const experienceData = fetch(staticPath + 'json/experience.json').then(res => res.json())\n    const yearArea = fetch(staticPath + 'json/area.json').then(res => res.json())\n    Promise.all([yearData, profileData, eventData, experienceData, yearArea]).then((dataList) => {\n      console.log(dataList)\n      this.setState({\n        years: this.processYear(dataList[0]),\n        charProfiles: dataList[1],\n        events: dataList[2],\n        experience: dataList[3],\n        yearArea: this.processYearArea(dataList[4])\n      })\n    }).catch((err) => {\n      console.error(err);\n    })\n  }\n\n  render() {\n    console.log(this);\n    let experience = []\n    let trash = null\n    if (this.state.experience && this.state.currentChar !== null) {\n      [].concat(...Object.values(this.state.experience)).map((e) => { e[\"Poet ID\"] === String(this.state.currentChar) ? experience.push(e) : trash = undefined })\n    }\n    return (\n      <div className=\"App\">\n        <Header />\n        <LeftSider\n          years={this.state.years}\n          charProfiles={this.state.charProfiles}\n          events={this.state.events}\n          yearArea={this.state.yearArea}\n          tilesMap={tilesMap}\n          handleTileSelect={this.onSelectTileMap.bind(this)}\n          currentTile={this.state.currentTileMap}\n          onSelectYear={this.onSelectYear.bind(this)}\n          onSelectDynasty={this.onSelectDynasty.bind(this)}\n          onSelectChar={this.onSelectChar.bind(this)}\n          onSelectEvent={this.onSelectEvent.bind(this)}\n        />\n        <Layout style={{ position: 'relative', height: 'calc(100% - 60px)' }}>\n          <Content style={{ position: 'relative' }}>\n            <MainBox\n              years={this.state.years}\n              charProfiles={this.state.charProfiles}\n              events={this.state.events}\n              yearArea={this.state.yearArea}\n              onSelectYear={this.onSelectYear.bind(this)}\n              onSelectDynasty={this.onSelectDynasty.bind(this)}\n              onSelectChar={this.onSelectChar.bind(this)}\n              onSelectEvent={this.onSelectEvent.bind(this)}\n              currentYear={this.state.currentYear}\n              currentTileMap={this.state.currentTileMap}\n              trigger={this.state.Trigger}\n              currentDynasty={this.state.currentDynasty}\n              currentChar={this.state.currentChar}\n              experience={experience}\n            />\n          </Content>\n          <ToolBox>\n            <div className=\"toolbox_item\">\n              <span>{' '}</span>\n            </div>\n            <div className=\"toolbox_item\">\n              <span>人物人生轨迹面板</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ showExp: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>显示其他国家</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ showOther: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked/>\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>在地图上显示选中人物</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ showChar: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked />\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>历史人物分布热力图</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ heatmap: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>历史事件分布热力图</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ eventHeatmap: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>工具栏</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ toolbar: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked />\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>轨迹跟踪</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ track: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>开启评论</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ comment: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked />\n            </div>\n          </ToolBox>\n          <EventDrawer showComment={this.state.Trigger.comment} eventProfile={this.state.events && this.state.currentEvent !== null ? [].concat(...this.state.events[this.state.currentDynasty])[this.state.currentEvent] : undefined} />\n          <CharDrawer showComment={this.state.Trigger.comment} charProfile={this.state.charProfiles && this.state.currentChar !== null ? [].concat(...Object.values(this.state.charProfiles))[this.state.currentChar] : undefined} />\n        </Layout>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}