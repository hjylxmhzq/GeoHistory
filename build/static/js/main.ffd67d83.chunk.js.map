{"version":3,"sources":["compnents/LeftSider/LeftSider.less","compnents/MainBox/mainBox.less","compnents/charts/YearSelector.less","compnents/Search/Search.less","compnents/ToolBox/index.less","compnents/Header/Header.js","compnents/charts/YearSelector.js","compnents/charts/DataAnalysis.js","compnents/YearModal/YearModal.js","compnents/Search/Search.js","compnents/MainBox/utils/timeMap.js","compnents/LeftSider/LeftSider.js","compnents/MainBox/utils/sketch.js","compnents/MainBox/utils/renderer.js","config/config.js","compnents/MainBox/utils/layerOptions.js","compnents/MainBox/utils/label.js","compnents/MainBox/utils/popUpTemplate.js","compnents/Drawer/Common.js","compnents/MainBox/MainBox.js","compnents/Comment/index.js","compnents/Drawer/EventDrawer.js","compnents/Drawer/CharDrawer.js","compnents/ToolBox/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","selectors","chartContainer","yearModal","play_button","traj_set","charts","searchWrapper","toolbox_button","Header","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","visible","setState","react_default","a","createElement","className","props","title","onClick","handleClickbout","bind","about","modal","aboutTitle","okText","footer","onCancel","handleCancel","Component","defaultProps","YearSelector","React","createRef","lineChartsInstance","option","data","_this2","echarts","init","current","setOption","tooltip","trigger","xAxis","map","item","yAxis","show","splitLine","interval","name","dataZoom","startValue","type","visualMap","top","right","series","areaStyle","on","e","index","dataIndex","console","log","length","renderChart","style","s","ref","creatChartOption","text","left","textStyle","color","formatter","min","max","inRange","colorLightness","radius","center","roseType","label","normal","labelLine","lineStyle","smooth","length2","itemStyle","shadowBlur","shadowColor","animationType","animationEasing","animationDelay","idx","Math","random","DataAnalysis","selectedBoundary","i","attributes","Name","value","parseInt","Area","height","createEventOption","xData","yData","axisPointer","grid","bottom","containLabel","axisTick","alignWithLabel","barWidth","EventDataAnalysis","_this3","_this4","result","selectedEvents","forEach","HCityName","entries","push","YearModal","_React$Component","apply","arguments","inherits","createClass","key","onOk","handleOk","centered","width","children","Option","AutoComplete","OptGroup","Complete","_Component","dataSource","initData","includes","dy","split","onSelect","payload","evtOrPpl","actionType","endsWith","event","findIndex","HName","people","find","year","Year","exist","keys","y","c","indexOf","content","options","group","opt","auto_complete","dropdownClassName","dropdownMatchSelectWidth","dropdownStyle","size","placeholder","optionLabelProp","onSearch","handleSearch","input","suffix","icon","timeMap","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","nameMap","夏","商","周","春秋","战国","秦","汉","三国","晋","十六国","南北","隋","唐","五代十国","宋","元","民","清","民国","searchName","Select","SubMenu","Menu","LeftSider","collapsed","yearLabel","undefined","showYearModal","showWiki","currentYear","currentPeople","currentEvent","eventFID","onSelectEvent","charFID","onSelectChar","dynasty","onSelectDynasty","onSelectYear","toString","tmp","handleYearSelect","years","menu","maxHeight","overflowY","yearList","_loop","_Object$keys","_i","Item","events","es_select","showSearch","onChange","handleEventSelect","allowClear","concat","LeftSider_Option","FID","handlePeopleSelect","charProfiles","char","tiles","currentTile","tilesMap","tile","handleTileSelect","dropdown","overlay","es_button","join","YearSelector_YearSelector","handleBarClick","yearArea","openYearModal","YearModal_YearModal","src","encodeURIComponent","seamless","frameborder","position","createSketch","Obj","Sketch","sketch","view","layer","graphicsLayer2","rightDrawShow","selectGrphics","query","baseBoundaryFeatureLayer","createQuery","graphic","geometry","spatialRelationship","queryFeatures","then","results","boundaryhighlight","remove","featureLayerView","highlight","features","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","feature","err","return","baseEventFeatureLayer","eventHightLight","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","heatMapRenderer","colorStops","ratio","maxPixelIntensity","minPixelIntensity","simpleMarkerRender","symbol","font","family","weight","simplePeopleMarkerRender","Config","staticPath","gisRestServer","dojoServer","commentApi","baseBoundaryFeatureUrl","config","baseEventFeatureUrl","basePeopleFeatureUrl","boundaryLayerOption","url","renderer","field","defaultSymbol","uniqueValueInfos","outline","labelingInfo","haloColor","labelPlacement","labelExpressionInfo","expression","eventLayerOption","popupTemplate","fieldInfos","fieldName","format","places","digitSeparator","peopleLayerOption","definitionExpression","RightDrawer","isOpen","drawer","placement","closable","isShow","mask","marginTop","onClose","fontSize","DataAnalysis_DataAnalysis","DataAnalysis_EventDataAnalysis","onMouseOver","onHoverResult","Intro","trim","ButtonGroup","Button","Group","MainBox","dojoUrl","tileMapUrl","isPlay","playControllerText","sliderValue","showBoundary","showChar","showEvent","showTraj","bntLabel","speedChange","speed","expIdx","showExp","playTimer","stopUpdate","changeBaseMap","initMap","mapPoint","popup","open","location","action","prevProps","prevState","eventHeatmap","heatmap","changeBoundaryLayer","currentTileMap","toolbar","ui","add","trajCtrl","currentChar","basePeopleFeatureLayer","showOther","prevChar","t","clearInterval","polyline","paths","currentDynasty","loadingPath","traj","play","setInterval","shift","manifestIdx","nodeIdx","whenLayerView","layerView","where","setTimeout","unshift","queryChar","cnt","interpolation","pointA","pointB","inverse","angle","PI","round","pointC","x","abs","tan","k","x0","y0","dist","sqrt","incre","pnt","tmpPnt1","tmpPnt2","pntSet","EsriLoader","loadModules","_ref","_ref2","slicedToArray","GraphicsLayer","Map","Basemap","TileLayer","MapView","FeatureLayer","Graphic","Zoom","Compass","ScaleBar","tileLayer","baseMap","baseLayers","id","basemap","layers","container","zoom","layout","compass","scaleBar","unit","graphics","padding","slice","eventLayerIndex","searchKey","String","_this5","goTo","duration","easing","message","error","_this6","_this7","timeline","es_timeline","experience","handleExpNav","dot","Place","Content","empty","description","Fragment","handleShowPath","handleSpeedDown","toFixed","handleSpeedUp","handleLayerPlay","Common_RightDrawer","handleMouseOverSearchResult","Search_Complete","onSearchSelect","TextArea","Input","Editor","onSubmit","submitting","es_form","rows","htmlType","loading","CustomComment","comments","fetch","res","json","catch","getComments","target","comment","user","boxShadow","es_comment","author","Comment_Editor","EventDrawer","eventProfile","STime","ETime","textIndent","showComment","Comment_CustomComment","CharDrawer","iconURL","charProfile","align","textAlign","zi","hao","Home","ToolBox","_getPrototypeOf2","_len","args","Array","_key","showDrawer","overflow","onMouseEnter","onMouseLeave","getContainer","http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer","http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer","http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineCommunity/MapServer","https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer","Layout","App","Trigger","d","d1","yearData","profileData","eventData","experienceData","Promise","all","dataList","processYear","processYearArea","_ref3","toConsumableArray","values","compnents_Header_Header","compnents_LeftSider_LeftSider","onSelectTileMap","compnents_MainBox_MainBox","ToolBox_ToolBox","es_switch","b","objectSpread","checkedChildren","unCheckedChildren","divider","defaultChecked","Drawer_EventDrawer","Drawer_CharDrawer","isLocalhost","Boolean","window","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","src_App_0","document","getElementById","URL","process","href","origin","addEventListener","response","contentType","headers","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.ffd67d83.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectors\":\"iOiwMT-1TxxMLRgACDatD\",\"chartContainer\":\"_1b6gGgX2FWpShEK49xJe08\",\"yearModal\":\"_2LbZuV3XVAR4R6WKIkC_jX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"play_button\":\"_1A0Na77mvvdzir8BTaZ7Pe\",\"traj_set\":\"_2HdPtE-HXij_-jd6mw586p\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"charts\":\"oEFAxP79VZEMLn9X4OCbh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchWrapper\":\"_5UDuQJuf1p8makYUDFNrA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbox_button\":\"WU8AGThvmAIisORzI8l_3\"};","import React,{Component} from 'react'\r\nimport { Modal } from 'antd'\r\nimport './Header.css'\r\nclass Header extends Component{\r\n    static defaultProps = {\r\n        title:'中国历史地理数据展示平台',\r\n        about:'关于我们',\r\n        aboutTitle:'ESRI DEMO-历史地理信息展示平台',\r\n\r\n    }\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            visible:false\r\n        }\r\n    }\r\n\r\n    handleClickbout(){\r\n        this.setState({\r\n            visible: true,\r\n      });\r\n    }\r\n    handleCancel(){\r\n        this.setState({\r\n            visible: false,\r\n      });\r\n    }\r\n    render(){\r\n        return(\r\n            <div className='header'>\r\n                <span className={'title'}>{this.props.title}</span>\r\n                <button className={'about'} onClick={this.handleClickbout.bind(this)}>{this.props.about}</button>\r\n                <Modal\r\n                    title={this.props.aboutTitle}\r\n                    visible={this.state.visible}\r\n                    okText={'确认'}\r\n                    footer={null}\r\n                    onCancel={this.handleCancel.bind(this)}\r\n              >\r\n                    <p>{'简介：该平台展示了唐朝不同年代的疆界范围、人物轨迹及历史事件，并支持查询搜索等功能。'}</p>\r\n                    <p>{'制作成员：侯骁谋 劳大钊 吴宇东 詹文'}</p>\r\n              </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Header","import React, { Component } from 'react';\nimport echarts from 'echarts/lib/echarts';\nimport 'echarts/lib/chart/line';\nimport 'echarts/lib/component/tooltip';\nimport 'echarts/lib/component/dataZoom';\nimport 'echarts/lib/component/title';\nimport s from './YearSelector.less';\n\nclass YearSelector extends Component {\n    constructor(props) {\n        super(props);\n        this.charts = React.createRef();\n        this.lineChartsInstance = null;\n        this.option = null;\n\n    }\n\n    renderChart(data) {\n        //console.log(data)\n        this.lineChartsInstance = echarts.init(this.charts.current);\n        this.lineChartsInstance.setOption(this.option = {\n            tooltip: {\n                trigger: 'axis'\n            },\n            xAxis: {\n                data: data.map(function (item) {\n                    return item[0];\n                })\n            },\n            yAxis: {\n                show: true,\n                splitLine: {\n                    show: false\n                },\n                interval: 500000000,\n                name: '面积'\n            },\n            dataZoom: [{\n                startValue: '2014-06-01'\n            }, {\n                type: 'inside'\n            }],\n            visualMap: {\n                top: 10,\n                right: 10,\n            },\n            series: {\n                name: '疆域面积',\n                type: 'line',\n                data: data.map(function (item) {\n                    return item[1];\n                }),\n                areaStyle: {}\n            }\n        },true);\n        this.lineChartsInstance.on('click', 'series', e => {\n            const index = e.dataIndex;\n            const name = e.name\n            console.log(e)\n            this.props.onClick(index,name);\n        });\n    }\n\n    componentDidMount() {\n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    componentDidUpdate() {\n        //console.log(this.renderChart)\n        \n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    render() {\n        return (\n            <div style={this.props.style} className={s.charts}>\n                <div  ref={this.charts}></div>\n            </div>\n        )\n    }\n}\n\nexport { YearSelector };","import React, { Component } from 'react';\nimport echarts from 'echarts/lib/echarts';\nimport 'echarts/lib/chart/pie';\nimport 'echarts/lib/chart/bar';\nimport 'echarts/lib/component/tooltip';\nimport 'echarts/lib/component/dataZoom';\nimport 'echarts/lib/component/title';\nimport { optionalCallExpression } from '@babel/types';\n\nconst creatChartOption = (data) => ({\n\n    title: {\n        text: '分布状况',\n        left: 'center',\n        textStyle: {\n            color: '#111'\n        }\n    },\n\n    tooltip: {\n        trigger: 'item',\n        formatter: \"{a} <br/>{b} : ({d}%)\"\n    },\n\n    visualMap: {\n        show: false,\n        min: 80,\n        max: 600,\n        inRange: {\n            colorLightness: [0, 1]\n        }\n    },\n    series: [\n        {\n            name: '比例',\n            type: 'pie',\n            radius: '55%',\n            center: ['50%', '50%'],\n            data,\n            roseType: 'radius',\n            label: {\n                normal: {\n                    textStyle: {\n                        color: 'rgba(255, 255, 255, 0.3)'\n                    }\n                }\n            },\n            labelLine: {\n                normal: {\n                    lineStyle: {\n                        color: 'rgba(255, 255, 255, 0.3)'\n                    },\n                    smooth: 0.2,\n                    length: 10,\n                    length2: 20\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#c23531',\n                    shadowBlur: 200,\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\n                }\n            },\n\n            animationType: 'scale',\n            animationEasing: 'elasticOut',\n            animationDelay: function (idx) {\n                return Math.random() * 200;\n            }\n        }\n    ]\n});\n\n\nclass DataAnalysis extends Component {\n    constructor(props) {\n        super(props);\n        this.charts = React.createRef();\n        this.lineChartsInstance = null;\n        this.option = creatChartOption(props.data);\n\n    }\n\n    renderChart(data) {\n        //console.log(data)\n        data = data.selectedBoundary.map(i => {\n            return {\n                name: i.attributes.Name,\n                value: parseInt(i.attributes.Area)\n            }\n        })\n        console.log(data);\n        this.lineChartsInstance = echarts.init(this.charts.current);\n        this.lineChartsInstance.setOption(creatChartOption(data), true);\n        this.lineChartsInstance.on('click', 'series', e => {\n            const index = e.dataIndex;\n            const name = e.name\n            console.log(e)\n            this.props.onClick(index, name);\n        });\n    }\n\n    componentDidMount() {\n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    componentDidUpdate() {\n        //console.log(this.renderChart)\n\n        if (this.props.data.selectedBoundary.length > 0) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    render() {\n        return (\n            <div style={{ height: 200 }}>\n                <div style={{ height: 200 }} ref={this.charts}></div>\n            </div>\n        )\n    }\n}\n\n\nconst createEventOption = (xData, yData) => {\n    const option = {\n\n        title: {\n            text: '统计',\n            left: 'center',\n            textStyle: {\n                color: '#111'\n            }\n        },\n        color: ['#3398DB'],\n        tooltip: {\n            trigger: 'axis',\n            axisPointer: {            // 坐标轴指示器，坐标轴触发有效\n                type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\n            }\n        },\n        grid: {\n            left: '3%',\n            right: '4%',\n            bottom: '3%',\n            containLabel: true\n        },\n        xAxis: [\n            {\n                type: 'category',\n                data: xData,\n                axisTick: {\n                    alignWithLabel: true\n                }\n            }\n        ],\n        yAxis: [\n            {\n                type: 'value'\n            }\n        ],\n        series: [\n            {\n                name: '数量',\n                type: 'bar',\n                barWidth: '70%',\n                data: yData\n            }\n        ]\n    };\n    return option;\n}\n\nclass EventDataAnalysis extends Component {\n    constructor(props) {\n        super(props);\n        this.charts = React.createRef();\n        this.lineChartsInstance = null;\n        this.option = createEventOption(props.data);\n\n    }\n\n    renderChart(data) {\n        //console.log(data)\n        const result = {};\n        data = data.selectedEvents.forEach(i => {\n            if (result[i.attributes.HCityName]) {\n                result[i.attributes.HCityName]++;\n            } else {\n                result[i.attributes.HCityName] = 1;\n            }\n        });\n        const xData = [];\n        const yData = [];\n        Object.entries(result).forEach(i => {\n            xData.push(i[0]);\n            yData.push(i[1]);\n        })\n        console.log(xData, yData);\n        this.lineChartsInstance = echarts.init(this.charts.current);\n        this.lineChartsInstance.setOption(createEventOption(xData, yData), true);\n        this.lineChartsInstance.on('click', 'series', e => {\n            const index = e.dataIndex;\n            const name = e.name\n            console.log(e)\n            this.props.onClick(index, name);\n        });\n    }\n\n    componentDidMount() {\n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    componentDidUpdate() {\n        //console.log(this.renderChart)\n\n        if (this.props.data.selectedBoundary.length > 0) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    render() {\n        return (\n            <div style={{ height: 200 }}>\n                <div style={{ height: 200 }} ref={this.charts}></div>\n            </div>\n        )\n    }\n}\n\n\nexport { DataAnalysis, EventDataAnalysis };","import { Modal } from 'antd';\nimport React from 'react';\n\nexport class YearModal extends React.Component {\n\n  render() {\n    return (\n      <div>\n        <Modal\n          title=\"Basic Modal\"\n          visible={this.props.visible}\n          onOk={this.props.handleOk}\n          onCancel={this.props.handleCancel}\n          centered\n          width={'80%'}\n        >\n          {this.props.children}\n        </Modal>\n      </div>\n    );\n  }\n}","import React, { Component } from 'react';\nimport s from './Search.less';\nimport { Icon, Input, AutoComplete } from 'antd';\n\nconst { Option, OptGroup } = AutoComplete;\n\n\nexport class Complete extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dataSource: this.initData('')\n        }\n    }\n\n    onSelect(i) {\n        console.log(this.props)\n        if (i.includes(':')) {\n            const dy = i.split(': ')[0];\n            this.props.onSelect({\n                type: 0,\n                payload: dy\n            })\n            let evtOrPpl = i.split(': ')[1];\n            let actionType = evtOrPpl.endsWith('年') ? 3 : this.props.event[dy].findIndex(i => i.HName === evtOrPpl) !== -1 ? 2 : 1;\n            let payload = null;\n            if (actionType === 1) {\n                payload = this.props.people[dy].find(i => i.Name === evtOrPpl)['FID'];\n                this.props.onSelect({\n                    type: actionType,\n                    payload\n                })\n            } else if (actionType === 2) {\n                payload = this.props.event[dy].find(i => i.HName === evtOrPpl)['FID'];\n                console.log(this.props.event[dy].find(i => i.HName === evtOrPpl))\n                this.props.onSelect({\n                    type: actionType,\n                    payload\n                })\n            } else if (actionType === 3) {\n                payload = this.props.year[dy].find(i => i.Year === evtOrPpl)['idx'];\n                this.props.onSelect({\n                    type: actionType,\n                    payload\n                })\n            }\n        }\n    }\n\n    initData(value) {\n        if (!this.props.year) {\n            return null;\n        }\n        const year = [];\n        let exist = [];\n        Object.keys(this.props.year).forEach(y => {\n            this.props.year[y].forEach(c => {\n                if (exist.indexOf(y + ': ' + c.Year) === -1) {\n                    year.push({\n                        title: y,\n                        content: y + ': ' + c.Year\n                    })\n                    exist.push(y + ': ' + c.Year)\n                }\n            })\n        });\n        const event = [];\n        exist = [];\n        Object.keys(this.props.event).forEach(y => {\n            this.props.event[y].forEach(c => {\n                if (c.HName.includes(value)) {\n                    if (exist.indexOf(y + ': ' + c.HName) === -1) {\n                        event.push({\n                            title: y,\n                            content: y + ': ' + c.HName\n                        })\n                    }\n                }\n            })\n        });\n        const people = [];\n        exist = [];\n        Object.keys(this.props.people).forEach(y => {\n            this.props.people[y].forEach(c => {\n                if (c.Name.includes(value)) {\n                    if (exist.indexOf(y + ': ' + c.Name) === -1) {\n                        people.push({\n                            title: y,\n                            content: y + ': ' + c.Name\n                        })\n                    }\n                }\n            })\n        });\n        const dataSource = [\n            {\n                title: '年代',\n                children: year,\n            },\n            {\n                title: '事件',\n                children: event\n            },\n            {\n                title: '人物',\n                children: people\n            },\n        ];\n\n        function renderTitle(title) {\n            return (\n                <span>\n                    {title}\n                </span>\n            );\n        }\n\n        const options = dataSource\n            .map(group => (\n                <OptGroup key={group.title} label={renderTitle(group.title)}>\n                    {group.children.map((opt, index) => (\n                        <Option key={opt.title + opt.content + index} value={opt.content}>\n                            <span className=\"certain-search-item-count\">{opt.content}</span>\n                        </Option>\n                    ))}\n                </OptGroup>\n            ))\n\n        this.setState({\n            dataSource: options\n        })\n    }\n    handleSearch(value) {\n        this.initData(value);\n    }\n    render() {\n        return (\n            <div className={s.searchWrapper} style={{ width: 250 }}>\n                <AutoComplete\n                    className=\"certain-category-search\"\n                    dropdownClassName=\"certain-category-search-dropdown\"\n                    dropdownMatchSelectWidth={true}\n                    dropdownStyle={{ width: 300 }}\n                    size=\"large\"\n                    style={{ width: '100%' }}\n                    dataSource={this.state.dataSource}\n                    placeholder=\"搜索\"\n                    optionLabelProp=\"value\"\n                    onSearch={this.handleSearch.bind(this)}\n                    onSelect={this.onSelect.bind(this)}\n                >\n                    <Input suffix={<Icon type=\"search\" className=\"certain-category-icon\" />} />\n                </AutoComplete>\n            </div>\n        );\n    }\n}","export const timeMap = {\n    0: [0, 1],\n    1: [1, 2],\n    2: [2, 5],\n    3: [5, 10],\n    4: [10, 15],\n    5: [15, 19],\n    6: [19, 38],\n    7: [38, 41],\n    8: [41, 47],\n    9: [47, 51],\n    10: [51, 61],\n    11: [61, 69],\n    12: [69, 82],\n    13: [82, 91],\n    14: [91, 103],\n    15: [103, 111],\n    16: [111, 117],\n    17: [117, 128],\n    18: [128, 134]\n}\n\nexport const nameMap = {\n    '夏': [0, 1],\n    '商': [1, 2],\n    '周': [2, 5],\n    '春秋': [5, 10],\n    '战国': [10, 15],\n    '秦': [15, 19],\n    '汉': [19, 38],\n    '三国': [38, 41],\n    '晋': [41, 47],\n    '十六国': [47, 51],\n    '南北': [51, 61],\n    '隋': [61, 69],\n    '唐': [69, 82],\n    '五代十国': [82, 91],\n    '宋': [91, 103],\n    '元': [103, 111],\n    '民': [111, 117],\n    '清': [117, 128],\n    '民国': [128, 134]\n}\n\nexport function searchKey(dy) {\n    let result = 0;\n    Object.keys(timeMap).forEach(i => {\n        if (timeMap[i][1] > dy && timeMap[i][0] <= dy) {\n            result = parseInt(i);\n        }\n    })\n    return result;\n}\n\nexport function searchName(dy) {\n    let result = 0;\n    Object.keys(nameMap).forEach(i => {\n        if (nameMap[i][1] > dy && nameMap[i][0] <= dy) {\n            result = i;\n        }\n    })\n    return result;\n}\n\n","import React, { Component } from 'react'\r\nimport { Menu, Dropdown, Button } from 'antd';\r\nimport s from './LeftSider.less';\r\nimport { Select } from 'antd';\r\nimport { YearSelector } from '../charts';\r\nimport { YearModal } from '../YearModal/YearModal';\r\nimport Search from '../Search';\r\nimport { searchKey, searchName } from '../MainBox/utils/timeMap';\r\nconst { Option } = Select;\r\nconst { SubMenu } = Menu;\r\n\r\nclass LeftSider extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      collapsed: false,\r\n      yearLabel: undefined,\r\n      showYearModal: false,\r\n      showWiki:false,\r\n      currentYear: ['唐', '619年'],\r\n      currentPeople: null,\r\n      currentEvent: null\r\n    };\r\n  }\r\n\r\n  handleEventSelect(eventFID) {\r\n    if(this.props.onSelectEvent) this.props.onSelectEvent(eventFID)\r\n    this.setState({ currentEvent: eventFID });\r\n  }\r\n  handlePeopleSelect(charFID) {\r\n    if(this.props.onSelectChar) this.props.onSelectChar(charFID)\r\n    this.setState({ currentPeople: charFID });\r\n  }\r\n  handleYearSelect(dynasty, year, idx) {\r\n    //console.log(dynasty,year,idx)\r\n    if(this.props.onSelectDynasty) {\r\n      this.props.onSelectDynasty(dynasty)\r\n    }\r\n    if(this.props.onSelectYear) this.props.onSelectYear(idx);\r\n    this.setState({ currentYear: [dynasty, year]});\r\n  }\r\n\r\n  handleBarClick(idx,name){\r\n    if(name.split(\" \").toString()+\"年\"!==this.state.currentYear.toString()){\r\n      let tmp = name.split(\" \")\r\n      tmp[1]+='年'\r\n      this.setState({currentYear:tmp})\r\n      this.handleYearSelect(tmp[0],tmp[1],idx)\r\n    }\r\n  }\r\n\r\n  openYearModal() {\r\n    this.setState({ showYearModal: true });\r\n  }\r\n\r\n  render() {\r\n\r\n    const years = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {\r\n          ((years) => {\r\n            const yearList = [];\r\n            for (let name of Object.keys(years)) {\r\n              yearList.push(\r\n                <SubMenu title={name} key={name}>\r\n                  {years[name].map((year, index) => <Menu.Item key={name + year.Year + index} onClick={this.handleYearSelect.bind(this, name, year.Year, year.idx)}>{year.Year}</Menu.Item>)}\r\n                </SubMenu>\r\n              )\r\n            }\r\n            return yearList;\r\n          })(this.props.years)\r\n        }\r\n      </Menu>\r\n    );\r\n    const events = (\r\n      <Select showSearch\r\n        onChange = {this.handleEventSelect.bind(this)}\r\n        allowClear={true}\r\n        placeholder={`${this.state.currentYear[0]}: 历史事件`} \r\n        style={{ width:140,overflowY: 'auto' }}>\r\n        {this.props.events[this.state.currentYear[0]] &&\r\n          this.props.events[this.state.currentYear[0]].map(\r\n            event => (\r\n              <Option value={event.FID} key={event.FID}>\r\n                {event.HName}\r\n              </Option>\r\n            )\r\n          )}\r\n      </Select>\r\n    );\r\n    const people = (\r\n      <Select showSearch\r\n        onChange = {this.handlePeopleSelect.bind(this)}\r\n        allowClear={true}\r\n        placeholder={`${this.state.currentYear[0]}: 历史人物`} \r\n        style={{ width:140,overflowY: 'auto' }}>\r\n        {this.props.charProfiles[this.state.currentYear[0]] &&\r\n          this.props.charProfiles[this.state.currentYear[0]].map(\r\n            char => (\r\n              <Option value={char.FID} key={char.FID}>\r\n                {char.Name}\r\n              </Option>\r\n            )\r\n          )}\r\n      </Select>\r\n    );\r\n    const tiles = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {this.props.currentTile &&\r\n          Object.keys(this.props.tilesMap).map(\r\n            tile => (\r\n              <Menu.Item\r\n                key={tile}\r\n                onClick={() => { this.props.handleTileSelect(tile) }}>\r\n                {this.props.tilesMap[tile]}\r\n              </Menu.Item>\r\n            )\r\n          )}\r\n      </Menu>\r\n    );\r\n    return (\r\n      <div>\r\n      <div className={s.selectors}>\r\n        <div>\r\n          <Dropdown overlay={years} trigger={['click']}>\r\n            <Button>{this.state.currentYear.join(' ') || '年代边界'}</Button>\r\n          </Dropdown>\r\n        </div>\r\n        <div>{people}</div>\r\n        <div>{events}</div>\r\n        <div>\r\n          <Dropdown overlay={tiles} trigger={['click']}>\r\n            <Button>{`底图: ${this.props.tilesMap[this.props.currentTile] || 'Community'}`}</Button>\r\n          </Dropdown>\r\n        </div>\r\n      </div>\r\n      <div className={s.chartContainer}>\r\n          <YearSelector onClick={this.handleBarClick.bind(this)}  data={this.props.yearArea} />\r\n      </div>\r\n      <div className={s.yearModal}>\r\n        <Button onClick={this.openYearModal.bind(this)}>年代变化</Button>\r\n        <YearModal\r\n          visible={this.state.showYearModal}\r\n          handleCancel={() => this.setState({ showYearModal: false })}\r\n          handleOk={() => this.setState({ showYearModal: false })}\r\n        >\r\n          <Button onClick={() => this.setState({ showWiki: !this.state.showWiki })}>显示百科</Button>\r\n          {\r\n            this.state.showWiki &&\r\n            <iframe name=\"wiki_frame\" title=\"baike\" src={\"https://baike.baidu.com/item/\" + encodeURIComponent(searchName(this.state.currentYear[0])) + \"朝\"} height=\"600px\" width=\"1240px\" seamless frameborder=\"0\"></iframe>\r\n          }\r\n          <YearSelector\r\n            style={{ position: 'relative', left: 0, right: 0, bottom: 0 }}\r\n            onClick={this.handleBarClick.bind(this)}\r\n            data={this.props.yearArea} />\r\n        </YearModal>\r\n      </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftSider","function createSketch(Obj, Sketch) {\n    const sketch = new Sketch({\n        view: Obj.view,\n        layer: Obj.graphicsLayer2\n    });\n    sketch.on(\"create\", (event) => {\n        // check if the create event's state has changed to complete indicating\n        // the graphic create operation is completed.\n        Obj.setState({ rightDrawShow: true });\n        const selectedBoundary = [];\n        const selectedEvents = [];\n        if (event.state === \"complete\") {\n            Obj.selectGrphics = [];\n            let query = Obj.baseBoundaryFeatureLayer.createQuery();\n            Obj.selectGrphics.push(event.graphic);\n            query.geometry = event.graphic.geometry;\n            query.spatialRelationship = \"intersects\";\n            Obj.baseBoundaryFeatureLayer.queryFeatures(query).then(function (results) {\n                // prints an array of all the features in the service to the console\n                if (Obj.boundaryhighlight) {\n                    Obj.boundaryhighlight.remove();\n                }\n                Obj.boundaryhighlight = Obj.featureLayerView.highlight(results.features);\n                if (results.features.length) {\n                    for (let feature of results.features) {\n                        selectedBoundary.push(feature);\n                    }\n                    Obj.setState({ selectedBoundary });\n                }\n            });\n            query = Obj.baseEventFeatureLayer.createQuery();\n            Obj.selectGrphics.push(event.graphic);\n            query.geometry = event.graphic.geometry;\n            query.spatialRelationship = \"intersects\";\n            Obj.baseEventFeatureLayer.queryFeatures(query).then(function (results) {\n                // prints an array of all the features in the service to the console\n                if (Obj.eventHightLight) {\n                    Obj.eventHightLight.remove();\n                }\n                Obj.eventHightLight = Obj.featureLayerView.highlight(results.features);\n                if (results.features.length) {\n                    for (let feature of results.features) {\n                        selectedEvents.push(feature);\n                    }\n                    Obj.setState({ selectedEvents });\n                }\n            });\n        }\n    });\n    sketch.on(\"update\", (event) => {\n        // check if the create event's state has changed to complete indicating\n        // the graphic create operation is completed.\n        Obj.setState({ rightDrawShow: true });\n    });\n    return sketch;\n}\n\nexport { createSketch };\n","export const renderer = {\n    type: \"unique-value\",  // autocasts as new UniqueValueRenderer()\n    field: \"China\",\n    defaultSymbol: { type: \"simple-fill\" },  // autocasts as new SimpleFillSymbol()\n    uniqueValueInfos: [{\n        // All features with value of \"North\" will be blue\n        value: '0',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [51, 51, 204, 0.5],\n            outline: {  // autocasts as new SimpleLineSymbol()\n                color: [220, 220, 220, 0.5],\n                width: \"0.5px\"\n            }\n        }\n    }, {\n        // All features with value of \"East\" will be green\n        value: '1',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [151, 51, 204, 0.5],\n            outline: {  // autocasts as new SimpleLineSymbol()\n                color: [220, 220, 220, 0.5],\n                width: \"0.5px\"\n            }\n        }\n    }, {\n        // All features with value of \"South\" will be red\n        value: '2',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [51, 51, 44, 0.5],\n            outline: {  // autocasts as new SimpleLineSymbol()\n                color: [220, 220, 220, 0.5],\n                width: \"0.5px\"\n            }\n        }\n    }, {\n        // All features with value of \"West\" will be yellow\n        value: '3',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [251, 51, 204, 0.5],\n            outline: {  // autocasts as new SimpleLineSymbol()\n                color: [220, 220, 220, 0.5],\n                width: \"0.5px\"\n            }\n        }\n    }]\n};\n\nexport const heatMapRenderer = {\n    type: \"heatmap\",\n    colorStops: [\n        { color: \"rgba(63, 40, 102, 0)\", ratio: 0 },\n        { color: \"#472b77\", ratio: 0.083 },\n        { color: \"#4e2d87\", ratio: 0.166 },\n        { color: \"#563098\", ratio: 0.249 },\n        { color: \"#5d32a8\", ratio: 0.332 },\n        { color: \"#6735be\", ratio: 0.415 },\n        { color: \"#7139d4\", ratio: 0.498 },\n        { color: \"#7b3ce9\", ratio: 0.581 },\n        { color: \"#853fff\", ratio: 0.664 },\n        { color: \"#a46fbf\", ratio: 0.747 },\n        { color: \"#c29f80\", ratio: 0.83 },\n        { color: \"#e0cf40\", ratio: 0.913 },\n        { color: \"#ffff00\", ratio: 1 }\n    ],\n    maxPixelIntensity: 65,\n    minPixelIntensity: 0\n};\n\nconst textSymbol = {\n    type: \"text\", // autocasts as new TextSymbol()\n    color: \"#4e2d87\",\n    text: \"\\ue643\", // esri-icon-map-pin\n    font: {\n        // autocasts as new Font()\n        size: 22,\n        family: \"CalciteWebCoreIcons\", // Esri Icon Font\n        weight: 'lighter'\n    }\n};\n\nconst textPeopleSymbol = {\n    type: \"text\", // autocasts as new TextSymbol()\n    color: \"#c29f80\",\n    text: \"\\ue675\", // esri-icon-map-pin\n    font: {\n        // autocasts as new Font()\n        size: 22,\n        family: \"CalciteWebCoreIcons\", // Esri Icon Font\n        weight: 'lighter'\n    }\n};\n\nconst simpleMarker = {\n    type: \"simple-marker\", // autocasts as new SimpleMarkerSymbol()\n    size: 25,\n    color: [125, 255, 255],\n};\n\nexport const simpleMarkerRender = {\n    type: \"simple\", // autocasts as new SimpleRenderer()\n    symbol: textSymbol\n};\n\nexport const simplePeopleMarkerRender = {\n    type: \"simple\", // autocasts as new SimpleRenderer()\n    symbol: textPeopleSymbol\n};","export const Config = {\n    staticPath: 'http://tony-space.top:8007/',\n    gisRestServer: 'https://arcserver.tony-space.top:8001/arcgis/rest/services/',\n    dojoServer: \"http://tony-space.top:8007/arcgis_js_api/library/4.11/dojo/dojo.js\",\n    commentApi: \"http://tony-space.top:8007/api/esri-\"\n}","import { eventPopUpTemplate, peoplePopUpTemplate } from \"./popUpTemplate\";\nimport { simpleMarkerRender, simplePeopleMarkerRender, renderer } from \"./renderer\";\nimport { labelingInfo } from './label';\nimport config from '../../../config';\n\nconst baseBoundaryFeatureUrl = config.gisRestServer + \"country_boundary/MapServer/\";\nconst baseEventFeatureUrl = config.gisRestServer + \"events_point/MapServer/\";\nconst basePeopleFeatureUrl = config.gisRestServer + \"experience/MapServer/0\";\n\nexport const boundaryLayerOption = {\n    url: baseBoundaryFeatureUrl + '69',\n    // id: '0',\n    visible: true,\n    renderer,\n    labelingInfo\n};\nexport const eventLayerOption = {\n    url: baseEventFeatureUrl + '12',\n    //id: '4',\n    visible: true,\n    popupTemplate: eventPopUpTemplate,\n    renderer: simpleMarkerRender\n};\nexport const peopleLayerOption = {\n    url: basePeopleFeatureUrl,\n    visible: true,\n    renderer: simplePeopleMarkerRender,\n    popupTemplate: peoplePopUpTemplate,\n    definitionExpression: 'Sequence=0 and Dynasty_ID=12'\n};","export const labelingInfo = [\n    {\n        // autocasts as new LabelClass()\n        symbol: {\n            type: \"text\",  // autocasts as new TextSymbol()\n            color: \"#555\",\n            haloColor: \"black\",\n            font: {  // autocast as new Font()\n                family: \"KaiTi\",\n                size: 18,\n            }\n        },\n        labelPlacement: \"above-center\",\n        labelExpressionInfo: {\n            expression: \"$feature.Name\"\n        }\n    }\n];\n","export const eventPopUpTemplate = {\n    title:'事件信息',\n    content:[\n        {\n            type:'fields',\n            fieldInfos:[\n                {\n                    fieldName:'HName',\n                    label:'名称',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'HCityName',\n                    label:'发生地',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'Intro',\n                    label:'简介',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'STime',\n                    label:'开始时间',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'ETime',\n                    label:'结束时间',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                }\n            ]\n        }\n    ]\n};\n\nexport const peoplePopUpTemplate = {\n    title:'人物经历',\n    content:[\n        {\n            type:'fields',\n            fieldInfos:[\n                {\n                    fieldName:'Poet',\n                    label:'姓名',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'Year',\n                    label:'年份',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'Place',\n                    label:'地点',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                },\n                {\n                    fieldName:'Content',\n                    label:'经历',\n                    format:{\n                        places:0,\n                        digitSeparator:true\n                    }\n                }\n            ]\n        }\n    ]\n};\n","import React,{Component} from 'react'\nimport {Drawer} from 'antd'\nimport { DataAnalysis, EventDataAnalysis } from '../charts';\n\nexport class RightDrawer extends Component{\n  constructor(){\n    super();\n    this.state = {\n      isOpen:false\n    }\n  }\n\n  render(){\n    //console.log(this.props.data)\n    return(\n      <Drawer\n      title={\"检索\"}\n      placement=\"right\"\n      closable={true}\n      visible={this.props.isShow}\n      mask={false}\n      style={{marginTop:'60px'}}\n      onClose={this.props.onClose}\n      >\n          <div style={{fontSize: 18}}>疆域</div><br/>\n          <DataAnalysis data={this.props.data}/>\n          {\n              this.props.data.selectedBoundary.map(i => {\n                  return (\n                      <div>\n                          名称：{i.attributes.Name} <br/>\n                          面积：{i.attributes.Area} <br/>\n                          <hr/>\n                      </div>\n                  )\n              })\n          }\n          <div style={{fontSize: 18}}>事件</div><br/>\n          <EventDataAnalysis data={this.props.data}/>\n          {\n              this.props.data.selectedEvents.map(i => {\n                  return (\n                      <div onMouseOver={() => { this.props.onHoverResult(i.geometry, i.attributes.HName, i.attributes.Intro) }}>\n                          名称：{i.attributes.HName} <br/>\n                          城市：{i.attributes.HCityName.trim() ? i.attributes.HCityName : '无城市信息'} <br/>\n                          <hr/>\n                      </div>\n                  )\n              })\n          }\n      </Drawer>\n  )}\n}\n","import React, { Component } from 'react'\r\nimport { Button, Switch, Timeline, Empty, Icon,message } from 'antd';\r\nimport EsriLoader from 'esri-loader'\r\nimport s from './mainBox.less';\r\nimport { createSketch, heatMapRenderer, simpleMarkerRender, simplePeopleMarkerRender, boundaryLayerOption, eventLayerOption, peopleLayerOption } from './utils';\r\nimport { YearSelector } from '../charts';\r\nimport Search from '../Search';\r\nimport config from '../../config';\r\nimport { searchKey, searchName } from './utils/timeMap';\r\nimport { RightDrawer } from '../Drawer/Common';\r\nimport { YearModal } from '../YearModal/YearModal';\r\nimport { eventPopUpTemplate,peoplePopUpTemplate } from './utils/popUpTemplate';\r\n\r\nconst ButtonGroup = Button.Group;\r\nconst BOUNDARY_LAYER_NUM = 121;\r\n\r\nclass MainBox extends Component {\r\n  constructor() {\r\n    super()\r\n    this.dojoUrl = config.dojoServer;\r\n    this.tileMapUrl = \"http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineCommunity/MapServer\"\r\n    this.baseBoundaryFeatureUrl = config.gisRestServer + \"country_boundary/MapServer/\";\r\n    this.baseEventFeatureUrl = config.gisRestServer + \"events_point/MapServer\";\r\n    this.basePeopleFeatureUrl = config.gisRestServer + \"experience/MapServer/\";\r\n    this.state = {\r\n      isPlay: false,\r\n      playControllerText: '播放边界变化',\r\n      sliderValue: 0,\r\n      selectedBoundary: [],\r\n      rightDrawShow: false,\r\n      showYearModal: false,\r\n      showBoundary: true,\r\n      showChar: true,\r\n      showEvent: true,\r\n      selectedEvents: [],\r\n      showTraj: 0,\r\n      bntLabel: '显示轨迹',\r\n      speedChange: false,\r\n      speed: 101,\r\n      expIdx: -1,\r\n      showExp: false,\r\n    }\r\n    this.playTimer = null;\r\n    this.stopUpdate = true;\r\n    this.selectGrphics = [];\r\n    this.changeBaseMap = () => { };\r\n\r\n  }\r\n  componentWillMount() {\r\n    this.initMap()\r\n  }\r\n  handleMouseOverSearchResult(mapPoint, name, content, e) {\r\n    this.view && this.view.popup.open({\r\n      // Set the popup's title to the coordinates of the location\r\n      title: name,\r\n      content,\r\n      location: mapPoint, // Set the location of the popup to the clicked location\r\n    });\r\n  }\r\n  onSearchSelect(action) {\r\n    console.log('action', action);\r\n    switch (action.type) {\r\n      case 0: this.props.onSelectDynasty(action.payload); break;\r\n      case 1: this.props.onSelectChar(action.payload); break;\r\n      case 2: this.props.onSelectEvent(action.payload); break;\r\n      case 3: this.props.onSelectYear(action.payload); break;\r\n    }\r\n  }\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.currentYear !== this.props.currentYear ||\r\n      prevProps.trigger.eventHeatmap !== this.props.trigger.eventHeatmap ||\r\n      prevProps.trigger.heatmap !== this.props.trigger.heatmap) this.changeBoundaryLayer.call(this, this.props.currentYear);\r\n    if (prevProps.currentTileMap !== this.props.currentTileMap) {\r\n      console.log(this.props.currentTileMap)\r\n      this.changeBaseMap(this.props.currentTileMap);\r\n    }\r\n    if (prevState.selectedBoundary !== this.state.selectedBoundary) {\r\n\r\n      this.setState({ rightDrawShow: true });\r\n    }\r\n    // trigger start\r\n    if (this.sketch) {\r\n      if (!this.props.trigger.toolbar) {\r\n        this.view.ui.remove(this.sketch);\r\n      } else {\r\n        this.view.ui.add(this.sketch, 'top-left');\r\n      }\r\n    }\r\n\r\n    // trigger end\r\n    //人物点显示\r\n    this.trajCtrl(prevProps.currentChar);\r\n    this.basePeopleFeatureLayer && (this.basePeopleFeatureLayer.visible = this.props.trigger.showChar);\r\n    //\r\n    if(this.baseBoundaryFeatureLayer){\r\n      if(!this.props.trigger.showOther) this.baseBoundaryFeatureLayer.definitionExpression = `China>0`\r\n      else this.baseBoundaryFeatureLayer.definitionExpression = undefined\r\n    }\r\n\r\n  }\r\n\r\n  trajCtrl(prevChar) {\r\n    if (!this.props.trigger.showChar) {\r\n      if (this.t) {\r\n        clearInterval(this.t)\r\n        this.t = null\r\n      }\r\n      if (this.state.showTraj > 0) this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n      if (this.graphic) this.graphic.geometry = undefined\r\n      if (this.polyline) this.polyline.paths = []\r\n      return\r\n    }\r\n    if (prevChar >= 0 && this.props.currentChar === undefined) {\r\n      if (this.t) {\r\n        clearInterval(this.t)\r\n        this.t = null\r\n      }\r\n      if (this.state.showTraj > 0) this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n      if (this.graphic) this.graphic.geometry = undefined\r\n      if (this.polyline) this.polyline.paths = []\r\n      if (this.basePeopleFeatureLayer) this.basePeopleFeatureLayer.definitionExpression = `Sequence=0 and Dynasty='${this.props.currentDynasty}'`\r\n    }else if(prevChar >= 0 && this.props.currentChar >= 0 && prevChar!==this.props.currentChar){\r\n        if (this.t) {\r\n          clearInterval(this.t)\r\n          this.t = null\r\n        }\r\n        if (this.state.showTraj > 0) this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n        if (this.graphic) this.graphic.geometry = undefined\r\n        if (this.polyline) this.polyline.paths = []\r\n        if (this.view) this.loadingPath()\r\n        if (this.basePeopleFeatureLayer) this.basePeopleFeatureLayer.definitionExpression = 'Poet_ID=' + this.props.currentChar\r\n     }else if (prevChar || this.props.currentChar) {\r\n      if (this.basePeopleFeatureLayer && prevChar !== this.props.currentChar) this.basePeopleFeatureLayer.definitionExpression = 'Poet_ID=' + this.props.currentChar\r\n      if (this.state.showTraj === 0) {\r\n        //console.log('loading...')\r\n        if (this.t) {\r\n          clearInterval(this.t)\r\n          this.t = null\r\n        }\r\n\r\n        if (this.polyline) this.polyline.paths = []\r\n        if (this.view) this.loadingPath()\r\n      } else if (this.state.showTraj % 2 !== 0) {\r\n        //console.log('showing trajectory...')\r\n        if (this.state.speedChange) {\r\n          if (this.t) {\r\n            clearInterval(this.t)\r\n            this.t = null\r\n          }\r\n        }\r\n        if (this.traj && this.traj.length > 0) {\r\n          if (!this.t) {\r\n            this.play()\r\n          }\r\n        }\r\n      } else {\r\n        //console.log('pausing...')\r\n        if (this.t) {\r\n          clearInterval(this.t)\r\n          this.t = null\r\n        }\r\n      }\r\n    } else {\r\n      if (this.basePeopleFeatureLayer) this.basePeopleFeatureLayer.definitionExpression = `Sequence=0 and Dynasty='${this.props.currentDynasty}'`\r\n    }\r\n  }\r\n\r\n\r\n  play() {\r\n    //if(this.state.showTraj===1)this.view.goTo({center:this.traj[0],zoom:5},{duration:500,easing:'in-out-expo'})\r\n    this.t = setInterval(() => {\r\n      if (this.traj.length > 0) {\r\n        let tmp = this.traj.shift()\r\n        //console.log(tmp)\r\n        //this.view.goTo({center:tmp,zoom:6},{duration:1000,easing:'in-out-expo'})\r\n        this.polyline.paths.push(tmp)\r\n        this.graphic.geometry = this.polyline\r\n        let manifestIdx = this.nodeIdx.shift()\r\n        if (this.polyline.paths.length === manifestIdx) {\r\n\r\n          this.view.whenLayerView(this.basePeopleFeatureLayer).then((layerView) => {\r\n            let query = this.basePeopleFeatureLayer.createQuery();\r\n            query.where = 'Poet_ID=' + this.props.currentChar\r\n            this.basePeopleFeatureLayer.queryFeatures(query).then((result) => {\r\n              //this.basePeopleFeatureLayer.definitionExpression = 'Poet_ID='+this.props.currentChar+' and Sequence<='+(result.features.length-this.nodeIdx.length-1)\r\n              this.setState({ expIdx: this.state.expIdx + 1 }, () => { })\r\n              let feature = result.features[result.features.length - this.nodeIdx.length - 1]\r\n              let highlight = layerView.highlight(feature)\r\n              setTimeout(() => {\r\n                highlight.remove()\r\n              },700)\r\n            })\r\n          });\r\n        } else {\r\n          this.nodeIdx.unshift(manifestIdx)\r\n        }\r\n      } else {\r\n        clearInterval(this.t)\r\n        this.t = null\r\n        this.setState({ showTraj: 0, bntLabel: '显示轨迹', speedChange: false })\r\n        setTimeout(() => {\r\n          this.setState({ expIdx: -1 })\r\n        }, 1000)\r\n      }\r\n    }, this.state.speed);\r\n\r\n  }\r\n\r\n  loadingPath() {\r\n    this.view.whenLayerView(this.basePeopleFeatureLayer).then(() => {\r\n      let queryChar = this.basePeopleFeatureLayer.createQuery();\r\n      queryChar.where = \"Poet_ID=\" + this.props.currentChar\r\n      this.basePeopleFeatureLayer.queryFeatures(queryChar).then((result) => {\r\n        let feature = result.features\r\n        this.traj = []\r\n        this.cnt = 0\r\n        this.nodeIdx = [1]\r\n        for (let i = 0; i < feature.length - 1; i++) {\r\n          this.traj.push.apply(this.traj, this.interpolation(feature[i].geometry, feature[i + 1].geometry, i % 2 === 0 ? 1 : -1))\r\n          this.nodeIdx.push(this.cnt)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  interpolation(pointA, pointB, inverse) {\r\n    //calculate center\r\n    let angle = (Math.PI / 6 + Math.round(Math.random()) / 5)\r\n    let pointC = { x: 0, y: 0 }\r\n    if (pointA.x === pointB.x) {\r\n      pointC.x = pointA.x + Math.abs(pointB.y - pointA.y) / 2 * Math.tan(angle)\r\n      pointC.y = pointA.y\r\n    } else {\r\n      let k = -(pointB.x - pointA.x) / (pointB.y - pointA.y)\r\n      let x0 = (pointA.x + pointB.x) / 2\r\n      let y0 = (pointA.y + pointB.y) / 2\r\n      let dist = inverse * Math.sqrt((pointA.x - pointB.x) * (pointA.x - pointB.x) + (pointA.y - pointB.y) * (pointA.y - pointB.y)) / 2 * Math.tan(angle)\r\n      pointC.x = x0 + dist * Math.sqrt(1 / (1 + k * k))\r\n      pointC.y = y0 + dist * Math.sqrt(1 / (1 + k * k)) * k\r\n    }\r\n    let t = 0\r\n    let incre = 0.1 / Math.sqrt((pointA.x - pointB.x) * (pointA.x - pointB.x) + (pointA.y - pointB.y) * (pointA.y - pointB.y))\r\n    let pnt = { x: 0, y: 0 }, tmpPnt1 = { x: 0, y: 0 }, tmpPnt2 = { x: 0, y: 0 }\r\n    let pntSet = []\r\n    while (t <= 1) {\r\n      tmpPnt1.x = (1 - t) * pointA.x + t * pointC.x\r\n      tmpPnt1.y = (1 - t) * pointA.y + t * pointC.y\r\n      tmpPnt2.x = (1 - t) * pointC.x + t * pointB.x\r\n      tmpPnt2.y = (1 - t) * pointC.y + t * pointB.y\r\n      pnt.x = (1 - t) * tmpPnt1.x + t * tmpPnt2.x\r\n      pnt.y = (1 - t) * tmpPnt1.y + t * tmpPnt2.y\r\n      pntSet.push([pnt.x, pnt.y])\r\n      this.cnt++\r\n      t += incre\r\n    }\r\n    pntSet.push([pointB.x, pointB.y])\r\n    this.cnt++\r\n    return pntSet\r\n  }\r\n\r\n  initMap() {\r\n    EsriLoader.loadModules([\r\n      \"esri/layers/GraphicsLayer\",\r\n      \"esri/widgets/Sketch\",\r\n      \"esri/Map\",\r\n      \"esri/Basemap\",\r\n      \"esri/layers/TileLayer\",\r\n      \"esri/views/MapView\",\r\n      \"esri/layers/FeatureLayer\",\r\n      'esri/Graphic',\r\n      'esri/widgets/Zoom',\r\n      \"esri/widgets/Compass\",\r\n      'esri/widgets/ScaleBar',\r\n      \"dojo/domReady!\"\r\n    ], this.dojoUrl).then(([GraphicsLayer, Sketch, Map, Basemap, TileLayer, MapView, FeatureLayer, Graphic, Zoom, Compass, ScaleBar]) => {\r\n      this.FeatureLayer = FeatureLayer;\r\n      this.Basemap = Basemap;\r\n      this.graphicsLayer2 = new GraphicsLayer();\r\n\r\n      this.baseBoundaryFeatureLayer = new FeatureLayer(boundaryLayerOption);\r\n      this.baseEventFeatureLayer = new FeatureLayer(eventLayerOption);\r\n      this.basePeopleFeatureLayer = new FeatureLayer(peopleLayerOption);\r\n\r\n      this.changeBaseMap = (tileMapUrl) => {\r\n        let tileLayer = new TileLayer({\r\n          url: tileMapUrl\r\n        });\r\n        let baseMap = new Basemap({\r\n          baseLayers: [tileLayer],\r\n          id: 'myBaseMap'\r\n        });\r\n        if (this.map) {\r\n          this.map.basemap = baseMap;\r\n        }\r\n      }\r\n\r\n      let tileLayer = new TileLayer({\r\n        url: this.tileMapUrl\r\n      });\r\n      let basemap = new Basemap({\r\n        baseLayers: [tileLayer],\r\n        id: 'myBaseMap'\r\n      });\r\n      this.map = new Map({\r\n        basemap,\r\n        layers: [\r\n          this.graphicsLayer2,\r\n          this.baseEventFeatureLayer,\r\n          this.basePeopleFeatureLayer,\r\n          this.baseBoundaryFeatureLayer,\r\n        ]\r\n      });\r\n      this.view = new MapView({\r\n        center: [115, 32.1],\r\n        map: this.map,\r\n        container: \"mapDiv\",\r\n        zoom: 5\r\n      });\r\n      this.view.whenLayerView(this.baseBoundaryFeatureLayer).then((layerView) => {\r\n        this.featureLayerView = layerView;\r\n      });\r\n      this.graphic = new Graphic()\r\n      let zoom = new Zoom({\r\n        view: this.view,\r\n        layout: 'horizontal'\r\n      })\r\n      let compass = new Compass({\r\n        view: this.view\r\n      });\r\n      let scaleBar = new ScaleBar({\r\n        view: this.view,\r\n        unit: 'metric'\r\n      })\r\n      this.sketch = createSketch(this, Sketch);\r\n      this.graphic.symbol = {\r\n        type: \"simple-line\",\r\n        color: [226, 119, 40],\r\n        width: 1.5\r\n      };\r\n      this.polyline = {\r\n        type: 'polyline',\r\n        paths: []\r\n      }\r\n      this.sketch = createSketch(this, Sketch);\r\n      this.view.graphics.add(this.graphic)\r\n      this.view.ui.padding = { top: 80, left: 30, right: 0, bottom: 0 };\r\n      this.view.ui.remove('zoom')\r\n      this.view.ui.add(zoom)\r\n      this.view.ui.add(compass)\r\n      this.view.ui.add(scaleBar, 'bottom-right');\r\n      this.view.ui.add(this.sketch, \"top-left\");\r\n\r\n    })\r\n  }\r\n\r\n  changeBoundaryLayer(index, name) {\r\n    if (!this.map || !this.FeatureLayer) {\r\n      return 0;\r\n    }\r\n    if (this.baseEventFeatureLayer) {\r\n      if (this.props.trigger.eventHeatmap) {\r\n        eventLayerOption.renderer = heatMapRenderer;\r\n      } else {\r\n        eventLayerOption.renderer = simpleMarkerRender;\r\n      }\r\n    }\r\n    if (this.basePeopleFeatureLayer) {\r\n      if (this.props.trigger.heatmap) {\r\n        peopleLayerOption.renderer = heatMapRenderer;\r\n      } else {\r\n        peopleLayerOption.renderer = simplePeopleMarkerRender;\r\n      }\r\n    }\r\n    boundaryLayerOption.url = boundaryLayerOption.url.split('/').slice(0, -1).join('/') + '/' + index;\r\n    this.baseBoundaryFeatureLayer = new this.FeatureLayer(boundaryLayerOption);\r\n    const eventLayerIndex = searchKey(index);\r\n    eventLayerOption.url = boundaryLayerOption.url.split('/').slice(0, -1).join('/') + '/' + eventLayerIndex;\r\n    this.baseEventFeatureLayer = new this.FeatureLayer(eventLayerOption);\r\n    this.basePeopleFeatureLayer = new this.FeatureLayer(peopleLayerOption);\r\n    if (this.state.currentDynasty !== this.props.currentDynasty) { peopleLayerOption.definitionExpression = 'Sequence=0 and Dynasty_ID=' + String(this.props.currentDynasty) }\r\n    this.map.layers = [this.graphicsLayer2, this.baseEventFeatureLayer, this.basePeopleFeatureLayer, this.baseBoundaryFeatureLayer];\r\n  }\r\n\r\n  openYearModal() {\r\n    this.setState({ yearModal: true });\r\n  }\r\n\r\n  // handleSliderChange(value) {\r\n  //   if (!this.map) {\r\n  //     return 0;\r\n  //   }\r\n  //   // TO FIX: slider切换年份不生效\r\n  //   this.changeBoundaryLayer(value);\r\n  //   this.setState({ sliderValue: value });\r\n  // }\r\n\r\n  handleLayerPlay() {\r\n    this.stopUpdate = !this.stopUpdate\r\n    this.setState({ isPlay: !this.state.isPlay })\r\n\r\n    this.view.goTo({ center: [115, 32.1], zoom: 4 }, { duration: 1000, easing: 'in-out-expo' })\r\n    let i = 0\r\n    if (this.playTimer) {\r\n      clearInterval(this.playTimer);\r\n      this.playTimer = null;\r\n      this.setState({ playControllerText: '播放边界变化', isPlay: false })\r\n      return;\r\n    }\r\n    this.setState({ playControllerText: '\\u3000暂停播放\\u3000', isPlay: true })\r\n    this.playTimer = setInterval(() => {\r\n      if (i < BOUNDARY_LAYER_NUM) {\r\n        if (i) {\r\n          this.changeBoundaryLayer.call(this, i);\r\n        }\r\n        this.setState({ sliderValue: i });\r\n      }\r\n      else {\r\n        this.stopUpdate = !this.stopUpdate\r\n        this.setState({ isPlay: false })\r\n        this.changeBoundaryLayer.call(this, i);\r\n        clearInterval(this.playTimer);\r\n        this.playTimer = null;\r\n      }\r\n      i++;\r\n      return void 0;\r\n    }, 2000)\r\n  }\r\n\r\n  //人物开关\r\n  \r\n  //trajectory\r\n  handleShowPath() {\r\n    if(this.props.currentChar===null || this.props.currentChar===undefined) message.error('请选择人物',2);\r\n    this.setState({ showTraj: this.props.currentChar ? this.state.showTraj + 1 : 0, bntLabel: this.props.currentChar ? this.state.showTraj % 2 === 0 ? '暂\\u3000停\\u3000 ' : '继\\u3000续\\u3000 ' : '显示轨迹', speedChange: false })\r\n  }\r\n  handleSpeedDown() {\r\n    if (this.state.speed < 191) this.setState({ speed: this.state.speed + 10, speedChange: true })\r\n  }\r\n  handleSpeedUp() {\r\n    if (this.state.speed > 1) this.setState({ speed: this.state.speed - 10, speedChange: true })\r\n  }\r\n  //\r\n  handleExpNav(idx) {\r\n    //console.log(idx)\r\n\r\n    this.view.whenLayerView(this.basePeopleFeatureLayer).then((layerView) => {\r\n      let query = this.basePeopleFeatureLayer.createQuery()\r\n      query.where = `Poet_ID=${this.props.currentChar} and Sequence=${idx}`\r\n      this.basePeopleFeatureLayer.queryFeatures(query).then((result) => {\r\n        let feature = result.features[0]\r\n        let highlight = layerView.highlight(feature)\r\n        setTimeout(() => {\r\n          highlight.remove()\r\n        }, 2000)\r\n        this.view.goTo({ center: feature.geometry, zoom: 6 }, { duration: 1000, easing: 'in-out-expo' })\r\n      })\r\n    })\r\n\r\n  }\r\n  render() {\r\n    //console.log(this.props.startAndEnd)\r\n    let timeline = (\r\n      <Timeline >\r\n        <div className={'charExp'}>人物经历</div>\r\n        {this.props.currentChar >= 0 ? this.props.experience.map((e, idx) => {\r\n          return (<Timeline.Item\r\n            onClick={this.handleExpNav.bind(this, idx)}\r\n            style={{ color: this.state.expIdx === idx ? 'deepskyblue' : '' }}\r\n            dot={idx === this.state.expIdx ? <Icon type=\"loading\" style={{ fontSize: '20px' }} /> : undefined} >\r\n            {e.Year + '年，' + e.Place + '，' + e.Content}</Timeline.Item>)\r\n        }) : <Empty description={'请选择人物'} />}\r\n      </Timeline>\r\n    )\r\n    return (\r\n      <>\r\n        <div id='mapDiv' style={{ height: '100%', width: '100%', padding: '5px' }}></div>\r\n\r\n        {this.props.trigger.showExp ? timeline : undefined}\r\n        <div className={s['traj_set']}>\r\n          <Button icon={this.state.showTraj%2===0?'caret-right':'loading'} onClick={this.handleShowPath.bind(this)}>{this.state.bntLabel}</Button>\r\n          <ButtonGroup>\r\n            <Button icon={'step-backward'} onClick={this.handleSpeedDown.bind(this)}></Button>\r\n            <Button>{'×' + ((101 - this.state.speed) / 100 + 1).toFixed(1)}</Button>\r\n            <Button icon={'step-forward'} onClick={this.handleSpeedUp.bind(this)}></Button>\r\n          </ButtonGroup>\r\n        </div>\r\n        <div className={s['play_button']}>\r\n          <Button onClick={this.handleLayerPlay.bind(this)} icon={this.state.isPlay ? 'loading' : 'caret-right'}>\r\n            {this.state.playControllerText}\r\n          </Button>\r\n        </div>\r\n        {/* <YearSelector onClick={this.changeBoundaryLayer.bind(this)} data={this.props.yearArea} />\r\n        <Button\r\n          style={{ position: 'absolute', right: 70, bottom: 80 }}\r\n          onClick={this.openYearModal.bind(this)}>年代变化</Button>\r\n        <YearModal\r\n          visible={this.state.yearModal}\r\n          handleCancel={() => this.setState({ yearModal: false })}\r\n          handleOk={() => this.setState({ yearModal: false })}\r\n        >\r\n          <Button onClick={() => this.setState({ showWiki: !this.state.showWiki })}>显示百科</Button>\r\n          {\r\n            this.state.showWiki &&\r\n            <iframe name=\"wiki_frame\" title=\"baike\" src={\"https://baike.baidu.com/item/\" + encodeURIComponent(searchName(this.props.currentYear)) + \"朝\"} height=\"600px\" width=\"1240px\" seamless frameborder=\"0\"></iframe>\r\n          }\r\n          <YearSelector\r\n            style={{ position: 'relative', left: 0, right: 0, bottom: 0 }}\r\n            onClick={this.props.onSelectYear}\r\n            data={this.props.yearArea} />\r\n        </YearModal> */}\r\n        <RightDrawer\r\n          isShow={this.state.rightDrawShow}\r\n          onClose={() => this.setState({ rightDrawShow: false })}\r\n          onHoverResult={this.handleMouseOverSearchResult.bind(this)}\r\n          data={{\r\n            years: this.props.years,\r\n            charProfiles: this.props.charProfiles,\r\n            events: this.props.events,\r\n            selectedBoundary: this.state.selectedBoundary,\r\n            selectedEvents: this.state.selectedEvents\r\n          }}\r\n        />\r\n        {\r\n          !this.state.rightDrawShow &&\r\n          <Button\r\n            style={{ position: 'absolute', right: 0, bottom: 3, height: '99%', width: 15, padding: 0 }}\r\n            onClick={() => this.setState({ rightDrawShow: true })}\r\n          >\r\n            &lt;\r\n        </Button>\r\n        }\r\n        <Search\r\n          year={this.props.years}\r\n          event={this.props.events}\r\n          people={this.props.charProfiles}\r\n          onSelect={this.onSearchSelect.bind(this)}\r\n        />\r\n        {/* <Slider\r\n          years={this.props.years}\r\n          value={this.state.sliderValue}\r\n          onChange={this.handleSliderChange.bind(this)}\r\n        /> */}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MainBox","import React from 'react';\nimport { Button, Comment, Form, Input } from 'antd';\nimport config from '../../config';\n\n\nconst { TextArea } = Input;\n\nconst Editor = ({ onChange, onSubmit, submitting, value }) => (\n    <div>\n        <Form.Item>\n            <TextArea rows={4} onChange={onChange} value={value} />\n        </Form.Item>\n        <Form.Item>\n            <Button htmlType=\"submit\" loading={submitting} onClick={onSubmit} type=\"primary\">\n                添加评论\n      </Button>\n        </Form.Item>\n    </div>\n);\nexport class CustomComment extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            comments: [],\n            submitting: false,\n            value: ''\n        }\n    }\n\n    getComments() {\n        const url = config.commentApi + 'getcomments?id=' + this.props.id;\n        fetch(url).then((res) => {\n            return res.json()\n        }).then((json) => {\n            this.setState({ comments: json })\n        }).catch((e) => {\n            this.setState({ comments: [] })\n        })\n    }\n\n    componentDidMount() {\n        this.getComments();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.id !== prevProps.id) {\n            this.getComments();\n        }\n    }\n\n    onChange(e) {\n        const value = e.target.value;\n        this.setState({ value })\n    }\n\n    onSubmit() {\n        const comment = this.state.value;\n        const name = this.props.user ? this.props.user : 'anonymous'\n        const url = config.commentApi + `addcomments?id=${this.props.id}&name=${name}&content=${comment}`;\n        this.setState({ submitting: true });\n        fetch(url).then((res) => {\n            this.setState({ submitting: false })\n            this.getComments();\n        }, (e) => {\n            this.setState({ submitting: false })\n            this.getComments();\n        })\n    }\n\n    render() {\n        return (\n            <div id=\"comments_container\" style={{boxShadow: '0px 0px 5px #e6e6e6', padding: 5 }}>\n                <div style={{fontSize: 18}}>评论</div>\n                {this.state.comments.map(i => {\n                    return (\n                        <Comment\n                            author={<a>{i.name}</a>}\n                            content={\n                                <p>\n                                    {i.content}\n                                </p>\n                            }\n                        />\n                    )\n                })}\n                <Comment\n                    content={\n                        <Editor\n                            onChange={this.onChange.bind(this)}\n                            value={this.state.value}\n                            submitting={this.state.submitting}\n                            onSubmit={this.onSubmit.bind(this)}\n                        />\n                    }\n                />\n            </div>\n        )\n    }\n}","import React,{Component} from 'react'\r\nimport {Drawer, Button,Empty} from 'antd'\r\nimport { CustomComment } from '../Comment';\r\n\r\nclass EventDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      visible:false\r\n    }\r\n  }\r\n\r\n  render(){\r\n    let content = (<div/>)\r\n    if(this.props.eventProfile){\r\n      let eventProfile = this.props.eventProfile\r\n      content = (\r\n        <div>\r\n          <p>{`事件名称：${eventProfile.HName}`}</p>\r\n          <p>{`发生地点：${eventProfile.HCityName}`}</p>\r\n          <p>{`起始时间：${eventProfile.STime}`}</p>\r\n          <p>{`结束时间：${eventProfile.ETime}`}</p>\r\n          <p>{`简介：`}</p>\r\n          <p style={{textIndent:'2em'}}>{eventProfile.Intro}</p>\r\n        </div>\r\n      )\r\n    }else{\r\n      content=(\r\n        <Empty description={'请选择事件'}/>\r\n      )\r\n    }\r\n    return(\r\n      <div>\r\n        <Button style={{position:'absolute',right:350,top:25}} type=\"primary\" onClick={()=>{this.setState({visible:!this.state.visible})}}>\r\n          事件简介\r\n        </Button>\r\n        <Drawer\r\n        title={\"事件简介\"}\r\n        placement=\"right\"\r\n        closable={false}\r\n        visible={this.state.visible}\r\n        mask={false}\r\n        style={{marginTop:'60px'}}\r\n        >\r\n          {content}\r\n          {\r\n            this.props.showComment &&\r\n            <CustomComment id={this.props.eventProfile ? this.props.eventProfile.HName : '-1'} />\r\n          }\r\n        </Drawer>\r\n      </div>\r\n  )}\r\n}\r\n\r\nexport default EventDrawer","import React, { Component } from 'react'\r\nimport { CustomComment } from '../Comment';\r\nimport { Drawer, Button, Empty } from 'antd'\r\n\r\nclass CharDrawer extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      visible: false\r\n    }\r\n    this.iconURL = 'icon/'\r\n  }\r\n\r\n  render() {\r\n    let content = (<div />)\r\n\r\n    if (this.props.charProfile) {\r\n      let charProfile = this.props.charProfile\r\n      //let icon=require(this.iconURL+charProfile.FID+'.jpg')\r\n      content = (\r\n        <div>\r\n          <div style={{ align: 'center', textAlign: 'center' }}>\r\n            <img src={[this.iconURL + charProfile.FID + '.jpg']} height={200} width={200} />\r\n          </div>\r\n          <hr />\r\n          <p>{`姓名：${charProfile.Name}`}</p>\r\n          <p>{`字：${charProfile.zi}`}</p>\r\n          <p>{`号：${charProfile.hao}`}</p>\r\n          <p>{`生年：${charProfile.STime}`}</p>\r\n          <p>{`卒年：${charProfile.ETime}`}</p>\r\n          <p>{`出生地：${charProfile.Home}`}</p>\r\n          <p>{`简介：`}</p>\r\n          <p style={{ textIndent: '2em' }}>{charProfile.Intro}</p>\r\n        </div>\r\n      )\r\n    } else {\r\n      content = (\r\n        <Empty description={'请选择人物'} />\r\n      )\r\n    }\r\n    return (\r\n      <div>\r\n        <Button style={{ position: 'absolute', right: 450, top: 25 }} type=\"primary\" onClick={() => { this.setState({ visible: !this.state.visible }) }}>\r\n          人物简介\r\n        </Button>\r\n        <Drawer\r\n          title={\"人物简介\"}\r\n          placement=\"right\"\r\n          closable={false}\r\n          visible={this.state.visible}\r\n          mask={false}\r\n          style={{ marginTop: '60px' }}\r\n        >\r\n          {content}\r\n          {\r\n            this.props.showComment &&\r\n            <CustomComment id={this.props.charProfile ? this.props.charProfile.Name : '1'} />\r\n          }\r\n        </Drawer>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CharDrawer","import { Drawer, Button } from 'antd';\nimport React from 'react';\nimport s from './index.less';\n\nexport class ToolBox extends React.Component {\n  state = { visible: false, placement: 'left' };\n\n  showDrawer = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n\n  onClose = () => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          overflow: 'hidden',\n          position: 'absolute',\n          width: 20,\n          height: \"100%\"\n        }}\n      >\n        <Button className={s.toolbox_button} onMouseEnter={this.showDrawer}>\n          &gt;\n        </Button>\n        <Drawer\n          title=\"工具箱\"\n          placement=\"left\"\n          closable={true}\n          onClose={this.onClose}\n          visible={this.state.visible}\n          mask={false}\n          onMouseLeave={this.onClose}\n          getContainer={false}\n          style={{height: 'calc(100% - 64px)', top: 64}}\n        >\n          {this.props.children}\n        </Drawer>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Header from './compnents/Header/Header'\nimport LeftSider from './compnents/LeftSider/LeftSider'\nimport MainBox from './compnents/MainBox/MainBox'\nimport EventDrawer from './compnents/Drawer/EventDrawer'\nimport { Layout, Switch,Divider } from 'antd';\nimport './App.css';\nimport CharDrawer from './compnents/Drawer/CharDrawer';\nimport Config from './config';\nimport { ToolBox } from './compnents/ToolBox';\n\nconst staticPath = Config.staticPath;\n\nconst tilesMap = {\n  'http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer': 'Warm',\n  'http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer': 'PurplishBlue',\n  'http://cache1.arcgisonline.cn/arcgis/rest/services/ChinaOnlineCommunity/MapServer': 'Community',\n  'https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer': 'Satellite',\n  \n};\n\n\nconst { Content } = Layout\nclass App extends Component {\n  constructor() {\n    super()\n    this.state = {\n      charProfiles: [],\n      years: [],\n      events: [],\n      experience: [],\n      yearArea: [],\n      Trigger: {\n        heatmap: false,\n        eventHeatmap: false,\n        toolbar: true,\n        comment: true,\n        showChar: true,\n        showExp: false,\n        showOther: true\n      },\n      currentYear: 69,\n      currentTileMap: 'topo',\n      currentChar: null,\n      currentDynasty: \"唐\",\n      currentEvent: null,\n    }\n  }\n\n  onSelectYear(id) {\n    this.setState({ currentYear: id });\n  }\n\n  onSelectTileMap(currentTileMap) {\n    this.setState({ currentTileMap })\n  }\n\n  onSelectDynasty(dynasty) {\n    this.setState({ currentDynasty: dynasty })\n  }\n\n  processYearArea(data) {\n    const result = [];\n    Object.keys(data).forEach(d => {\n      Object.keys(data[d][0]).forEach(d1 => {\n        result.push([\n          d + ' ' + d1,\n          data[d][0][d1]\n        ])\n      })\n    });\n    return result;\n  }\n\n  processYear(data) {\n    let idx = 0;\n    Object.keys(data).forEach(d => {\n      data[d].forEach((item, index) => {\n        data[d][index] = {\n          Year: data[d][index] + '年',\n          idx\n        }\n        idx++;\n      });\n    });\n    return data;\n  }\n  //handle character selection\n  onSelectChar(charFID) {\n    this.setState({ currentChar: charFID })\n\n  }\n\n  onSelectEvent(eventFID) {\n    this.setState({ currentEvent: eventFID })\n  }\n\n  componentDidMount() {\n    const yearData = fetch(staticPath + 'json/year.json').then(res => res.json())\n    const profileData = fetch(staticPath + 'json/profile.json').then(res => res.json())\n    const eventData = fetch(staticPath + 'json/event.json').then(res => res.json())\n    const experienceData = fetch(staticPath + 'json/experience.json').then(res => res.json())\n    const yearArea = fetch(staticPath + 'json/area.json').then(res => res.json())\n    Promise.all([yearData, profileData, eventData, experienceData, yearArea]).then((dataList) => {\n      console.log(dataList)\n      this.setState({\n        years: this.processYear(dataList[0]),\n        charProfiles: dataList[1],\n        events: dataList[2],\n        experience: dataList[3],\n        yearArea: this.processYearArea(dataList[4])\n      })\n    }).catch((err) => {\n      console.error(err);\n    })\n  }\n\n  render() {\n    console.log(this);\n    let experience = []\n    let trash = null\n    if (this.state.experience && this.state.currentChar !== null) {\n      [].concat(...Object.values(this.state.experience)).map((e) => { e[\"Poet ID\"] === String(this.state.currentChar) ? experience.push(e) : trash = undefined })\n    }\n    return (\n      <div className=\"App\">\n        <Header />\n        <LeftSider\n          years={this.state.years}\n          charProfiles={this.state.charProfiles}\n          events={this.state.events}\n          yearArea={this.state.yearArea}\n          tilesMap={tilesMap}\n          handleTileSelect={this.onSelectTileMap.bind(this)}\n          currentTile={this.state.currentTileMap}\n          onSelectYear={this.onSelectYear.bind(this)}\n          onSelectDynasty={this.onSelectDynasty.bind(this)}\n          onSelectChar={this.onSelectChar.bind(this)}\n          onSelectEvent={this.onSelectEvent.bind(this)}\n        />\n        <Layout style={{ position: 'relative', height: 'calc(100% - 60px)' }}>\n          <Content style={{ position: 'relative' }}>\n            <MainBox\n              years={this.state.years}\n              charProfiles={this.state.charProfiles}\n              events={this.state.events}\n              yearArea={this.state.yearArea}\n              onSelectYear={this.onSelectYear.bind(this)}\n              onSelectDynasty={this.onSelectDynasty.bind(this)}\n              onSelectChar={this.onSelectChar.bind(this)}\n              onSelectEvent={this.onSelectEvent.bind(this)}\n              currentYear={this.state.currentYear}\n              currentTileMap={this.state.currentTileMap}\n              trigger={this.state.Trigger}\n              currentDynasty={this.state.currentDynasty}\n              currentChar={this.state.currentChar}\n              experience={experience}\n            />\n          </Content>\n          <ToolBox>\n            <div className=\"toolbox_item\">\n              <span>{' '}</span>\n            </div>\n            <div className=\"toolbox_item\">\n              <span>人物人生轨迹面板</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ showExp: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\n            </div>\n            <Divider />\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>显示其他国家</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ showOther: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked/>\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>在地图上显示选中人物</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ showChar: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked />\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>历史人物分布热力图</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ heatmap: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>历史事件分布热力图</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ eventHeatmap: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" />\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>工具栏</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ toolbar: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked />\n            </div>\n            <Divider />\n            <div className=\"toolbox_item\">\n              <span>开启评论</span><Switch onChange={b => this.setState({ Trigger: { ...this.state.Trigger, ...{ comment: b } } })} checkedChildren=\"开\" unCheckedChildren=\"关\" defaultChecked />\n            </div>\n          </ToolBox>\n          <EventDrawer showComment={this.state.Trigger.comment} eventProfile={this.state.events && this.state.currentEvent !== null ? [].concat(...this.state.events[this.state.currentDynasty])[this.state.currentEvent] : undefined} />\n          <CharDrawer showComment={this.state.Trigger.comment} charProfile={this.state.charProfiles && this.state.currentChar !== null ? [].concat(...Object.values(this.state.charProfiles))[this.state.currentChar] : undefined} />\n        </Layout>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}