(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{203:function(e,t,a){e.exports={selectors:"iOiwMT-1TxxMLRgACDatD"}},206:function(e,t,a){e.exports={play_button:"_1A0Na77mvvdzir8BTaZ7Pe"}},207:function(e,t,a){e.exports={charts:"oEFAxP79VZEMLn9X4OCbh"}},208:function(e,t,a){e.exports={searchWrapper:"_5UDuQJuf1p8makYUDFNrA"}},212:function(e,t,a){e.exports=a(381)},217:function(e,t,a){},218:function(e,t,a){},380:function(e,t,a){},381:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(5),i=a.n(s),l=(a(217),a(14)),c=a(15),o=a(17),h=a(16),p=a(18),u=a(385),d=(a(218),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(h.a)(t).call(this))).state={visible:!1},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleClickbout",value:function(){this.setState({visible:!0})}},{key:"handleCancel",value:function(){this.setState({visible:!1})}},{key:"render",value:function(){return n.a.createElement("div",{className:"header"},n.a.createElement("span",{className:"title"},this.props.title),n.a.createElement("button",{className:"about",onClick:this.handleClickbout.bind(this)},this.props.about),n.a.createElement(u.a,{title:this.props.aboutTitle,visible:this.state.visible,okText:"\u786e\u8ba4",footer:null,onCancel:this.handleCancel.bind(this)},n.a.createElement("p",null,"\u7b80\u4ecb\uff1a\u8be5\u5e73\u53f0\u5c55\u793a\u4e86\u5510\u671d\u4e0d\u540c\u5e74\u4ee3\u7684\u7586\u754c\u8303\u56f4\u3001\u4eba\u7269\u8f68\u8ff9\u53ca\u5386\u53f2\u4e8b\u4ef6\uff0c\u5e76\u652f\u6301\u67e5\u8be2\u641c\u7d22\u7b49\u529f\u80fd\u3002"),n.a.createElement("p",null,"\u5236\u4f5c\u6210\u5458\uff1a\u4faf\u9a81\u8c0b \u52b3\u5927\u948a \u5434\u5b87\u4e1c \u8a79\u6587")))}}]),t}(r.Component));d.defaultProps={title:"\u5510\u4ee3\u5386\u53f2\u5730\u7406\u6570\u636e\u5c55\u793a\u5e73\u53f0",about:"\u5173\u4e8e\u6211\u4eec",aboutTitle:"ESRI DEMO-\u5510\u671d\u5386\u53f2\u5730\u7406\u4fe1\u606f\u5c55\u793a\u5e73\u53f0"};var y=d,v=a(384),m=a(386),f=a(33),b=a(203),S=a.n(b),g=v.b.SubMenu,E=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(h.a)(t).call(this))).onCollapse=function(t){e.setState({collapsed:t})},e.state={collapsed:!1,yearLabel:void 0,yearSelectedKeys:[],eventSelectedKeys:[],charSelectedKeys:[],currentYear:["Tang",""],currentPeople:null,currentEvent:null},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleSelectChange",value:function(e){if(console.log(e.key[0]),"Y"===e.key[0])if(this.state.yearSelectedKeys)this.state.yearSelectedKeys[0]===e.key?this.setState({yearSelectedKeys:[]}):this.setState({yearSelectedKeys:[e.key]});else{var t=e.key.slice(3);console.log(t),this.setState({yearSelectedKeys:[e.key],yearLabel:t})}"characters"===e.keyPath[1]&&(this.state.charSelectedKeys&&this.state.charSelectedKeys[0]===e.key?this.setState({charSelectedKeys:[]}):this.setState({charSelectedKeys:[e.key]})),"events"===e.keyPath[1]&&(this.state.eventSelectedKeys&&this.state.eventSelectedKeys[0]===e.key?this.setState({eventSelectedKeys:[]}):this.setState({eventSelectedKeys:[e.key]})),this.props.onSelect&&this.props.onSelect(e)}},{key:"handleEventOpen",value:function(e){this.setState({eventSelectedKeys:[]}),this.props.onEventOpen&&this.props.onEventOpen(e)}},{key:"handleCharOpen",value:function(e){this.setState({charSelectedKeys:[]}),this.props.onCharOpen&&this.props.onCharOpen(e)}},{key:"handleYearOpen",value:function(e){this.setState({yearSelectedKeys:[]}),this.props.onYearOpen&&this.props.onYearOpen(e)}},{key:"handleEventSelect",value:function(e){this.setState({currentEvent:e})}},{key:"handlePeopleSelect",value:function(e){this.setState({currentPeople:e})}},{key:"handleYearSelect",value:function(e,t){this.setState({currentYear:[e,t]})}},{key:"render",value:function(){var e=this,t=n.a.createElement(v.b,{style:{maxHeight:500,overflowY:"auto"}},function(t){for(var a=[],r=function(){var r=i[s];a.push(n.a.createElement(g,{title:r,key:r},t[r].map(function(t){return n.a.createElement(v.b.Item,{key:r+t.Year,onClick:e.handleYearSelect.bind(e,r,t.Year)},t.Year)})))},s=0,i=Object.keys(t);s<i.length;s++)r();return a}(this.props.years)),a=n.a.createElement(v.b,{style:{maxHeight:500,overflowY:"auto"}},this.props.events[this.state.currentYear[0]]&&this.props.events[this.state.currentYear[0]].map(function(t){return n.a.createElement(v.b.Item,{key:t.HName,onClick:e.handleEventSelect.bind(e,t.HName)},t.HName)})),r=n.a.createElement(v.b,{style:{maxHeight:500,overflowY:"auto"}},this.props.charProfiles[this.state.currentYear[0]]&&this.props.charProfiles[this.state.currentYear[0]].map(function(t){return n.a.createElement(v.b.Item,{key:t.Name,onClick:e.handlePeopleSelect.bind(e,t.Name)},t.Name)})),s=n.a.createElement(v.b,{style:{maxHeight:500,overflowY:"auto"}},this.props.currentTile&&this.props.tilesMap.map(function(t){return n.a.createElement(v.b.Item,{key:t,onClick:function(){e.props.handleTileSelect(t)}},t)}));return n.a.createElement("div",{className:S.a.selectors},n.a.createElement("div",null,n.a.createElement(m.a,{overlay:t,trigger:["click"]},n.a.createElement(f.a,null,this.state.currentYear.join(" ")||"\u5e74\u4ee3\u8fb9\u754c"))),n.a.createElement("div",null,n.a.createElement(m.a,{overlay:r,trigger:["click"]},n.a.createElement(f.a,null,"".concat(this.state.currentYear[0],": ").concat(this.state.currentPeople||"\u5386\u53f2\u4eba\u7269")))),n.a.createElement("div",null,n.a.createElement(m.a,{overlay:a,trigger:["click"]},n.a.createElement(f.a,null,"".concat(this.state.currentYear[0],": ").concat(this.state.currentEvent||"\u5386\u53f2\u4e8b\u4ef6")))),n.a.createElement("div",null,n.a.createElement(m.a,{overlay:s,trigger:["click"]},n.a.createElement(f.a,null,"\u5e95\u56fe: ".concat(this.props.currentTile||"\u5e95\u56fe")))))}}]),t}(r.Component),w=a(210),k=a(205),j=a.n(k),O=a(206),C=a.n(O);var T={type:"unique-value",field:"China",defaultSymbol:{type:"simple-fill"},uniqueValueInfos:[{value:"0",symbol:{type:"simple-fill",color:[51,51,204,.5]}},{value:"1",symbol:{type:"simple-fill",color:[151,51,204,.5]}},{value:"2",symbol:{type:"simple-fill",color:[51,51,44,.5]}},{value:"3",symbol:{type:"simple-fill",color:[251,51,204,.5]}}]},x=a(24),L=a.n(x),P=(a(336),a(356),a(367),a(379),a(207)),M=a.n(P),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(h.a)(t).call(this,e))).charts=n.a.createRef(),a.lineChartsInstance=null,a.option=null,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderChart",value:function(e){var t=this;this.lineChartsInstance=L.a.init(this.charts.current),this.lineChartsInstance.setOption(this.option={tooltip:{trigger:"axis"},xAxis:{data:e.map(function(e){return e[0]})},yAxis:{show:!0,splitLine:{show:!1},interval:5e8,name:"\u9762\u79ef"},dataZoom:[{startValue:"2014-06-01"},{type:"inside"}],visualMap:{top:10,right:10},series:{name:"\u7586\u57df\u9762\u79ef",type:"line",data:e.map(function(e){return e[1]}),areaStyle:{}}}),this.lineChartsInstance.on("click","series",function(e){var a=e.dataIndex;t.props.onClick(a)})}},{key:"componentDidMount",value:function(){this.props.data.length&&this.renderChart.call(this,this.props.data)}},{key:"componentDidUpdate",value:function(){this.props.data.length&&this.renderChart.call(this,this.props.data)}},{key:"render",value:function(){return n.a.createElement("div",{className:M.a.charts},n.a.createElement("div",{ref:this.charts}))}}]),t}(r.Component),B=a(208),F=a.n(B),Y=a(383),D=a(209),K=a(10),U=Y.a.Option,A=Y.a.OptGroup,I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(h.a)(t).call(this,e))).state={dataSource:a.initData("")},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"initData",value:function(e){var t=this;if(!this.props.year)return null;var a=[];Object.keys(this.props.year).forEach(function(r){t.props.year[r].forEach(function(t){t.Year.includes(e)&&a.push({title:r,content:r+": "+t.Year})})});var r=[];Object.keys(this.props.event).forEach(function(a){t.props.event[a].forEach(function(t){t.HName.includes(e)&&r.push({title:a,content:a+": "+t.HName})})});var s=[];Object.keys(this.props.people).forEach(function(a){t.props.people[a].forEach(function(t){t.Name.includes(e)&&s.push({title:a,content:a+": "+t.Name})})});var i=[{title:"\u5e74\u4ee3",children:a},{title:"\u4e8b\u4ef6",children:r},{title:"\u4eba\u7269",children:s}].map(function(e){return n.a.createElement(A,{key:e.title,label:(t=e.title,n.a.createElement("span",null,t))},e.children.map(function(e,t){return n.a.createElement(U,{key:e.title+e.content+t,value:e.content},n.a.createElement("span",{className:"certain-search-item-count"},e.content))}));var t});this.setState({dataSource:i})}},{key:"handleSearch",value:function(e){this.initData(e)}},{key:"render",value:function(){return n.a.createElement("div",{className:F.a.searchWrapper,style:{width:250}},n.a.createElement(Y.a,{className:"certain-category-search",dropdownClassName:"certain-category-search-dropdown",dropdownMatchSelectWidth:!0,dropdownStyle:{width:300},size:"large",style:{width:"100%"},dataSource:this.state.dataSource,placeholder:"\u641c\u7d22",optionLabelProp:"value",onSearch:this.handleSearch.bind(this)},n.a.createElement(D.a,{suffix:n.a.createElement(K.a,{type:"search",className:"certain-category-icon"})})))}}]),t}(r.Component),R={staticPath:"http://localhost:8887/",gisRestServer:"https://172.20.32.70:6443/arcgis/rest/services/",dojoServer:"http://tony-space.top:8007/arcgis_js_api/library/4.11/dojo/dojo.js"},H={0:[0,1],1:[1,2],2:[2,5],3:[5,10],4:[10,15],5:[15,19],6:[19,38],7:[38,41],8:[41,47],9:[47,51],10:[51,61],11:[61,69],12:[69,82],13:[82,91],14:[91,103],15:[103,111],16:[111,117],17:[117,128],18:[128,134]};var W=a(387),V=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(h.a)(t).call(this))).state={isOpen:!1},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(W.a,{title:"\u68c0\u7d22",placement:"right",closable:!0,visible:this.props.isShow,mask:!1,style:{marginTop:"60px"},onClose:this.props.onClose},n.a.createElement("div",{style:{fontSize:18}},"\u7586\u57df"),n.a.createElement("br",null),this.props.data.selectedBoundary.map(function(e){return n.a.createElement("div",null,"\u540d\u79f0\uff1a",e.Name," ",n.a.createElement("br",null),"\u9762\u79ef\uff1a",e.Area," ",n.a.createElement("br",null),n.a.createElement("hr",null))}))}}]),t}(r.Component),z=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(h.a)(t).call(this))).tangFeatureLayers=[],e.dojoUrl=R.dojoServer,e.tileMapUrl="http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer",e.baseBoundaryFeatureUrl=R.gisRestServer+"country_boundary/MapServer/",e.baseEventFeatureUrl=R.gisRestServer+"events_point/MapServer",e.basePeopleFeatureUrl=R.gisRestServer+"country_boundary/MapServer/",e.highlightSelectChar=[],e.state={isPlay:!1,playControllerText:"\u64ad\u653e\u8fb9\u754c\u53d8\u5316",sliderValue:0,selectedBoundary:[],rightDrawShow:!1},e.playTimer=null,e.stopUpdate=!0,e.selectGrphics=[],e.changeBaseMap=function(){},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.initMap()}},{key:"componentDidUpdate",value:function(e,t){t.selectedBoundary!==this.state.selectedBoundary&&this.setState({rightDrawShow:!0})}},{key:"queryForChar",value:function(){var e=this,t=this.map.layers.items[14];this.view.whenLayerView(t).then(function(a){var r=t.createQuery();r.where="ID="+e.props.charSelected,t.queryFeatures(r).then(function(t){e.highlightSelectChar.length&&e.highlightSelectChar.map(function(e){e.remove()});var r=t.features;e.view.goTo({center:[r[0].geometry.x+3,r[0].geometry.y],zoom:6},{duration:1e3,easing:"in-out-expo"}),setTimeout(function(){e.drawLine(r,a)},1e3)})})}},{key:"initMap",value:function(){var e=this;j.a.loadModules(["esri/layers/GraphicsLayer","esri/widgets/Sketch","esri/Map","esri/Basemap","esri/layers/TileLayer","esri/views/MapView","esri/layers/FeatureLayer","esri/Graphic","esri/widgets/Zoom","esri/widgets/Compass","esri/widgets/ScaleBar","esri/widgets/Search","dojo/domReady!"],this.dojoUrl).then(function(t){var a=Object(w.a)(t,12),r=a[0],n=a[1],s=a[2],i=a[3],l=a[4],c=a[5],o=a[6],h=a[7],p=a[8],u=a[9],d=a[10];a[11];e.FeatureLayer=o,e.graphicsLayer2=new r,e.baseBoundaryFeatureLayer=new o({url:e.baseBoundaryFeatureUrl,id:"0",visible:!0,renderer:T}),e.baseEventFeatureLayer=new o({url:e.baseEventFeatureUrl,id:"4",visible:!0}),e.basePeopleFeatureLayer=new o({url:e.basePeopleFeatureUrl,id:"0",visible:!0}),e.changeBaseMap=function(t){var a=new l({url:t}),r=new i({baseLayers:[a],id:"myBaseMap"});e.map&&(e.map.basemap=r)};var y=new l({url:e.tileMapUrl}),v=new i({baseLayers:[y],id:"myBaseMap"});e.map=new s({basemap:v,layers:[e.baseEventFeatureLayer,e.baseBoundaryFeatureLayer]}),e.view=new c({center:[115,32.1],map:e.map,container:"mapDiv",zoom:5}),e.view.whenLayerView(e.baseBoundaryFeatureLayer).then(function(t){e.featureLayerView=t}),e.graphic=new h;var m=new p({view:e.view,layout:"horizontal"}),f=new u({view:e.view}),b=new d({view:e.view,unit:"metric"}),S=function(e,t){var a=new t({view:e.view,layer:e.graphicsLayer2});return a.on("create",function(t){if("complete"===t.state){var a=e.baseBoundaryFeatureLayer.createQuery();e.selectGrphics.push(t.graphic),a.geometry=t.graphic.geometry,a.spatialRelationship="intersects",e.baseBoundaryFeatureLayer.queryFeatures(a).then(function(t){console.log(t),e.boundaryhighlight&&e.boundaryhighlight.remove(),e.boundaryhighlight=e.featureLayerView.highlight(t.features);var a=[];if(t.features.length){var r=!0,n=!1,s=void 0;try{for(var i,l=t.features[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;a.push(c.attributes)}}catch(o){n=!0,s=o}finally{try{r||null==l.return||l.return()}finally{if(n)throw s}}e.setState({selectedBoundary:a})}})}}),a}(e,n);e.view.graphics.add(e.graphic),e.view.ui.padding={top:80,left:30,right:0,bottom:0},e.view.ui.remove("zoom"),e.view.ui.add(m),e.view.ui.add(f),e.view.ui.add(b,"bottom-right"),e.view.ui.add(S,"top-left");var g=e.map.layers.items.length,E=e.map.layers.items[g-1];e.view.when(function(){return E.when(function(){var e=E.createQuery();return E.queryFeatures(e)})})})}},{key:"changeBoundaryLayer",value:function(e){if(!this.map||!this.FeatureLayer)return 0;var t=new this.FeatureLayer({url:this.baseBoundaryFeatureUrl+e,visible:!0,renderer:T}),a=function(e){var t=0;return Object.keys(H).forEach(function(a){H[a][1]>e&&H[a][0]<=e&&(t=parseInt(a))}),t}(e),r=new this.FeatureLayer({url:this.baseEventFeatureUrl+"/"+a,visible:!0});this.map.layers=[t,r]}},{key:"handleSliderChange",value:function(e){if(!this.map)return 0;this.changeBoundaryLayer(e),this.setState({sliderValue:e})}},{key:"handleLayerPlay",value:function(){var e=this;this.stopUpdate=!this.stopUpdate,this.setState({isPlay:!this.state.isPlay}),this.view.goTo({center:[115,32.1],zoom:4},{duration:1e3,easing:"in-out-expo"});var t=0;if(this.playTimer)return clearInterval(this.playTimer),this.playTimer=null,void this.setState({playControllerText:"\u64ad\u653e\u8fb9\u754c\u53d8\u5316",isPlay:!1});this.setState({playControllerText:"\u6682\u505c\u64ad\u653e",isPlay:!0}),this.playTimer=setInterval(function(){t<121?(t&&e.changeBoundaryLayer.call(e,t),e.setState({sliderValue:t})):(e.stopUpdate=!e.stopUpdate,e.setState({isPlay:!1}),e.changeBoundaryLayer.call(e,t),clearInterval(e.playTimer),e.playTimer=null),t++},2e3)}},{key:"render",value:function(){var e=this;return console.log(this.props),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:"mapDiv",style:{height:"100%",width:"100%",padding:"5px"}}),n.a.createElement("div",{className:C.a.play_button},n.a.createElement(f.a,{onClick:this.handleLayerPlay.bind(this),ghost:!0,icon:this.state.isPlay?"pause":"caret-right"},this.state.playControllerText)),n.a.createElement(N,{onClick:this.changeBoundaryLayer.bind(this),data:this.props.yearArea}),n.a.createElement(V,{isShow:this.state.rightDrawShow,onClose:function(){return e.setState({rightDrawShow:!1})},data:{years:this.props.years,charProfiles:this.props.charProfiles,events:this.props.events,selectedBoundary:this.state.selectedBoundary}}),n.a.createElement(I,{year:this.props.years,event:this.props.events,people:this.props.charProfiles}))}}]),t}(r.Component),_=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(h.a)(t).call(this))).state={isOpen:!1},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(W.a,{title:"\u4e8b\u4ef6\u7b80\u4ecb",placement:"right",closable:!1,visible:this.props.isShow,mask:!1,style:{marginTop:"60px"}},n.a.createElement("p",null,"\u4e8b\u4ef6\u540d\u79f0\uff1a"+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HName:"")),n.a.createElement("p",null,"\u53d1\u751f\u5730\u70b9\uff1a"+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HCityName:"")),n.a.createElement("p",null,"\u8d77\u59cb\u65f6\u95f4\uff1a"+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].STime+" \u5e74":"")),n.a.createElement("p",null,"\u7ed3\u675f\u65f6\u95f4\uff1a"+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].ETime+" \u5e74":"")),n.a.createElement("p",null,"\u4e8b\u4ef6\u7b80\u4ecb\uff1a"),n.a.createElement("p",{style:{textIndent:"2em"}},this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].Intro:""))}}]),t}(r.Component),q=a(388),G=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(q.a,null,n.a.createElement("div",{className:"charExp"},"\u4eba\u7269\u7ecf\u5386"),this.props.exp.map(function(e,t){return n.a.createElement(q.a.Item,{key:t,color:"#dc9123"},e.year+"\u5e74\uff0c"+e.place+"\uff0c"+e.intro)})))}}]),t}(r.Component),Q=a(382),Z=(a(380),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(h.a)(t).call(this))).state={isOpen:!1},e.iconURL="../../icon/",e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement(W.a,{title:"\u4eba\u7269\u7b80\u4ecb",placement:"right",closable:!1,visible:this.props.isShow,mask:!1,style:{marginTop:"60px"}},n.a.createElement("div",{style:{align:"center",textAlign:"center"}},n.a.createElement("img",{alt:"icon",src:this.iconURL+(this.props.charSelected?this.props.charSelected:"-1")+".jpg"})),n.a.createElement("hr",null),n.a.createElement("p",null,"\u59d3\u540d\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Name:"")),n.a.createElement("p",null,"\u5b57\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].zi:"")),n.a.createElement("p",null,"\u53f7\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].hao:"")),n.a.createElement("p",null,"\u751f\u5e74\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].STime+" \u5e74":"")),n.a.createElement("p",null,"\u5352\u5e74\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].ETime+" \u5e74":"")),n.a.createElement("p",null,"\u51fa\u751f\u5730\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Home:"")),n.a.createElement("p",null,"\u7b80\u4ecb\uff1a"),n.a.createElement("p",{style:{textIndent:"2em"}},this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Intro:""))}}]),t}(r.Component)),J=R.staticPath,X=["http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer","dark-gray","streets","hybrid"],$=Q.a.Content,ee=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(o.a)(this,Object(h.a)(t).call(this))).state={yearSelectedKeys:[],charSelectedKeys:[],eventSelectedKeys:[],isYearOpen:!0,isEventOpen:!1,isCharOpen:!1,charProfiles:[],years:[],events:[],experience:[],yearArea:[],curDrawing:0,currentTileMap:"topo",isCharDrawerOpen:!1,isEventDrawerOpen:!1,isCharSelectChangeToAnother:!1,isEventSelectChangeToAnother:!1,isYearSelectChangeToAnother:!1},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onSelectTileMap",value:function(e){this.setState({currentTileMap:e})}},{key:"processYearArea",value:function(e){var t=[];return Object.keys(e).forEach(function(a){Object.keys(e[a][0]).forEach(function(r){t.push([a+" "+r,e[a][0][r]])})}),t}},{key:"componentDidMount",value:function(){var e=this,t=fetch(J+"json/year.json").then(function(e){return e.json()}),a=fetch(J+"json/profile.json").then(function(e){return e.json()}),r=fetch(J+"json/event.json").then(function(e){return e.json()}),n=fetch(J+"json/experience.json").then(function(e){return e.json()}),s=fetch(J+"json/area.json").then(function(e){return e.json()});Promise.all([t,a,r,n,s]).then(function(t){console.log(t),e.setState({years:t[0],charProfiles:t[1],events:t[2],experience:t[3],yearArea:e.processYearArea(t[4])})}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this,t=[];return this.state.experience.length&&this.state.experience.Tang.map(function(a){a.ID===e.state.charSelectedKeys[0]&&t.push(a)}),n.a.createElement("div",{className:"App"},n.a.createElement(y,null),n.a.createElement(E,{years:this.state.years,charProfiles:this.state.charProfiles,events:this.state.events,tilesMap:X,handleTileSelect:this.onSelectTileMap.bind(this),currentTile:this.state.currentTileMap}),n.a.createElement(Q.a,{style:{position:"relative",height:"calc(100% - 60px)"}},n.a.createElement($,{style:{position:"relative"}},n.a.createElement(z,{years:this.state.years,charProfiles:this.state.charProfiles,events:this.state.events,yearArea:this.state.yearArea,yearSelected:this.state.yearSelectedKeys[0],charSelected:this.state.charSelectedKeys[0],eventSelected:this.state.eventSelectedKeys[0],curDrawingPoint:this.handleCurDrawing}),t.length?n.a.createElement(G,{exp:t}):null),n.a.createElement(_,{events:this.state.events,isShow:this.state.isEventDrawerOpen,eventSelected:this.state.eventSelectedKeys[0]}),n.a.createElement(Z,{chars:this.state.charProfiles,isShow:this.state.isCharDrawerOpen,charSelected:this.state.charSelectedKeys[0]})))}}]),t}(r.Component),te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(n.a.createElement(ee,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");te?(function(e,t){fetch(e).then(function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ae(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ae(t,e)})}}()}},[[212,1,2]]]);
//# sourceMappingURL=main.0a5cc8b6.chunk.js.map