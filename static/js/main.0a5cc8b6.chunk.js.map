{"version":3,"sources":["compnents/LeftSider/LeftSider.less","compnents/MainBox/mainBox.less","compnents/charts/YearSelector.less","compnents/Search/Search.less","compnents/Header/Header.js","compnents/LeftSider/LeftSider.js","compnents/MainBox/utils/renderer.js","compnents/charts/YearSelector.js","compnents/Search/Search.js","config/config.js","compnents/MainBox/utils/timeMap.js","compnents/Drawer/Common.js","compnents/MainBox/MainBox.js","compnents/MainBox/utils/sketch.js","compnents/Drawer/EventDrawer.js","compnents/Timelist/ExpTimeline.js","compnents/Drawer/CharDrawer.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","selectors","play_button","charts","searchWrapper","Header","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","visible","setState","react_default","a","createElement","className","props","title","onClick","handleClickbout","bind","about","modal","aboutTitle","okText","footer","onCancel","handleCancel","Component","defaultProps","SubMenu","Menu","LeftSider","onCollapse","collapsed","yearLabel","undefined","yearSelectedKeys","eventSelectedKeys","charSelectedKeys","currentYear","currentPeople","currentEvent","e","console","log","key","slice","keyPath","onSelect","onEventOpen","onCharOpen","onYearOpen","eventName","name","dynasty","year","_this2","years","menu","style","maxHeight","overflowY","yearList","_loop","_Object$keys","_i","push","map","Item","Year","handleYearSelect","keys","length","events","event","HName","handleEventSelect","people","charProfiles","char","Name","handlePeopleSelect","tiles","currentTile","tilesMap","tile","handleTileSelect","s","dropdown","overlay","trigger","es_button","join","concat","renderer","type","field","defaultSymbol","uniqueValueInfos","value","symbol","color","YearSelector","React","createRef","lineChartsInstance","option","data","echarts","init","current","setOption","tooltip","xAxis","item","yAxis","show","splitLine","interval","dataZoom","startValue","visualMap","top","right","series","areaStyle","on","index","dataIndex","renderChart","ref","Option","AutoComplete","OptGroup","Complete","_Component","dataSource","initData","inherits","createClass","forEach","y","c","includes","content","options","children","group","label","opt","width","auto_complete","dropdownClassName","dropdownMatchSelectWidth","dropdownStyle","size","placeholder","optionLabelProp","onSearch","handleSearch","input","suffix","icon","Config","staticPath","gisRestServer","dojoServer","timeMap","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","RightDrawer","isOpen","drawer","placement","closable","isShow","mask","marginTop","onClose","fontSize","selectedBoundary","i","Area","MainBox","tangFeatureLayers","dojoUrl","config","tileMapUrl","baseBoundaryFeatureUrl","baseEventFeatureUrl","basePeopleFeatureUrl","highlightSelectChar","isPlay","playControllerText","sliderValue","rightDrawShow","playTimer","stopUpdate","selectGrphics","changeBaseMap","initMap","prevProps","prevState","charLayer","layers","items","view","whenLayerView","then","layerView","queryChar","createQuery","where","charSelected","queryFeatures","result","highlight","remove","feature","features","goTo","center","geometry","x","zoom","duration","easing","setTimeout","drawLine","_this3","EsriLoader","loadModules","_ref","_ref2","slicedToArray","GraphicsLayer","Sketch","Map","Basemap","TileLayer","MapView","FeatureLayer","Graphic","Zoom","Compass","ScaleBar","graphicsLayer2","baseBoundaryFeatureLayer","url","id","baseEventFeatureLayer","basePeopleFeatureLayer","tileLayer","baseMap","baseLayers","basemap","container","featureLayerView","graphic","layout","compass","scaleBar","unit","sketch","Obj","layer","query","spatialRelationship","results","boundaryhighlight","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","attributes","err","return","createSketch","graphics","add","ui","padding","left","bottom","len","queryLayer","when","boundaryLayer","evnetLayerIndex","dy","parseInt","searchKey","eventLayer","changeBoundaryLayer","_this4","clearInterval","setInterval","_this5","Fragment","height","handleLayerPlay","ghost","YearSelector_YearSelector","yearArea","Common_RightDrawer","Search_Complete","EventDrawer","eventSelected","HCityName","STime","ETime","textIndent","Intro","ExpTimeline","timeline","exp","idx","place","intro","CharDrawer","iconURL","align","textAlign","alt","src","chars","zi","hao","Home","Content","Layout","App","isYearOpen","isEventOpen","isCharOpen","experience","curDrawing","currentTileMap","isCharDrawerOpen","isEventDrawerOpen","isCharSelectChangeToAnother","isEventSelectChangeToAnother","isYearSelectChangeToAnother","d","d1","yearData","fetch","res","json","profileData","eventData","experienceData","Promise","all","dataList","processYearArea","catch","error","ID","compnents_Header_Header","compnents_LeftSider_LeftSider","onSelectTileMap","position","compnents_MainBox_MainBox","yearSelected","curDrawingPoint","handleCurDrawing","Timelist_ExpTimeline","Drawer_EventDrawer","Drawer_CharDrawer","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","src_App_0","document","getElementById","URL","process","href","origin","addEventListener","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.0a5cc8b6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectors\":\"iOiwMT-1TxxMLRgACDatD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"play_button\":\"_1A0Na77mvvdzir8BTaZ7Pe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"charts\":\"oEFAxP79VZEMLn9X4OCbh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchWrapper\":\"_5UDuQJuf1p8makYUDFNrA\"};","import React,{Component} from 'react'\r\nimport { Modal } from 'antd'\r\nimport './Header.css'\r\nclass Header extends Component{\r\n    static defaultProps = {\r\n        title:'唐代历史地理数据展示平台',\r\n        about:'关于我们',\r\n        aboutTitle:'ESRI DEMO-唐朝历史地理信息展示平台',\r\n\r\n    }\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            visible:false\r\n        }\r\n    }\r\n\r\n    handleClickbout(){\r\n        this.setState({\r\n            visible: true,\r\n      });\r\n    }\r\n    handleCancel(){\r\n        this.setState({\r\n            visible: false,\r\n      });\r\n    }\r\n    render(){\r\n        return(\r\n            <div className='header'>\r\n                <span className={'title'}>{this.props.title}</span>\r\n                <button className={'about'} onClick={this.handleClickbout.bind(this)}>{this.props.about}</button>\r\n                <Modal\r\n                    title={this.props.aboutTitle}\r\n                    visible={this.state.visible}\r\n                    okText={'确认'}\r\n                    footer={null}\r\n                    onCancel={this.handleCancel.bind(this)}\r\n              >\r\n                    <p>{'简介：该平台展示了唐朝不同年代的疆界范围、人物轨迹及历史事件，并支持查询搜索等功能。'}</p>\r\n                    <p>{'制作成员：侯骁谋 劳大钊 吴宇东 詹文'}</p>\r\n              </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Header","import React, { Component } from 'react'\r\nimport { Menu, Dropdown, Button } from 'antd';\r\nimport s from './LeftSider.less';\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nclass LeftSider extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      collapsed: false,\r\n      yearLabel: undefined,\r\n      yearSelectedKeys: [],\r\n      eventSelectedKeys: [],\r\n      charSelectedKeys: [],\r\n      currentYear: ['Tang', ''],\r\n      currentPeople: null,\r\n      currentEvent: null\r\n    };\r\n  }\r\n\r\n  onCollapse = collapsed => {\r\n    this.setState({ collapsed });\r\n  };\r\n\r\n  handleSelectChange(e) {\r\n    console.log(e.key[0])\r\n    // 选择年份\r\n    if (e.key[0] === 'Y') {\r\n\r\n      if (!this.state.yearSelectedKeys) {\r\n        let yearLabel = e.key.slice(3)\r\n        console.log(yearLabel)\r\n        this.setState({ yearSelectedKeys: [e.key], yearLabel: yearLabel })\r\n      }\r\n      else if (this.state.yearSelectedKeys[0] === e.key) {\r\n        this.setState({ yearSelectedKeys: [] })\r\n      }\r\n      else {\r\n        this.setState({ yearSelectedKeys: [e.key] })\r\n      }\r\n    }\r\n    // 选择人物\r\n    if (e.keyPath[1] === 'characters') {\r\n      if (!this.state.charSelectedKeys) {\r\n        this.setState({ charSelectedKeys: [e.key] })\r\n      }\r\n      else if (this.state.charSelectedKeys[0] === e.key) {\r\n        this.setState({ charSelectedKeys: [] })\r\n      }\r\n      else {\r\n        this.setState({ charSelectedKeys: [e.key] })\r\n      }\r\n    }\r\n    if (e.keyPath[1] === 'events') {\r\n      if (!this.state.eventSelectedKeys) {\r\n        this.setState({ eventSelectedKeys: [e.key] })\r\n      }\r\n      else if (this.state.eventSelectedKeys[0] === e.key) {\r\n        this.setState({ eventSelectedKeys: [] })\r\n      }\r\n      else {\r\n        this.setState({ eventSelectedKeys: [e.key] })\r\n      }\r\n    }\r\n    if (this.props.onSelect) {\r\n      this.props.onSelect(e)\r\n    }\r\n  }\r\n  handleEventOpen(e) {\r\n    this.setState({ eventSelectedKeys: [] })\r\n    if (this.props.onEventOpen) {\r\n      this.props.onEventOpen(e)\r\n    }\r\n  }\r\n  handleCharOpen(e) {\r\n    this.setState({ charSelectedKeys: [] })\r\n    if (this.props.onCharOpen) {\r\n      this.props.onCharOpen(e)\r\n    }\r\n  }\r\n  handleYearOpen(e) {\r\n    this.setState({ yearSelectedKeys: [] })\r\n    if (this.props.onYearOpen) {\r\n      this.props.onYearOpen(e)\r\n    }\r\n  }\r\n  handleEventSelect(eventName) {\r\n    this.setState({ currentEvent: eventName });\r\n  }\r\n  handlePeopleSelect(name) {\r\n    this.setState({ currentPeople: name });\r\n  }\r\n  handleYearSelect(dynasty, year) {\r\n    this.setState({ currentYear: [dynasty, year] });\r\n  }\r\n  render() {\r\n\r\n    const years = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {\r\n          ((years) => {\r\n            const yearList = [];\r\n            for (let name of Object.keys(years)) {\r\n              yearList.push(\r\n                <SubMenu title={name} key={name}>\r\n                  {years[name].map(year => <Menu.Item key={name + year.Year} onClick={this.handleYearSelect.bind(this, name, year.Year)}>{year.Year}</Menu.Item>)}\r\n                </SubMenu>\r\n              )\r\n            }\r\n            return yearList;\r\n          })(this.props.years)\r\n        }\r\n      </Menu>\r\n    );\r\n    const events = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {this.props.events[this.state.currentYear[0]] &&\r\n          this.props.events[this.state.currentYear[0]].map(\r\n            event => (\r\n              <Menu.Item\r\n                key={event.HName}\r\n                onClick={this.handleEventSelect.bind(this, event.HName)}>\r\n                {event.HName}\r\n              </Menu.Item>\r\n            )\r\n          )}\r\n      </Menu>\r\n    );\r\n    const people = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {this.props.charProfiles[this.state.currentYear[0]] &&\r\n          this.props.charProfiles[this.state.currentYear[0]].map(\r\n            char => (\r\n              <Menu.Item\r\n                key={char.Name}\r\n                onClick={this.handlePeopleSelect.bind(this, char.Name)}>\r\n                {char.Name}\r\n              </Menu.Item>\r\n            )\r\n          )}\r\n      </Menu>\r\n    );\r\n    const tiles = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {this.props.currentTile &&\r\n          this.props.tilesMap.map(\r\n            tile => (\r\n              <Menu.Item\r\n                key={tile}\r\n                onClick={() => { this.props.handleTileSelect(tile) }}>\r\n                {tile}\r\n              </Menu.Item>\r\n            )\r\n          )}\r\n      </Menu>\r\n    );\r\n    return (\r\n      <div className={s.selectors}>\r\n        <div>\r\n          <Dropdown overlay={years} trigger={['click']}>\r\n            <Button>{this.state.currentYear.join(' ') || '年代边界'}</Button>\r\n          </Dropdown>\r\n        </div>\r\n        <div>\r\n          <Dropdown overlay={people} trigger={['click']}>\r\n            <Button>{`${this.state.currentYear[0]}: ${this.state.currentPeople || '历史人物'}`}</Button>\r\n          </Dropdown>\r\n        </div>\r\n        <div>\r\n          <Dropdown overlay={events} trigger={['click']}>\r\n            <Button>{`${this.state.currentYear[0]}: ${this.state.currentEvent || '历史事件'}`}</Button>\r\n          </Dropdown>\r\n        </div>\r\n        <div>\r\n          <Dropdown overlay={tiles} trigger={['click']}>\r\n            <Button>{`底图: ${this.props.currentTile || '底图'}`}</Button>\r\n          </Dropdown>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftSider","export const renderer = {\n    type: \"unique-value\",  // autocasts as new UniqueValueRenderer()\n    field: \"China\",\n    defaultSymbol: { type: \"simple-fill\" },  // autocasts as new SimpleFillSymbol()\n    uniqueValueInfos: [{\n        // All features with value of \"North\" will be blue\n        value: '0',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [ 51,51, 204, 0.5 ]\n        }\n    }, {\n        // All features with value of \"East\" will be green\n        value: '1',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [ 151,51, 204, 0.5 ]\n        }\n    }, {\n        // All features with value of \"South\" will be red\n        value: '2',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [ 51,51, 44, 0.5 ]\n        }\n    }, {\n        // All features with value of \"West\" will be yellow\n        value: '3',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [ 251,51, 204, 0.5 ]\n        }\n    }]\n};\n","import React, { Component } from 'react';\nimport echarts from 'echarts/lib/echarts';\nimport 'echarts/lib/chart/line';\nimport 'echarts/lib/component/tooltip';\nimport 'echarts/lib/component/dataZoom';\nimport 'echarts/lib/component/title';\nimport s from './YearSelector.less';\n\nclass YearSelector extends Component {\n    constructor(props) {\n        super(props);\n        this.charts = React.createRef();\n        this.lineChartsInstance = null;\n        this.option = null;\n    }\n\n    renderChart(data) {\n        this.lineChartsInstance = echarts.init(this.charts.current);\n        this.lineChartsInstance.setOption(this.option = {\n            tooltip: {\n                trigger: 'axis'\n            },\n            xAxis: {\n                data: data.map(function (item) {\n                    return item[0];\n                })\n            },\n            yAxis: {\n                show: true,\n                splitLine: {\n                    show: false\n                },\n                interval: 500000000,\n                name: '面积'\n            },\n            dataZoom: [{\n                startValue: '2014-06-01'\n            }, {\n                type: 'inside'\n            }],\n            visualMap: {\n                top: 10,\n                right: 10,\n            },\n            series: {\n                name: '疆域面积',\n                type: 'line',\n                data: data.map(function (item) {\n                    return item[1];\n                }),\n                areaStyle: {}\n            }\n        });\n        this.lineChartsInstance.on('click', 'series', e => {\n            const index = e.dataIndex;\n            this.props.onClick(index);\n        });\n    }\n\n    componentDidMount() {\n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    render() {\n        return (\n            <div className={s.charts}>\n                <div  ref={this.charts}></div>\n            </div>\n        )\n    }\n}\n\nexport { YearSelector };","import React, { Component } from 'react';\nimport s from './Search.less';\nimport { Icon, Input, AutoComplete } from 'antd';\n\nconst { Option, OptGroup } = AutoComplete;\n\n\nexport class Complete extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dataSource: this.initData('')\n        }\n    }\n\n    initData(value) {\n        if (!this.props.year) {\n            return null;\n        }\n        const year = [];\n        Object.keys(this.props.year).forEach(y => {\n            this.props.year[y].forEach(c => {\n                if (c.Year.includes(value)) {\n                    year.push({\n                        title: y,\n                        content: y + ': ' + c.Year\n                    })\n                }\n            })\n        });\n        const event = [];\n        Object.keys(this.props.event).forEach(y => {\n            this.props.event[y].forEach(c => {\n                if (c.HName.includes(value)) {\n                    event.push({\n                        title: y,\n                        content: y + ': ' + c.HName\n                    })\n                }\n            })\n        });\n        const people = [];\n        Object.keys(this.props.people).forEach(y => {\n            this.props.people[y].forEach(c => {\n                if (c.Name.includes(value)) {\n                    people.push({\n                        title: y,\n                        content: y + ': ' + c.Name\n                    })\n                }\n            })\n        });\n        const dataSource = [\n            {\n                title: '年代',\n                children: year,\n            },\n            {\n                title: '事件',\n                children: event\n            },\n            {\n                title: '人物',\n                children: people\n            },\n        ];\n\n        function renderTitle(title) {\n            return (\n                <span>\n                    {title}\n                </span>\n            );\n        }\n\n        const options = dataSource\n            .map(group => (\n                <OptGroup key={group.title} label={renderTitle(group.title)}>\n                    {group.children.map((opt, index) => (\n                        <Option key={opt.title + opt.content + index} value={opt.content}>\n                            <span className=\"certain-search-item-count\">{opt.content}</span>\n                        </Option>\n                    ))}\n                </OptGroup>\n            ))\n\n        this.setState({\n            dataSource: options\n        })\n    }\n    handleSearch(value) {\n        this.initData(value);\n    }\n    render() {\n        return (\n            <div className={s.searchWrapper} style={{ width: 250 }}>\n                <AutoComplete\n                    className=\"certain-category-search\"\n                    dropdownClassName=\"certain-category-search-dropdown\"\n                    dropdownMatchSelectWidth={true}\n                    dropdownStyle={{ width: 300 }}\n                    size=\"large\"\n                    style={{ width: '100%' }}\n                    dataSource={this.state.dataSource}\n                    placeholder=\"搜索\"\n                    optionLabelProp=\"value\"\n                    onSearch={this.handleSearch.bind(this)}\n                >\n                    <Input suffix={<Icon type=\"search\" className=\"certain-category-icon\" />} />\n                </AutoComplete>\n            </div>\n        );\n    }\n}","export const Config = {\n    staticPath: 'http://localhost:8887/',\n    gisRestServer: 'https://172.20.32.70:6443/arcgis/rest/services/',\n    dojoServer: \"http://tony-space.top:8007/arcgis_js_api/library/4.11/dojo/dojo.js\"\n}","export const timeMap = {\n    0: [0, 1],\n    1: [1, 2],\n    2: [2, 5],\n    3: [5, 10],\n    4: [10, 15],\n    5: [15, 19],\n    6: [19, 38],\n    7: [38, 41],\n    8: [41, 47],\n    9: [47, 51],\n    10: [51, 61],\n    11: [61, 69],\n    12: [69, 82],\n    13: [82, 91],\n    14: [91, 103],\n    15: [103, 111],\n    16: [111, 117],\n    17: [117, 128],\n    18: [128, 134]\n}\n\nexport function searchKey(dy) {\n    let result = 0;\n    Object.keys(timeMap).forEach(i => {\n        if (timeMap[i][1] > dy && timeMap[i][0] <= dy) {\n            result = parseInt(i)\n        }\n    })\n    return result;\n}\n\n","import React,{Component} from 'react'\nimport {Drawer} from 'antd'\n\nexport class RightDrawer extends Component{\n  constructor(){\n    super();\n    this.state = {\n      isOpen:false\n    }\n  }\n\n  render(){\n    return(\n      <Drawer\n      title={\"检索\"}\n      placement=\"right\"\n      closable={true}\n      visible={this.props.isShow}\n      mask={false}\n      style={{marginTop:'60px'}}\n      onClose={this.props.onClose}\n      >\n          <div style={{fontSize: 18}}>疆域</div><br/>\n          {\n              this.props.data.selectedBoundary.map(i => {\n                  return (\n                      <div>\n                          名称：{i.Name} <br/>\n                          面积：{i.Area} <br/>\n                          <hr/>\n                      </div>\n                  )\n              })\n          }\n      </Drawer>\n  )}\n}\n","import React, { Component } from 'react'\r\nimport { Button } from 'antd';\r\nimport EsriLoader from 'esri-loader'\r\nimport s from './mainBox.less';\r\nimport { createSketch, renderer } from './utils';\r\nimport { YearSelector } from '../charts';\r\nimport Search from '../Search';\r\nimport config from '../../config';\r\nimport { searchKey } from './utils/timeMap';\r\nimport { RightDrawer } from '../Drawer/Common';\r\n\r\nconst BOUNDARY_LAYER_NUM = 121;\r\n\r\nclass MainBox extends Component {\r\n  constructor() {\r\n    super()\r\n    this.tangFeatureLayers = []\r\n    this.dojoUrl = config.dojoServer;\r\n    this.tileMapUrl = \"http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer\"\r\n    this.baseBoundaryFeatureUrl = config.gisRestServer + \"country_boundary/MapServer/\";\r\n    this.baseEventFeatureUrl = config.gisRestServer + \"events_point/MapServer\";\r\n    this.basePeopleFeatureUrl = config.gisRestServer + \"country_boundary/MapServer/\";\r\n    this.highlightSelectChar = []\r\n    this.state = {\r\n      isPlay: false,\r\n      playControllerText: '播放边界变化',\r\n      sliderValue: 0,\r\n      selectedBoundary: [],\r\n      rightDrawShow: false\r\n    }\r\n    this.playTimer = null;\r\n    this.stopUpdate = true;\r\n    this.selectGrphics = [];\r\n    this.changeBaseMap = () => { };\r\n  }\r\n  componentDidMount() {\r\n    this.initMap()\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.selectedBoundary !== this.state.selectedBoundary) {\r\n      this.setState({ rightDrawShow: true });\r\n    }\r\n  }\r\n\r\n  queryForChar() {\r\n    let charLayer = this.map.layers.items[14]\r\n    this.view.whenLayerView(charLayer).then((layerView) => {\r\n      var queryChar = charLayer.createQuery();\r\n      queryChar.where = \"ID=\" + this.props.charSelected\r\n      charLayer.queryFeatures(queryChar).then((result) => {\r\n        if (this.highlightSelectChar.length) {\r\n          this.highlightSelectChar.map((highlight) => {\r\n            highlight.remove()\r\n            return void 0;\r\n          })\r\n        }\r\n        let feature = result.features\r\n        // let x = 0, y = 0\r\n        // for (let i = 0; i < feature.length; i++) {\r\n        //   x += feature[i].geometry.x\r\n        //   y += feature[i].geometry.y\r\n        // }\r\n        // x /= feature.length\r\n        // y /= feature.length\r\n        this.view.goTo(\r\n          {\r\n            center: [feature[0].geometry.x + 3, feature[0].geometry.y],\r\n            zoom: 6\r\n          },\r\n          {\r\n            duration: 1000,\r\n            easing: 'in-out-expo'\r\n          })\r\n        setTimeout(() => {\r\n          this.drawLine(feature, layerView)\r\n        }, 1000)\r\n        return void 0;\r\n      })\r\n    })\r\n  }\r\n\r\n  initMap() {\r\n    EsriLoader.loadModules([\r\n      \"esri/layers/GraphicsLayer\",\r\n      \"esri/widgets/Sketch\",\r\n      \"esri/Map\",\r\n      \"esri/Basemap\",\r\n      \"esri/layers/TileLayer\",\r\n      \"esri/views/MapView\",\r\n      \"esri/layers/FeatureLayer\",\r\n      'esri/Graphic',\r\n      'esri/widgets/Zoom',\r\n      \"esri/widgets/Compass\",\r\n      'esri/widgets/ScaleBar',\r\n      'esri/widgets/Search',\r\n      \"dojo/domReady!\"\r\n    ], this.dojoUrl).then(([GraphicsLayer, Sketch, Map, Basemap, TileLayer, MapView, FeatureLayer, Graphic, Zoom, Compass, ScaleBar, Search]) => {\r\n      this.FeatureLayer = FeatureLayer;\r\n      this.graphicsLayer2 = new GraphicsLayer();\r\n      this.baseBoundaryFeatureLayer = new FeatureLayer({\r\n        url: this.baseBoundaryFeatureUrl,\r\n        id: '0',\r\n        visible: true,\r\n        renderer\r\n      })\r\n      this.baseEventFeatureLayer = new FeatureLayer({\r\n        url: this.baseEventFeatureUrl,\r\n        id: '4',\r\n        visible: true,\r\n      })\r\n      this.basePeopleFeatureLayer = new FeatureLayer({\r\n        url: this.basePeopleFeatureUrl,\r\n        id: '0',\r\n        visible: true,\r\n      })\r\n\r\n      this.changeBaseMap = (tileMapUrl) => {\r\n        let tileLayer = new TileLayer({\r\n          url: tileMapUrl\r\n        });\r\n        let baseMap = new Basemap({\r\n          baseLayers: [tileLayer],\r\n          id: 'myBaseMap'\r\n        });\r\n        if (this.map) {\r\n          this.map.basemap = baseMap;\r\n        }\r\n      }\r\n\r\n      let tileLayer = new TileLayer({\r\n        url: this.tileMapUrl\r\n      });\r\n      let basemap = new Basemap({\r\n        baseLayers: [tileLayer],\r\n        id: 'myBaseMap'\r\n      });\r\n      this.map = new Map({\r\n        basemap,\r\n        layers: [\r\n          this.baseEventFeatureLayer,\r\n          // this.basePeopleFeatureLayer,\r\n          this.baseBoundaryFeatureLayer,\r\n        ]\r\n      });\r\n      this.view = new MapView({\r\n        center: [115, 32.1],\r\n        map: this.map,\r\n        container: \"mapDiv\",\r\n        zoom: 5\r\n      });\r\n      this.view.whenLayerView(this.baseBoundaryFeatureLayer).then((layerView) => {\r\n        this.featureLayerView = layerView;\r\n      });\r\n      this.graphic = new Graphic()\r\n      let zoom = new Zoom({\r\n        view: this.view,\r\n        layout: 'horizontal'\r\n      })\r\n      let compass = new Compass({\r\n        view: this.view\r\n      });\r\n      let scaleBar = new ScaleBar({\r\n        view: this.view,\r\n        unit: 'metric'\r\n      })\r\n      const sketch = createSketch(this, Sketch);\r\n      this.view.graphics.add(this.graphic)\r\n      this.view.ui.padding = { top: 80, left: 30, right: 0, bottom: 0 };\r\n      this.view.ui.remove('zoom')\r\n      this.view.ui.add(zoom)\r\n      this.view.ui.add(compass)\r\n      this.view.ui.add(scaleBar, 'bottom-right');\r\n      this.view.ui.add(sketch, \"top-left\");\r\n      let len = this.map.layers.items.length\r\n      let queryLayer = this.map.layers.items[len - 1]\r\n      this.view.when(function () {\r\n        return queryLayer.when(function () {\r\n          let query = queryLayer.createQuery()\r\n          return queryLayer.queryFeatures(query)\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  changeBoundaryLayer(index) {\r\n    if (!this.map || !this.FeatureLayer) {\r\n      return 0;\r\n    }\r\n    const boundaryLayer = new this.FeatureLayer({\r\n      url: this.baseBoundaryFeatureUrl + index,\r\n      visible: true,\r\n      renderer\r\n    });\r\n    const evnetLayerIndex = searchKey(index);\r\n    const eventLayer = new this.FeatureLayer({\r\n      url: this.baseEventFeatureUrl + '/' + evnetLayerIndex,\r\n      visible: true,\r\n    })\r\n    this.map.layers = [boundaryLayer, eventLayer];\r\n  }\r\n\r\n  handleSliderChange(value) {\r\n    if (!this.map) {\r\n      return 0;\r\n    }\r\n    // TO FIX: slider切换年份不生效\r\n    this.changeBoundaryLayer(value);\r\n    this.setState({ sliderValue: value });\r\n  }\r\n\r\n  handleLayerPlay() {\r\n    this.stopUpdate = !this.stopUpdate\r\n    this.setState({ isPlay: !this.state.isPlay })\r\n\r\n    this.view.goTo({ center: [115, 32.1], zoom: 4 }, { duration: 1000, easing: 'in-out-expo' })\r\n    let i = 0\r\n    if (this.playTimer) {\r\n      clearInterval(this.playTimer);\r\n      this.playTimer = null;\r\n      this.setState({ playControllerText: '播放边界变化', isPlay: false })\r\n      return;\r\n    }\r\n    this.setState({ playControllerText: '暂停播放', isPlay: true })\r\n    this.playTimer = setInterval(() => {\r\n      if (i < BOUNDARY_LAYER_NUM) {\r\n        if (i) {\r\n          this.changeBoundaryLayer.call(this, i);\r\n        }\r\n        this.setState({ sliderValue: i });\r\n      }\r\n      else {\r\n        this.stopUpdate = !this.stopUpdate\r\n        this.setState({ isPlay: false })\r\n        this.changeBoundaryLayer.call(this, i);\r\n        clearInterval(this.playTimer);\r\n        this.playTimer = null;\r\n      }\r\n      i++;\r\n      return void 0;\r\n    }, 2000)\r\n  }\r\n  render() {\r\n    console.log(this.props)\r\n    return (\r\n      <>\r\n        <div id='mapDiv' style={{ height: '100%', width: '100%', padding: '5px' }}></div>\r\n        <div className={s['play_button']}>\r\n          <Button\r\n            onClick={this.handleLayerPlay.bind(this)}\r\n            ghost\r\n            icon={this.state.isPlay ? 'pause' : 'caret-right'}\r\n          >\r\n            {this.state.playControllerText}\r\n          </Button>\r\n        </div>\r\n        <YearSelector onClick={this.changeBoundaryLayer.bind(this)} data={this.props.yearArea} />\r\n        <RightDrawer\r\n          isShow={this.state.rightDrawShow}\r\n          onClose={() => this.setState({ rightDrawShow: false })}\r\n          data={{\r\n            years: this.props.years,\r\n            charProfiles: this.props.charProfiles,\r\n            events: this.props.events,\r\n            selectedBoundary: this.state.selectedBoundary\r\n          }}\r\n        />\r\n        <Search\r\n          year={this.props.years}\r\n          event={this.props.events}\r\n          people={this.props.charProfiles}\r\n        />\r\n        {/* <Slider\r\n          years={this.props.years}\r\n          value={this.state.sliderValue}\r\n          onChange={this.handleSliderChange.bind(this)}\r\n        /> */}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MainBox","function createSketch(Obj, Sketch) {\n    const sketch = new Sketch({\n        view: Obj.view,\n        layer: Obj.graphicsLayer2\n    });\n    sketch.on(\"create\", (event) => {\n        // check if the create event's state has changed to complete indicating\n        // the graphic create operation is completed.\n        if (event.state === \"complete\") {\n            let query = Obj.baseBoundaryFeatureLayer.createQuery();\n            Obj.selectGrphics.push(event.graphic);\n            query.geometry = event.graphic.geometry;\n            query.spatialRelationship = \"intersects\";\n            Obj.baseBoundaryFeatureLayer.queryFeatures(query).then(function (results) {\n                // prints an array of all the features in the service to the console\n                console.log(results);\n                if (Obj.boundaryhighlight) {\n                    Obj.boundaryhighlight.remove();\n                }\n                Obj.boundaryhighlight = Obj.featureLayerView.highlight(results.features);\n                const selectedBoundary = [];\n                if (results.features.length) {\n                    for (let feature of results.features) {\n                        selectedBoundary.push(feature.attributes);\n                    }\n                    Obj.setState({selectedBoundary});\n                }\n            });\n        }\n    });\n    return sketch;\n}\n\nexport { createSketch };\n","import React,{Component} from 'react'\r\nimport {Drawer} from 'antd'\r\n\r\nclass EventDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isOpen:false\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <Drawer\r\n      title={\"事件简介\"}\r\n      placement=\"right\"\r\n      closable={false}\r\n      visible={this.props.isShow}\r\n      mask={false}\r\n      style={{marginTop:'60px'}}\r\n      >\r\n        <p>{'事件名称：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HName:'')}</p>\r\n        <p>{'发生地点：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HCityName:'')}</p>\r\n        <p>{'起始时间：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].STime+' 年':'')}</p>\r\n        <p>{'结束时间：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].ETime+' 年':'')}</p>\r\n        <p>{'事件简介：'}</p>\r\n        <p style={{textIndent:'2em'}}>{this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].Intro:''}</p>\r\n      </Drawer>\r\n  )}\r\n}\r\n\r\nexport default EventDrawer","import React,{Component} from 'react';\r\nimport { Timeline } from 'antd';\r\n\r\nclass ExpTimeline extends Component{\r\n  render(){\r\n    return(\r\n      <div>\r\n        <Timeline>\r\n          <div className={'charExp'}>人物经历</div>\r\n          {this.props.exp.map((e,idx)=>{ \r\n            return <Timeline.Item key={idx} color={'#dc9123'}>\r\n              {e.year+'年，'+e.place+'，'+e.intro}\r\n            </Timeline.Item>\r\n          })}\r\n        </Timeline>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ExpTimeline","import React,{Component} from 'react'\r\nimport {Drawer} from 'antd'\r\n\r\nclass CharDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isOpen:false\r\n    }\r\n    this.iconURL = '../../icon/'\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <Drawer\r\n      title={\"人物简介\"}\r\n      placement=\"right\"\r\n      closable={false}\r\n      visible={this.props.isShow}\r\n      mask={false}\r\n      style={{marginTop:'60px'}}\r\n      >\r\n        <div style={{align:'center',textAlign:'center'}}>\r\n          <img\r\n            alt=\"icon\" src={this.iconURL+(this.props.charSelected?this.props.charSelected:'-1')+'.jpg'} />\r\n        </div>\r\n        <hr/>\r\n        <p>{'姓名：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Name:'')}</p>\r\n        <p>{'字：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].zi:'')}</p>\r\n        <p>{'号：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].hao:'')}</p>\r\n        <p>{'生年：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].STime+' 年':'')}</p>\r\n        <p>{'卒年：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].ETime+' 年':'')}</p>\r\n        <p>{'出生地：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Home:'')}</p>\r\n        <p>{'简介：'}</p>\r\n        <p style={{textIndent:'2em'}}>{this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Intro:''}</p>\r\n      </Drawer>\r\n  )}\r\n}\r\n\r\nexport default CharDrawer","import React, { Component } from 'react';\nimport Header from './compnents/Header/Header'\nimport LeftSider from './compnents/LeftSider/LeftSider'\nimport MainBox from './compnents/MainBox/MainBox'\nimport EventDrawer from './compnents/Drawer/EventDrawer'\nimport ExpTimeline from './compnents/Timelist/ExpTimeline'\nimport { Layout } from 'antd';\nimport './App.css';\nimport CharDrawer from './compnents/Drawer/CharDrawer';\nimport Config from './config';\n\nconst staticPath = Config.staticPath;\n\nconst tilesMap = [\n  'http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer',\n  'dark-gray',\n  'streets',\n  'hybrid'\n]\n\nconst { Content } = Layout\nclass App extends Component {\n  constructor() {\n    super()\n    this.state = {\n      yearSelectedKeys: [],\n      charSelectedKeys: [],\n      eventSelectedKeys: [],\n      isYearOpen: true,\n      isEventOpen: false,\n      isCharOpen: false,\n      charProfiles: [],\n      years: [],\n      events: [],\n      experience: [],\n      yearArea: [],\n      curDrawing: 0,\n      currentTileMap: 'topo',\n      isCharDrawerOpen: false,\n      isEventDrawerOpen: false,\n      isCharSelectChangeToAnother: false,\n      isEventSelectChangeToAnother: false,\n      isYearSelectChangeToAnother: false,\n    }\n  }\n\n  onSelectTileMap(currentTileMap) {\n    this.setState({ currentTileMap })\n  }\n\n  processYearArea(data) {\n    const result = [];\n    Object.keys(data).forEach(d => {\n      Object.keys(data[d][0]).forEach(d1 => {\n        result.push([\n          d + ' ' + d1,\n          data[d][0][d1]\n        ])\n      })\n    });\n    return result;\n  }\n\n  componentDidMount() {\n    const yearData = fetch(staticPath + 'json/year.json').then(res => res.json())\n    const profileData = fetch(staticPath + 'json/profile.json').then(res => res.json())\n    const eventData = fetch(staticPath + 'json/event.json').then(res => res.json())\n    const experienceData = fetch(staticPath + 'json/experience.json').then(res => res.json())\n    const yearArea = fetch(staticPath + 'json/area.json').then(res => res.json())\n    Promise.all([yearData, profileData, eventData, experienceData, yearArea]).then((dataList) => {\n      console.log(dataList)\n      this.setState({\n        years: dataList[0],\n        charProfiles: dataList[1],\n        events: dataList[2],\n        experience: dataList[3],\n        yearArea: this.processYearArea(dataList[4])\n      })\n    }).catch((err) => {\n      console.error(err);\n    })\n  }\n  render() {\n    const exp = []\n    this.state.experience.length && this.state.experience['Tang'].map((e) => {\n      if (e.ID === this.state.charSelectedKeys[0]) exp.push(e)\n      return void 0;\n    })\n    return (\n      <div className=\"App\">\n        <Header />\n        <LeftSider\n          years={this.state.years}\n          charProfiles={this.state.charProfiles}\n          events={this.state.events}\n          tilesMap={tilesMap}\n          handleTileSelect={this.onSelectTileMap.bind(this)}\n          currentTile={this.state.currentTileMap}\n        />\n        <Layout style={{ position: 'relative', height: 'calc(100% - 60px)' }}>\n          <Content style={{ position: 'relative' }}>\n            <MainBox\n              years={this.state.years}\n              charProfiles={this.state.charProfiles}\n              events={this.state.events}\n              yearArea={this.state.yearArea}\n              yearSelected={this.state.yearSelectedKeys[0]}\n              charSelected={this.state.charSelectedKeys[0]}\n              eventSelected={this.state.eventSelectedKeys[0]}\n              curDrawingPoint={this.handleCurDrawing}\n            />\n            {exp.length ? <ExpTimeline exp={exp} /> : null}\n          </Content>\n          <EventDrawer\n            events={this.state.events}\n            isShow={this.state.isEventDrawerOpen}\n            eventSelected={this.state.eventSelectedKeys[0]} />\n          <CharDrawer\n            chars={this.state.charProfiles}\n            isShow={this.state.isCharDrawerOpen}\n            charSelected={this.state.charSelectedKeys[0]} />\n        </Layout>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}