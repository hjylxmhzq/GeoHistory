{"version":3,"sources":["compnents/Header/Header.js","compnents/LeftSider/LeftSider.js","compnents/MainBox/MainBox.js","compnents/Drawer/EventDrawer.js","compnents/Timelist/ExpTimeline.js","compnents/Drawer/CharDrawer.js","App.js","config/config.js","serviceWorker.js","index.js","compnents/LeftSider/LeftSider.less"],"names":["Header","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","visible","setState","react_default","a","createElement","className","props","title","onClick","handleClickbout","bind","about","modal","aboutTitle","okText","footer","onCancel","handleCancel","Component","defaultProps","SubMenu","Menu","LeftSider","onCollapse","collapsed","console","log","yearSelectedKeys","eventSelectedKeys","charSelectedKeys","e","keyPath","key","onSelect","onEventOpen","onCharOpen","onYearOpen","years","menu","yearList","_i","_Object$keys","keys","length","name","push","map","year","Item","Year","s","selectors","dropdown","overlay","es_button","MainBox","tangFeatureLayers","dojoUrl","tileMapUrl","baseFeatureUrl","highlightSelectChar","isPlay","stopUpdate","initMap","layers","items","layer","search","sources","isShowYear","yearSelected","searchSource","isShowEvent","isShowChar","t","clearTimeout","graphic","geometry","undefined","isCharSelectChangeToAnother","isEventSelectChangeToAnother","isYearSelectChangeToAnother","charSelected","definitionExpression","labelsVisible","queryForChar","highlight","remove","eventSelected","queryForEvent","highlightSelectEvent","pointA","pointB","speed","tmp","count","Math","abs","disX","x","disY","y","i","p","clone","feature","layerView","_this2","traj","interpolation","polyline","type","paths","symbol","color","width","j","nPolyline","cnt","draw","setTimeout","shift","curDrawingPoint","attributes","view","goTo","center","zoom","duration","easing","_this3","charLayer","whenLayerView","then","queryChar","createQuery","where","queryFeatures","result","features","drawLine","_this4","eventLayer","queryEvents","_this5","EsriLoader","loadModules","_ref","_ref2","slicedToArray","Map","Basemap","TileLayer","MapView","FeatureLayer","Graphic","Zoom","Compass","ScaleBar","Search","popupTemplateForCountry","content","fieldInfos","fieldName","label","format","places","digitSeparator","popupTemplateForEvent","popupTemplateForChar","popupTemplateForCity","tangLayerUrl","url","id","popupTemplate","baseMap","baseLayers","basemap","container","layout","compass","scaleBar","unit","allPlaceholder","includeDefaultSources","idx","searchFields","suggestionTemplate","displayField","exactMatch","placeholder","graphics","add","ui","len","queryLayer","when","query","_this6","setInterval","f","clearInterval","play","style","height","padding","loading","handleLayerPlay","ghost","icon","position","left","bottom","EventDrawer","isOpen","drawer","placement","closable","isShow","mask","marginTop","events","HName","HCityName","STime","ETime","textIndent","Intro","ExpTimeline","timeline","exp","place","intro","CharDrawer","iconURL","align","textAlign","alt","src","chars","Name","zi","hao","Home","staticPath","Content","Layout","App","isYearOpen","isEventOpen","isCharOpen","charProfiles","experience","curDrawing","isCharDrawerOpen","isEventDrawerOpen","yearData","fetch","res","json","profileData","eventData","experienceData","Promise","all","dataList","catch","err","ID","compnents_Header_Header","compnents_LeftSider_LeftSider","handleSelectChange","handleYearOpen","handleEventOpen","handleCharOpen","compnents_MainBox_MainBox","handleCurDrawing","Timelist_ExpTimeline","Drawer_EventDrawer","Drawer_CharDrawer","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error","ReactDOM","render","src_App_0","document","getElementById","URL","process","href","origin","addEventListener","concat","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","module","exports"],"mappings":"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","file":"static/js/main.191cbc70.chunk.js","sourcesContent":["import React,{Component} from 'react'\r\nimport { Modal } from 'antd'\r\nimport './Header.css'\r\nclass Header extends Component{\r\n    static defaultProps = {\r\n        title:'唐代历史地理数据展示平台',\r\n        about:'关于我们',\r\n        aboutTitle:'ESRI DEMO-唐朝历史地理信息展示平台',\r\n\r\n    }\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            visible:false\r\n        }\r\n    }\r\n\r\n    handleClickbout(){\r\n        this.setState({\r\n            visible: true,\r\n      });\r\n    }\r\n    handleCancel(){\r\n        this.setState({\r\n            visible: false,\r\n      });\r\n    }\r\n    render(){\r\n        return(\r\n            <div className='header'>\r\n                <span className={'title'}>{this.props.title}</span>\r\n                <button className={'about'} onClick={this.handleClickbout.bind(this)}>{this.props.about}</button>\r\n                <Modal\r\n                    title={this.props.aboutTitle}\r\n                    visible={this.state.visible}\r\n                    okText={'确认'}\r\n                    footer={null}\r\n                    onCancel={this.handleCancel.bind(this)}\r\n              >\r\n                    <p>{'简介：该平台展示了唐朝不同年代的疆界范围、人物轨迹及历史事件，并支持查询搜索等功能。'}</p>\r\n                    <p>{'制作成员：侯骁谋 劳大钊 吴宇东 詹文'}</p>\r\n              </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Header","import React, { Component } from 'react'\r\nimport { Menu, Dropdown, Button } from 'antd';\r\nimport s from './LeftSider.less';\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nclass LeftSider extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      collapsed: false,\r\n      yearSelectedKeys: [],\r\n      eventSelectedKeys: [],\r\n      charSelectedKeys: []\r\n    };\r\n  }\r\n\r\n  onCollapse = collapsed => {\r\n    console.log(collapsed);\r\n    this.setState({ collapsed });\r\n  };\r\n\r\n  handleSelectChange(e) {\r\n    if (e.keyPath[1] === 'years') {\r\n      if (!this.state.yearSelectedKeys) {\r\n        this.setState({ yearSelectedKeys: [e.key] })\r\n      }\r\n      else if (this.state.yearSelectedKeys[0] === e.key) {\r\n        this.setState({ yearSelectedKeys: [] })\r\n      }\r\n      else {\r\n        this.setState({ yearSelectedKeys: [e.key] })\r\n      }\r\n    }\r\n    if (e.keyPath[1] === 'characters') {\r\n      if (!this.state.charSelectedKeys) {\r\n        this.setState({ charSelectedKeys: [e.key] })\r\n      }\r\n      else if (this.state.charSelectedKeys[0] === e.key) {\r\n        this.setState({ charSelectedKeys: [] })\r\n      }\r\n      else {\r\n        this.setState({ charSelectedKeys: [e.key] })\r\n      }\r\n    }\r\n    if (e.keyPath[1] === 'events') {\r\n      if (!this.state.eventSelectedKeys) {\r\n        this.setState({ eventSelectedKeys: [e.key] })\r\n      }\r\n      else if (this.state.eventSelectedKeys[0] === e.key) {\r\n        this.setState({ eventSelectedKeys: [] })\r\n      }\r\n      else {\r\n        this.setState({ eventSelectedKeys: [e.key] })\r\n      }\r\n    }\r\n    if (this.props.onSelect) {\r\n      this.props.onSelect(e)\r\n    }\r\n  }\r\n  handleEventOpen(e) {\r\n    this.setState({ eventSelectedKeys: [] })\r\n    if (this.props.onEventOpen) {\r\n      this.props.onEventOpen(e)\r\n    }\r\n  }\r\n  handleCharOpen(e) {\r\n    this.setState({ charSelectedKeys: [] })\r\n    if (this.props.onCharOpen) {\r\n      this.props.onCharOpen(e)\r\n    }\r\n  }\r\n  handleYearOpen(e) {\r\n    this.setState({ yearSelectedKeys: [] })\r\n    if (this.props.onYearOpen) {\r\n      this.props.onYearOpen(e)\r\n    }\r\n  }\r\n  render() {\r\n    const years = (\r\n      <Menu>\r\n        {\r\n          ((years) => {\r\n            const yearList = [];\r\n            for (let name of Object.keys(years)) {\r\n              yearList.push(\r\n                <SubMenu title={name} >\r\n                  { years[name].map(year => <Menu.Item>{year.Year}</Menu.Item>) }\r\n                </SubMenu>\r\n              )\r\n            }\r\n            return yearList;\r\n          })(this.props.years)\r\n        }\r\n      </Menu>\r\n    );\r\n    return (\r\n      <div className={s.selectors}>\r\n        <div>\r\n          <Dropdown overlay={years}>\r\n            <Button>年代边界</Button>\r\n          </Dropdown>\r\n        </div>\r\n        <div>\r\n          <Dropdown overlay={years}>\r\n            <Button>历史人物</Button>\r\n          </Dropdown>\r\n        </div>\r\n        <div>\r\n          <Dropdown overlay={years}>\r\n            <Button>历史事件</Button>\r\n          </Dropdown>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftSider","import React, { Component } from 'react'\r\nimport { Button} from 'antd';\r\nimport EsriLoader from 'esri-loader'\r\n\r\n\r\nclass MainBox extends Component {\r\n  constructor() {\r\n    super()\r\n    this.tangFeatureLayers = []\r\n    this.dojoUrl = \"http://tony-space.top:8007/arcgis_js_api/library/4.11/dojo/dojo.js\"\r\n    this.tileMapUrl = \"http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer\"\r\n    this.baseFeatureUrl = \"http://172.20.32.70:6080/arcgis/rest/services/TD/MapServer/\"\r\n    this.highlightSelectChar = []\r\n    this.state = {\r\n      isPlay:false,\r\n    }\r\n    this.stopUpdate = true\r\n  }\r\n  componentWillMount() {\r\n    this.initMap()\r\n  }\r\n  componentDidUpdate() {\r\n    if (this.map && this.stopUpdate) {\r\n      if (this.map.layers.length) {\r\n        this.map.layers.items.map((layer) => {\r\n          layer.visible = false;\r\n          return void 0;\r\n        })\r\n        this.search.sources = []\r\n        if (this.props.isShowYear) {\r\n          if (this.props.yearSelected) {\r\n            this.map.layers.items[15].visible = true\r\n            this.map.layers.items[this.props.yearSelected].visible = true\r\n            this.search.sources.push(this.searchSource[this.props.yearSelected])\r\n            this.search.sources.push(this.searchSource[15])\r\n          }\r\n        }\r\n        if (this.props.isShowEvent) {\r\n          this.map.layers.items[13].visible = true\r\n          this.search.sources.push(this.searchSource[13])\r\n        }\r\n        if (this.props.isShowChar) {\r\n          this.map.layers.items[14].visible = true\r\n          this.search.sources.push(this.searchSource[14])\r\n        }\r\n        else {\r\n          if(this.t)clearTimeout(this.t)\r\n          this.graphic.geometry = undefined\r\n        }\r\n        //\r\n        if(this.props.isCharSelectChangeToAnother && !this.props.isEventSelectChangeToAnother && !this.props.isYearSelectChangeToAnother){\r\n          if (this.props.charSelected) {\r\n            this.tangFeatureLayers[14].definitionExpression = 'ID='+this.props.charSelected\r\n            this.tangFeatureLayers[14].labelsVisible = true\r\n            if(this.t) clearTimeout(this.t)\r\n            this.queryForChar()\r\n          }else {\r\n            this.tangFeatureLayers[14].definitionExpression = undefined\r\n            this.tangFeatureLayers[14].labelsVisible = false\r\n            \r\n            if (this.highlightSelectChar.length) {\r\n              this.highlightSelectChar.map((highlight) => {\r\n                highlight.remove();\r\n                return void 0;\r\n              })\r\n            }\r\n            if(this.t) clearTimeout(this.t)\r\n            this.graphic.geometry = undefined\r\n          }\r\n        }\r\n\r\n        //\r\n        if(this.props.isEventSelectChangeToAnother && !this.props.isCharSelectChangeToAnother && !this.props.isYearSelectChangeToAnother){\r\n          if (this.props.eventSelected) {\r\n            this.queryForEvent()\r\n          } \r\n          else {\r\n            if (this.highlightSelectEvent) {\r\n              this.highlightSelectEvent.remove()\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  interpolation(pointA, pointB, speed) {\r\n    var tmp = [];\r\n    if (speed === undefined) {\r\n      speed = 1;\r\n    }\r\n    var count = Math.abs(speed) * 25;\r\n    var disX = (pointB.x - pointA.x) / count;\r\n    var disY = (pointB.y - pointA.y) / count;\r\n    var i = 0;\r\n    while (i <= count) {\r\n      var p = pointA.clone()\r\n      p.x = pointA.x + i * disX;\r\n      p.y = pointA.y + i * disY;\r\n\r\n      tmp.push(p);\r\n      i++;\r\n    }\r\n    tmp.push(pointB);//防止插值出来的最后一个点到不了B点\r\n    return tmp;\r\n  }\r\n  drawLine(feature,layerView) {\r\n    this.traj = []\r\n    for (let i = 0; i < feature.length - 1; i++) {\r\n      this.traj.push(this.interpolation(feature[i].geometry, feature[i + 1].geometry))\r\n    }\r\n    var polyline = {\r\n      type: 'polyline',\r\n      paths: []\r\n    }\r\n    var lineSymbol = {\r\n      type: \"simple-line\", // autocasts as SimpleLineSymbol()\r\n      color: [226, 119, 40],\r\n      width: 1.5\r\n    };\r\n\r\n    this.graphic.symbol = lineSymbol\r\n\r\n    for (let i = 0; i < this.traj.length; i++) {\r\n      for (let j = 0; j < this.traj[i].length - 1; j++) {\r\n        polyline.paths.push([this.traj[i][j].x, this.traj[i][j].y])\r\n      }\r\n    }\r\n    let nPolyline = {\r\n      type: 'polyline',\r\n      paths: []\r\n    };\r\n    let cnt = 0\r\n    let draw = () => {\r\n      if(this.props.isShowChar && this.props.charSelected){\r\n        if (polyline.paths.length > 0) {\r\n          this.t = setTimeout(() => {\r\n            let tmp = polyline.paths.shift()\r\n            nPolyline.paths.push(tmp);\r\n            if(tmp[0]===feature[cnt].geometry.x && tmp[1]===feature[cnt].geometry.y){\r\n              if(this.props.curDrawingPoint) this.props.curDrawingPoint(cnt)\r\n              this.highlightSelectChar.push(layerView.highlight(\r\n                feature[cnt++].attributes['FID']))\r\n            }\r\n            this.graphic.geometry = nPolyline;\r\n\r\n            this.view.goTo({center:[tmp[0]+3,tmp[1]],zoom:6},{duration:500,easing: 'in-out-expo'})\r\n            draw();\r\n          }, 100)\r\n        }else{\r\n          clearTimeout(this.t)\r\n        }\r\n      }else{\r\n        clearTimeout(this.t)\r\n        this.graphic.geometry = undefined\r\n      }\r\n    }\r\n    draw()\r\n  }\r\n  queryForChar() {\r\n    let charLayer = this.map.layers.items[14]\r\n    this.view.whenLayerView(charLayer).then((layerView) => {\r\n      var queryChar = charLayer.createQuery();\r\n      queryChar.where = \"ID=\" + this.props.charSelected\r\n      charLayer.queryFeatures(queryChar).then((result) => {\r\n        if (this.highlightSelectChar.length) {\r\n          this.highlightSelectChar.map((highlight) => {\r\n            highlight.remove()\r\n            return void 0;\r\n          })\r\n        }\r\n        let feature = result.features\r\n        // let x = 0, y = 0\r\n        // for (let i = 0; i < feature.length; i++) {\r\n        //   x += feature[i].geometry.x\r\n        //   y += feature[i].geometry.y\r\n        // }\r\n        // x /= feature.length\r\n        // y /= feature.length\r\n        this.view.goTo(\r\n          {\r\n            center:[feature[0].geometry.x+3,feature[0].geometry.y],\r\n            zoom: 6\r\n          },\r\n          {\r\n            duration: 1000,\r\n            easing: 'in-out-expo'\r\n          })\r\n        setTimeout(()=>{\r\n          this.drawLine(feature,layerView)\r\n        },1000)\r\n        return void 0;\r\n      })\r\n    })\r\n  }\r\n  queryForEvent() {\r\n    let eventLayer = this.map.layers.items[13]\r\n    this.view.whenLayerView(eventLayer).then((layerView) => {\r\n      var queryEvents = eventLayer.createQuery();\r\n      queryEvents.where = \"FID=\" + this.props.eventSelected\r\n      eventLayer.queryFeatures(queryEvents).then((result) => {\r\n        if (this.highlightSelectEvent) {\r\n          this.highlightSelectEvent.remove()\r\n        }\r\n        let feature = result.features[0]\r\n        this.highlightSelectEvent = layerView.highlight(\r\n          feature.attributes['FID']\r\n        )\r\n        this.view.goTo(\r\n          {\r\n            center: [feature.geometry.x + 3, feature.geometry.y],\r\n            zoom: 6,\r\n          },\r\n          {\r\n            duration: 1500,\r\n            easing: 'in-out-expo'\r\n          })\r\n      })\r\n    })\r\n  }\r\n  initMap() {\r\n    EsriLoader.loadModules([\r\n      \"esri/Map\",\r\n      \"esri/Basemap\",\r\n      \"esri/layers/TileLayer\",\r\n      \"esri/views/MapView\",\r\n      \"esri/layers/FeatureLayer\",\r\n      'esri/Graphic',\r\n      'esri/widgets/Zoom',\r\n      \"esri/widgets/Compass\",\r\n      'esri/widgets/ScaleBar',\r\n      'esri/widgets/Search',\r\n      \"dojo/domReady!\"\r\n    ], this.dojoUrl).then(([Map, Basemap, TileLayer, MapView, FeatureLayer,Graphic, Zoom, Compass, ScaleBar,Search]) => {\r\n      //\r\n      const popupTemplateForCountry = {\r\n        // autocasts as new PopupTemplate()\r\n        title: '国家信息',\r\n        content: [\r\n          {\r\n            type: \"fields\",\r\n            fieldInfos: [\r\n              {\r\n                fieldName: \"Name\",\r\n                label: \"国家名称\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"Area\",\r\n                label: \"面积  (Km^2)\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"isChina\",\r\n                label: \"是否属于中国\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      };\r\n      const popupTemplateForEvent = {\r\n        // autocasts as new PopupTemplate()\r\n        title: '事件信息',\r\n        content: [\r\n          {\r\n            type: \"fields\",\r\n            fieldInfos: [\r\n              {\r\n                fieldName: \"HName\",\r\n                label: \"名称\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"HCityName\",\r\n                label: \"发生地\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"Intro\",\r\n                label: \"简介\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"STime\",\r\n                label: \"开始时间\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"ETime\",\r\n                label: \"结束时间\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      };\r\n      const popupTemplateForChar = {\r\n        title: '人物经历',\r\n        content: [\r\n          {\r\n            type: \"fields\",\r\n            fieldInfos: [\r\n              {\r\n                fieldName: \"name\",\r\n                label: \"姓名\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"year\",\r\n                label: \"年份\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"place\",\r\n                label: \"地点\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"content\",\r\n                label: \"经历\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n            ]\r\n          }\r\n        ]\r\n      };\r\n      const popupTemplateForCity = {\r\n        title: '城市信息',\r\n        content: [\r\n          {\r\n            type: \"fields\",\r\n            fieldInfos: [\r\n              {\r\n                fieldName: \"CityName\",\r\n                label: \"名称\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"lat\",\r\n                label: \"纬度\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n              {\r\n                fieldName: \"lng\",\r\n                label: \"经度\",\r\n                format: {\r\n                  places: 0,\r\n                  digitSeparator: true\r\n                }\r\n              },\r\n            ]\r\n          }\r\n        ]\r\n      };\r\n      for (let i = 0; i <= 15; i++) {\r\n        if (i <= 15) {\r\n          let tangLayerUrl = this.baseFeatureUrl + i\r\n          this.tangFeatureLayers.push(\r\n            new FeatureLayer({\r\n              url: tangLayerUrl,\r\n              id: 'tangLayer' + i,\r\n              visible: false,\r\n              popupTemplate: i <= 12 ? popupTemplateForCountry : i === 13 ? popupTemplateForEvent : i === 14 ? popupTemplateForChar : popupTemplateForCity,\r\n            })\r\n          )\r\n        }\r\n      }\r\n      //\r\n      let tileLayer = new TileLayer({\r\n        url: this.tileMapUrl\r\n      });\r\n      let baseMap = new Basemap({\r\n        baseLayers: [tileLayer],\r\n        id: 'myBaseMap'\r\n      });\r\n      this.map = new Map({\r\n        basemap: baseMap,\r\n        layers: this.tangFeatureLayers\r\n      });\r\n      this.view = new MapView({\r\n        center: [115, 32.1],\r\n        map: this.map,\r\n        container: \"mapDiv\",\r\n        zoom: 5\r\n      });\r\n      this.graphic = new Graphic()\r\n      let zoom = new Zoom({\r\n        view: this.view,\r\n        layout:'horizontal'\r\n      })\r\n      let compass = new Compass({\r\n        view: this.view\r\n      });\r\n      let scaleBar = new ScaleBar({\r\n        view: this.view,\r\n        unit: 'metric'\r\n      })\r\n      this.search = new Search({\r\n        view:this.view,\r\n        allPlaceholder:'找点什么',\r\n        includeDefaultSources:false,\r\n      })\r\n      this.searchSource = this.tangFeatureLayers.map((layer,idx)=>{\r\n        return {\r\n          layer:layer,\r\n          searchFields:\r\n            idx<=12?['Name']:\r\n            idx===13?[\"HName\"]:\r\n            idx===14?['name']:\r\n            ['CityName'],\r\n          suggestionTemplate: \r\n            idx<=12?\"{Name}\":\r\n            idx===13?\"{HName}, 城市:{HCityName}, 起始时间:{STime}, 结束时间:{ETime}\":\r\n            idx===14?\"{name}, 年份:{year}, 地点:{place}, 经历:{content}\":\r\n            \"{CityName}, 经度:{lng}, 纬度:{lat}\",\r\n          displayField:\r\n            idx<=12?'Name':\r\n            idx===13?\"HName\":\r\n            idx===14?'name':\r\n            'CityName',\r\n          exactMatch:false,\r\n          name:\r\n            idx<=12?\"国家\":\r\n            idx===13?\"事件\":\r\n            idx===14?\"人物\":\r\n            \"城市\",\r\n          placeholder:\r\n            idx<=12?\"查找国家-例：唐\":\r\n            idx===13?\"查找事件-例：贞观之治\":\r\n            idx===14?\"查找人物-例：李白\":\r\n            \"查找城市-例：长安\",\r\n        }\r\n      })\r\n      this.view.graphics.add(this.graphic)\r\n      this.view.ui.remove('zoom')\r\n      this.view.ui.add(zoom)\r\n      this.view.ui.add(compass)\r\n      this.view.ui.add(scaleBar, 'bottom-right')\r\n      this.view.ui.add(this.search)\r\n      let len = this.map.layers.items.length\r\n      let queryLayer = this.map.layers.items[len - 1]\r\n      this.view.when(function () {\r\n          return queryLayer.when(function () {\r\n            let query = queryLayer.createQuery()\r\n            return queryLayer.queryFeatures(query)\r\n          })\r\n      })\r\n      //\r\n    })\r\n  }\r\n\r\n  handleLayerPlay(e){\r\n    this.stopUpdate = !this.stopUpdate\r\n    this.setState({isPlay:!this.state.isPlay})\r\n    console.log(this.state.isPlay)\r\n\r\n    this.view.goTo({center:[115, 32.1],zoom:4},{duration:1000,easing:'in-out-expo'})\r\n    for(let i=0;i<13;i++){\r\n      this.map.layers.items[i].visible = false\r\n      this.map.layers.items[i].definitionExpression = \"Name='唐'\"\r\n    }\r\n    var play = ()=>{\r\n      let i=0\r\n      let t=setInterval(()=>{\r\n        if(i<=12) {\r\n          if(i) {\r\n            this.map.layers.items[i-1].visible = false\r\n          }\r\n          this.map.layers.items[i].visible = true\r\n          this.map.layers.items[15].visible = true\r\n          console.log(i)\r\n        }\r\n        if(i===13){\r\n          this.stopUpdate = !this.stopUpdate\r\n          console.log(this.state)\r\n          this.setState({isPlay:!this.state.isPlay})\r\n          this.map.layers.items.map((f,idx)=>{\r\n            f.definitionExpression = undefined;\r\n            return void 0;\r\n          })\r\n          clearInterval(t)\r\n        }\r\n        i++;\r\n        return void 0;\r\n      },2000)\r\n    }\r\n    play()\r\n  }\r\n  render() {\r\n    return (\r\n        <div id='mapDiv' style={{ height: '100%', width: '100%',padding:'5px'}}>\r\n          <Button loading={this.state.isPlay} onClick={this.handleLayerPlay.bind(this)} ghost icon={'caret-right'} \r\n          style={{position:'absolute',left:'20px',bottom:'50px'}}>播放边界变化</Button>\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MainBox","import React,{Component} from 'react'\r\nimport {Drawer} from 'antd'\r\n\r\nclass EventDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isOpen:false\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <Drawer\r\n      title={\"事件简介\"}\r\n      placement=\"right\"\r\n      closable={false}\r\n      visible={this.props.isShow}\r\n      mask={false}\r\n      style={{marginTop:'60px'}}\r\n      >\r\n        <p>{'事件名称：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HName:'')}</p>\r\n        <p>{'发生地点：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HCityName:'')}</p>\r\n        <p>{'起始时间：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].STime+' 年':'')}</p>\r\n        <p>{'结束时间：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].ETime+' 年':'')}</p>\r\n        <p>{'事件简介：'}</p>\r\n        <p style={{textIndent:'2em'}}>{this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].Intro:''}</p>\r\n      </Drawer>\r\n  )}\r\n}\r\n\r\nexport default EventDrawer","import React,{Component} from 'react';\r\nimport { Timeline } from 'antd';\r\n\r\nclass ExpTimeline extends Component{\r\n  render(){\r\n    return(\r\n      <div>\r\n        <Timeline>\r\n          <div className={'charExp'}>人物经历</div>\r\n          {this.props.exp.map((e,idx)=>{ \r\n            return <Timeline.Item key={idx} color={'#dc9123'}>\r\n              {e.year+'年，'+e.place+'，'+e.intro}\r\n            </Timeline.Item>\r\n          })}\r\n        </Timeline>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ExpTimeline","import React,{Component} from 'react'\r\nimport {Drawer} from 'antd'\r\n\r\nclass CharDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isOpen:false\r\n    }\r\n    this.iconURL = '../../icon/'\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <Drawer\r\n      title={\"人物简介\"}\r\n      placement=\"right\"\r\n      closable={false}\r\n      visible={this.props.isShow}\r\n      mask={false}\r\n      style={{marginTop:'60px'}}\r\n      >\r\n        <div style={{align:'center',textAlign:'center'}}>\r\n          <img\r\n            alt=\"icon\" src={this.iconURL+(this.props.charSelected?this.props.charSelected:'-1')+'.jpg'} />\r\n        </div>\r\n        <hr/>\r\n        <p>{'姓名：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Name:'')}</p>\r\n        <p>{'字：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].zi:'')}</p>\r\n        <p>{'号：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].hao:'')}</p>\r\n        <p>{'生年：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].STime+' 年':'')}</p>\r\n        <p>{'卒年：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].ETime+' 年':'')}</p>\r\n        <p>{'出生地：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Home:'')}</p>\r\n        <p>{'简介：'}</p>\r\n        <p style={{textIndent:'2em'}}>{this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Intro:''}</p>\r\n      </Drawer>\r\n  )}\r\n}\r\n\r\nexport default CharDrawer","import React, { Component } from 'react';\nimport Header from './compnents/Header/Header'\nimport LeftSider from './compnents/LeftSider/LeftSider'\nimport MainBox from './compnents/MainBox/MainBox'\nimport EventDrawer from './compnents/Drawer/EventDrawer'\nimport ExpTimeline from './compnents/Timelist/ExpTimeline'\nimport { Layout } from 'antd';\nimport './App.css';\nimport CharDrawer from './compnents/Drawer/CharDrawer';\nimport Config from './config';\n\nconst staticPath = Config.staticPath;\n\nconst { Content } = Layout\nclass App extends Component {\n  constructor() {\n    super()\n    this.state = {\n      yearSelectedKeys: [],\n      charSelectedKeys: [],\n      eventSelectedKeys: [],\n      isYearOpen: true,\n      isEventOpen: false,\n      isCharOpen: false,\n      charProfiles: [],\n      years: [],\n      events: [],\n      experience: [],\n      curDrawing: 0,\n      isCharDrawerOpen: false,\n      isEventDrawerOpen: false,\n      isCharSelectChangeToAnother: false,\n      isEventSelectChangeToAnother: false,\n      isYearSelectChangeToAnother: false,\n    }\n  }\n\n  componentDidMount() {\n    const yearData = fetch(staticPath + 'json/year.json').then(res => res.json())\n    const profileData = fetch(staticPath + 'json/profile.json').then(res => res.json())\n    const eventData = fetch(staticPath + 'json/event.json').then(res => res.json())\n    const experienceData = fetch(staticPath + 'json/experience.json').then(res => res.json())\n    Promise.all([yearData, profileData, eventData, experienceData]).then((dataList) => {\n      console.log(dataList)\n      this.setState({\n        years: dataList[0],\n        charProfiles: dataList[1],\n        events: dataList[2],\n        experience: dataList[3]\n      })\n    }).catch((err) => {\n      console.log(err);\n    })\n  }\n  componentWillUpdate() {\n\n  }\n  handleSelectChange(e) {\n    if (e.keyPath[1] === 'years') {\n      this.setState({\n        isYearSelectChangeToAnother: true,\n        isCharSelectChangeToAnother: false,\n        isEventSelectChangeToAnother: false\n      })\n      if (!this.state.yearSelectedKeys.length) {\n        this.setState({ yearSelectedKeys: [e.key] })\n      }\n      else if (this.state.yearSelectedKeys[0] === e.key) {\n        this.setState({ yearSelectedKeys: [] })\n      } else {\n        this.setState({ yearSelectedKeys: [e.key] })\n      }\n    }\n    if (e.keyPath[1] === 'events') {\n      this.setState({\n        isYearSelectChangeToAnother: false,\n        isCharSelectChangeToAnother: false,\n        isEventSelectChangeToAnother: true\n      })\n      if (!this.state.eventSelectedKeys.length) {\n        this.setState({\n          eventSelectedKeys: [e.key],\n          isEventDrawerOpen: true,\n          isCharDrawerOpen: false,\n        })\n      }\n      else if (this.state.eventSelectedKeys[0] === e.key) {\n        this.setState({\n          eventSelectedKeys: [],\n          isEventDrawerOpen: false,\n          isCharDrawerOpen: this.state.charSelectedKeys.length ? true : false,\n        })\n      } else {\n        this.setState({\n          eventSelectedKeys: [e.key],\n          isEventDrawerOpen: true,\n          isCharDrawerOpen: false,\n        })\n      }\n    }\n    if (e.keyPath[1] === 'characters') {\n      this.setState({\n        isYearSelectChangeToAnother: false,\n        isEventSelectChangeToAnother: false,\n        isCharSelectChangeToAnother: true\n      })\n      if (!this.state.charSelectedKeys.length) {\n        this.setState({\n          charSelectedKeys: [e.key],\n          isEventDrawerOpen: false,\n          isCharDrawerOpen: true,\n        })\n      }\n      else if (this.state.charSelectedKeys[0] === e.key) {\n        this.setState({\n          charSelectedKeys: [],\n          isCharDrawerOpen: false,\n          isEventDrawerOpen: this.state.eventSelectedKeys.length ? true : false,\n        })\n      } else {\n        this.setState({\n          charSelectedKeys: [e.key],\n          isEventDrawerOpen: false,\n          isCharDrawerOpen: true,\n        })\n      }\n    }\n  }\n\n  handleEventOpen(e) {\n    console.log(e)\n    if (!e.length) this.setState({ isEventDrawerOpen: false, isCharDrawerOpen: this.state.charSelectedKeys.length ? true : false })\n    this.setState({\n      isEventOpen: this.state.isEventOpen ? false : true,\n      eventSelectedKeys: [],\n      isEventSelectChangeToAnother: this.state.isEventSelectChangeToAnother ? false : true,\n      isCharSelectChangeToAnother: false,\n      isYearSelectChangeToAnother: false\n    })\n  }\n\n  handleCharOpen(e) {\n    if (!e.length) this.setState({ isCharDrawerOpen: false, isEventDrawerOpen: this.state.eventSelectedKeys.length ? true : false })\n    this.setState({\n      isCharOpen: this.state.isCharOpen ? false : true,\n      charSelectedKeys: [],\n      isCharSelectChangeToAnother: this.state.isCharSelectChangeToAnother ? false : true,\n      isEventSelectChangeToAnother: false,\n      isYearSelectChangeToAnother: false\n    })\n  }\n\n  handleYearOpen(e) {\n    if (!e.length) this.setState({ isYearOpen: this.state.isYearOpen ? false : true, yearSelectedKeys: [] })\n    this.setState({\n      isYearOpen: this.state.isYearOpen ? false : true,\n      isCharSelectChangeToAnother: false,\n      isEventSelectChangeToAnother: false,\n      isYearSelectChangeToAnother: this.state.isYearSelectChangeToAnother ? false : true\n    })\n  }\n  render() {\n    const exp = []\n    this.state.experience.length && this.state.experience['Tang'].map((e) => {\n      if (e.ID === this.state.charSelectedKeys[0]) exp.push(e)\n      return void 0;\n    })\n    return (\n      <div className=\"App\">\n        <Header />\n        <LeftSider\n            years={this.state.years} charProfiles={this.state.charProfiles} events={this.state.events}\n            onSelect={this.handleSelectChange.bind(this)} onYearOpen={this.handleYearOpen.bind(this)}\n            onEventOpen={this.handleEventOpen.bind(this)} onCharOpen={this.handleCharOpen.bind(this)} />\n        <Layout style={{ position: 'relative', height: 'calc(100% - 60px)' }}>\n          <Content style={{ position: 'relative' }}>\n            <MainBox\n              yearSelected={this.state.yearSelectedKeys[0]}\n              charSelected={this.state.charSelectedKeys[0]}\n              eventSelected={this.state.eventSelectedKeys[0]}\n              isShowYear={this.state.isYearOpen}\n              isShowEvent={this.state.isEventOpen}\n              isShowChar={this.state.isCharOpen}\n              isYearSelectChangeToAnother={this.state.isYearSelectChangeToAnother}\n              isCharSelectChangeToAnother={this.state.isCharSelectChangeToAnother}\n              isEventSelectChangeToAnother={this.state.isEventSelectChangeToAnother}\n              curDrawingPoint={this.handleCurDrawing}\n            />\n            {exp.length ? <ExpTimeline exp={exp} /> : null}\n          </Content>\n          <EventDrawer\n            events={this.state.events}\n            isShow={this.state.isEventDrawerOpen}\n            eventSelected={this.state.eventSelectedKeys[0]} />\n          <CharDrawer\n            chars={this.state.charProfiles}\n            isShow={this.state.isCharDrawerOpen}\n            charSelected={this.state.charSelectedKeys[0]} />\n        </Layout>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n","export const Config = {\n    staticPath: 'http://localhost:8887/'\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectors\":\"iOiwMT-1TxxMLRgACDatD\"};"],"sourceRoot":""}