(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,a){e.exports={play_button:"_1A0Na77mvvdzir8BTaZ7Pe"}},206:function(e,t,a){e.exports={selectors:"iOiwMT-1TxxMLRgACDatD"}},209:function(e,t,a){e.exports={charts:"oEFAxP79VZEMLn9X4OCbh"}},210:function(e,t,a){e.exports={searchWrapper:"_5UDuQJuf1p8makYUDFNrA"}},214:function(e,t,a){e.exports=a(383)},219:function(e,t,a){},220:function(e,t,a){},382:function(e,t,a){},383:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(5),s=a.n(i),o=(a(219),a(14)),l=a(15),c=a(17),h=a(16),p=a(18),u=a(386),d=(a(220),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).state={visible:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleClickbout",value:function(){this.setState({visible:!0})}},{key:"handleCancel",value:function(){this.setState({visible:!1})}},{key:"render",value:function(){return n.a.createElement("div",{className:"header"},n.a.createElement("span",{className:"title"},this.props.title),n.a.createElement("button",{className:"about",onClick:this.handleClickbout.bind(this)},this.props.about),n.a.createElement(u.a,{title:this.props.aboutTitle,visible:this.state.visible,okText:"\u786e\u8ba4",footer:null,onCancel:this.handleCancel.bind(this)},n.a.createElement("p",null,"\u7b80\u4ecb\uff1a\u8be5\u5e73\u53f0\u5c55\u793a\u4e86\u5510\u671d\u4e0d\u540c\u5e74\u4ee3\u7684\u7586\u754c\u8303\u56f4\u3001\u4eba\u7269\u8f68\u8ff9\u53ca\u5386\u53f2\u4e8b\u4ef6\uff0c\u5e76\u652f\u6301\u67e5\u8be2\u641c\u7d22\u7b49\u529f\u80fd\u3002"),n.a.createElement("p",null,"\u5236\u4f5c\u6210\u5458\uff1a\u4faf\u9a81\u8c0b \u52b3\u5927\u948a \u5434\u5b87\u4e1c \u8a79\u6587")))}}]),t}(r.Component));d.defaultProps={title:"\u5510\u4ee3\u5386\u53f2\u5730\u7406\u6570\u636e\u5c55\u793a\u5e73\u53f0",about:"\u5173\u4e8e\u6211\u4eec",aboutTitle:"ESRI DEMO-\u5510\u671d\u5386\u53f2\u5730\u7406\u4fe1\u606f\u5c55\u793a\u5e73\u53f0"};var v=d,y=a(385),m=a(387),f=a(33),b=a(206),g=a.n(b),S=a(137),w=S.a.Option,E=y.b.SubMenu,j=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).state={collapsed:!1,yearLabel:void 0,yearSelectedKeys:[],eventSelectedKeys:[],charSelectedKeys:[],currentYear:["\u590f","-2100\u5e74"],currentPeople:null,currentEvent:null},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleEventSelect",value:function(e){console.log(e),this.setState({currentEvent:e})}},{key:"handlePeopleSelect",value:function(e){console.log(e),this.setState({currentPeople:e})}},{key:"handleYearSelect",value:function(e,t,a){this.props.onSelectYear(a),this.setState({currentYear:[e,t],currentPeople:null,currentEvent:null})}},{key:"render",value:function(){var e=this,t=n.a.createElement(y.b,{style:{maxHeight:500,overflowY:"auto"}},function(t){for(var a=[],r=function(){var r=s[i];a.push(n.a.createElement(E,{title:r,key:r},t[r].map(function(t,a){return n.a.createElement(y.b.Item,{key:r+t.Year+a,onClick:e.handleYearSelect.bind(e,r,t.Year,t.idx)},t.Year)})))},i=0,s=Object.keys(t);i<s.length;i++)r();return a}(this.props.years)),a=n.a.createElement(S.a,{showSearch:!0,onChange:this.handleEventSelect.bind(this),allowClear:!0,placeholder:"".concat(this.state.currentYear[0],": \u5386\u53f2\u4e8b\u4ef6"),style:{width:140,overflowY:"auto"}},this.props.events[this.state.currentYear[0]]&&this.props.events[this.state.currentYear[0]].map(function(e){return n.a.createElement(w,{value:e.HName},e.HName)})),r=n.a.createElement(S.a,{showSearch:!0,onChange:this.handlePeopleSelect.bind(this),allowClear:!0,placeholder:"".concat(this.state.currentYear[0],": \u5386\u53f2\u4eba\u7269"),style:{width:140,overflowY:"auto"}},this.props.charProfiles[this.state.currentYear[0]]&&this.props.charProfiles[this.state.currentYear[0]].map(function(e){return n.a.createElement(w,{value:e.Name},e.Name)})),i=n.a.createElement(y.b,{style:{maxHeight:500,overflowY:"auto"}},this.props.currentTile&&this.props.tilesMap.map(function(t){return n.a.createElement(y.b.Item,{key:t,onClick:function(){e.props.handleTileSelect(t)}},t)}));return n.a.createElement("div",{className:g.a.selectors},n.a.createElement("div",null,n.a.createElement(m.a,{overlay:t,trigger:["click"]},n.a.createElement(f.a,null,this.state.currentYear.join(" ")||"\u5e74\u4ee3\u8fb9\u754c"))),n.a.createElement("div",null,r),n.a.createElement("div",null,a),n.a.createElement("div",null,n.a.createElement(m.a,{overlay:i,trigger:["click"]},n.a.createElement(f.a,null,"\u5e95\u56fe: ".concat(this.props.currentTile||"\u5e95\u56fe")))))}}]),t}(r.Component),O=a(212),k=a(208),C=a.n(k),x=a(138),Y=a.n(x);var T={type:"unique-value",field:"China",defaultSymbol:{type:"simple-fill"},uniqueValueInfos:[{value:"0",symbol:{type:"simple-fill",color:[51,51,204,.5]}},{value:"1",symbol:{type:"simple-fill",color:[151,51,204,.5]}},{value:"2",symbol:{type:"simple-fill",color:[51,51,44,.5]}},{value:"3",symbol:{type:"simple-fill",color:[251,51,204,.5]}}]},L={type:"heatmap",field:"STime",colorStops:[{color:"rgba(63, 40, 102, 0)",ratio:0},{color:"#472b77",ratio:.083},{color:"#4e2d87",ratio:.166},{color:"#563098",ratio:.249},{color:"#5d32a8",ratio:.332},{color:"#6735be",ratio:.415},{color:"#7139d4",ratio:.498},{color:"#7b3ce9",ratio:.581},{color:"#853fff",ratio:.664},{color:"#a46fbf",ratio:.747},{color:"#c29f80",ratio:.83},{color:"#e0cf40",ratio:.913},{color:"#ffff00",ratio:1}],maxPixelIntensity:25,minPixelIntensity:0},M=a(24),P=a.n(M),N=(a(338),a(358),a(369),a(381),a(209)),B=a.n(N),D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).charts=n.a.createRef(),a.lineChartsInstance=null,a.option=null,a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderChart",value:function(e){var t=this;this.lineChartsInstance=P.a.init(this.charts.current),this.lineChartsInstance.setOption(this.option={tooltip:{trigger:"axis"},xAxis:{data:e.map(function(e){return e[0]})},yAxis:{show:!0,splitLine:{show:!1},interval:5e8,name:"\u9762\u79ef"},dataZoom:[{startValue:"2014-06-01"},{type:"inside"}],visualMap:{top:10,right:10},series:{name:"\u7586\u57df\u9762\u79ef",type:"line",data:e.map(function(e){return e[1]}),areaStyle:{}}}),this.lineChartsInstance.on("click","series",function(e){var a=e.dataIndex;t.props.onClick(a)})}},{key:"componentDidMount",value:function(){this.props.data.length&&this.renderChart.call(this,this.props.data)}},{key:"componentDidUpdate",value:function(){this.props.data.length&&this.renderChart.call(this,this.props.data)}},{key:"render",value:function(){return n.a.createElement("div",{style:this.props.style,className:B.a.charts},n.a.createElement("div",{ref:this.charts}))}}]),t}(r.Component),F=a(210),U=a.n(F),A=a(390),I=a(211),R=a(10),W=A.a.Option,H=A.a.OptGroup,K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(h.a)(t).call(this,e))).state={dataSource:a.initData("")},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"initData",value:function(e){var t=this;if(!this.props.year)return null;var a=[],r=[];Object.keys(this.props.year).forEach(function(n){t.props.year[n].forEach(function(t){t.Year.includes(e)&&-1===r.indexOf(n+": "+t.Year)&&(a.push({title:n,content:n+": "+t.Year}),r.push(n+": "+t.Year))})});var i=[];r=[],Object.keys(this.props.event).forEach(function(a){t.props.event[a].forEach(function(t){t.HName.includes(e)&&-1===r.indexOf(a+": "+t.HName)&&i.push({title:a,content:a+": "+t.HName})})});var s=[];r=[],Object.keys(this.props.people).forEach(function(a){t.props.people[a].forEach(function(t){t.Name.includes(e)&&-1===r.indexOf(a+": "+t.Name)&&s.push({title:a,content:a+": "+t.Name})})});var o=[{title:"\u5e74\u4ee3",children:a},{title:"\u4e8b\u4ef6",children:i},{title:"\u4eba\u7269",children:s}].map(function(e){return n.a.createElement(H,{key:e.title,label:(t=e.title,n.a.createElement("span",null,t))},e.children.map(function(e,t){return n.a.createElement(W,{key:e.title+e.content+t,value:e.content},n.a.createElement("span",{className:"certain-search-item-count"},e.content))}));var t});this.setState({dataSource:o})}},{key:"handleSearch",value:function(e){this.initData(e)}},{key:"render",value:function(){return n.a.createElement("div",{className:U.a.searchWrapper,style:{width:250}},n.a.createElement(A.a,{className:"certain-category-search",dropdownClassName:"certain-category-search-dropdown",dropdownMatchSelectWidth:!0,dropdownStyle:{width:300},size:"large",style:{width:"100%"},dataSource:this.state.dataSource,placeholder:"\u641c\u7d22",optionLabelProp:"value",onSearch:this.handleSearch.bind(this)},n.a.createElement(I.a,{suffix:n.a.createElement(R.a,{type:"search",className:"certain-category-icon"})})))}}]),t}(r.Component),V={staticPath:"http://localhost:8887/",gisRestServer:"https://172.20.32.70:6443/arcgis/rest/services/",dojoServer:"http://tony-space.top:8007/arcgis_js_api/library/4.11/dojo/dojo.js"},_={0:[0,1],1:[1,2],2:[2,5],3:[5,10],4:[10,15],5:[15,19],6:[19,38],7:[38,41],8:[41,47],9:[47,51],10:[51,61],11:[61,69],12:[69,82],13:[82,91],14:[91,103],15:[103,111],16:[111,117],17:[117,128],18:[128,134]},z={"\u590f":[0,1],"\u5546":[1,2],"\u5468":[2,5],"\u6625\u79cb":[5,10],"\u6218\u56fd":[10,15],"\u79e6":[15,19],"\u6c49":[19,38],"\u4e09\u56fd":[38,41],"\u664b":[41,47],"\u5341\u516d\u56fd":[47,51],"\u5357\u5317":[51,61],"\u968b":[61,69],"\u5510":[69,82],"\u4e94\u4ee3\u5341\u56fd":[82,91],"\u5b8b":[91,103],"\u5143":[103,111],"\u6c11":[111,117],"\u6e05":[117,128],"\u6c11\u56fd":[128,134]};function q(e){var t=0;return Object.keys(z).forEach(function(a){z[a][1]>e&&z[a][0]<=e&&(t=a)}),t}var G=a(388),Q=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).state={isOpen:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(G.a,{title:"\u68c0\u7d22",placement:"right",closable:!0,visible:this.props.isShow,mask:!1,style:{marginTop:"60px"},onClose:this.props.onClose},n.a.createElement("div",{style:{fontSize:18}},"\u7586\u57df"),n.a.createElement("br",null),this.props.data.selectedBoundary.map(function(e){return n.a.createElement("div",null,"\u540d\u79f0\uff1a",e.Name," ",n.a.createElement("br",null),"\u9762\u79ef\uff1a",e.Area," ",n.a.createElement("br",null),n.a.createElement("hr",null))}))}}]),t}(r.Component),Z=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(u.a,{title:"Basic Modal",visible:this.props.visible,onOk:this.props.handleOk,onCancel:this.props.handleCancel,centered:!0,width:"80%"},this.props.children))}}]),t}(n.a.Component),J={title:"{HName}",content:"\u4f4d\u7f6e\uff1a{HCityName}, \u4e8b\u4ef6\uff1a{HName}"},X=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).tangFeatureLayers=[],e.dojoUrl=V.dojoServer,e.tileMapUrl="http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer",e.baseBoundaryFeatureUrl=V.gisRestServer+"country_boundary/MapServer/",e.baseEventFeatureUrl=V.gisRestServer+"events_point/MapServer",e.basePeopleFeatureUrl=V.gisRestServer+"country_boundary/MapServer/",e.highlightSelectChar=[],e.state={isPlay:!1,playControllerText:"\u64ad\u653e\u8fb9\u754c\u53d8\u5316",sliderValue:0,selectedBoundary:[],rightDrawShow:!1,showYearModal:!1},e.playTimer=null,e.stopUpdate=!0,e.selectGrphics=[],e.changeBaseMap=function(){},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.initMap()}},{key:"componentDidUpdate",value:function(e,t){e.currentYear!==this.props.currentYear&&this.changeBoundaryLayer(this.props.currentYear),t.selectedBoundary!==this.state.selectedBoundary&&this.setState({rightDrawShow:!0})}},{key:"queryForChar",value:function(){var e=this,t=this.map.layers.items[14];this.view.whenLayerView(t).then(function(a){var r=t.createQuery();r.where="ID="+e.props.charSelected,t.queryFeatures(r).then(function(t){e.highlightSelectChar.length&&e.highlightSelectChar.map(function(e){e.remove()});var r=t.features;e.view.goTo({center:[r[0].geometry.x+3,r[0].geometry.y],zoom:6},{duration:1e3,easing:"in-out-expo"}),setTimeout(function(){e.drawLine(r,a)},1e3)})})}},{key:"initMap",value:function(){var e=this;C.a.loadModules(["esri/layers/GraphicsLayer","esri/widgets/Sketch","esri/Map","esri/Basemap","esri/layers/TileLayer","esri/views/MapView","esri/layers/FeatureLayer","esri/Graphic","esri/widgets/Zoom","esri/widgets/Compass","esri/widgets/ScaleBar","esri/widgets/Search","dojo/domReady!"],this.dojoUrl).then(function(t){var a=Object(O.a)(t,12),r=a[0],n=a[1],i=a[2],s=a[3],o=a[4],l=a[5],c=a[6],h=a[7],p=a[8],u=a[9],d=a[10];a[11];e.FeatureLayer=c,e.graphicsLayer2=new r,e.baseBoundaryFeatureLayer=new c({url:e.baseBoundaryFeatureUrl,id:"0",visible:!0,renderer:T}),e.baseEventFeatureLayer=new c({url:e.baseEventFeatureUrl,id:"4",visible:!0,popupTemplate:J,heatMapRenderer:L}),e.basePeopleFeatureLayer=new c({url:e.basePeopleFeatureUrl,id:"0",visible:!0,heatMapRenderer:L}),e.changeBaseMap=function(t){var a=new o({url:t}),r=new s({baseLayers:[a],id:"myBaseMap"});e.map&&(e.map.basemap=r)};var v=new o({url:e.tileMapUrl}),y=new s({baseLayers:[v],id:"myBaseMap"});e.map=new i({basemap:y,layers:[e.graphicsLayer2,e.baseEventFeatureLayer,e.baseBoundaryFeatureLayer]}),e.view=new l({center:[115,32.1],map:e.map,container:"mapDiv",zoom:5}),e.view.whenLayerView(e.baseBoundaryFeatureLayer).then(function(t){e.featureLayerView=t}),e.graphic=new h;var m=new p({view:e.view,layout:"horizontal"}),f=new u({view:e.view}),b=new d({view:e.view,unit:"metric"}),g=function(e,t){var a=new t({view:e.view,layer:e.graphicsLayer2});return a.on("create",function(t){if(e.setState({rightDrawShow:!0}),"complete"===t.state){var a=e.baseBoundaryFeatureLayer.createQuery();e.selectGrphics.push(t.graphic),a.geometry=t.graphic.geometry,a.spatialRelationship="intersects",e.baseBoundaryFeatureLayer.queryFeatures(a).then(function(t){console.log(t),e.boundaryhighlight&&e.boundaryhighlight.remove(),e.boundaryhighlight=e.featureLayerView.highlight(t.features);var a=[];if(t.features.length){var r=!0,n=!1,i=void 0;try{for(var s,o=t.features[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;a.push(l.attributes)}}catch(c){n=!0,i=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}e.setState({selectedBoundary:a})}})}}),a.on("update",function(t){e.setState({rightDrawShow:!0})}),a}(e,n);e.view.graphics.add(e.graphic),e.view.ui.padding={top:80,left:30,right:0,bottom:0},e.view.ui.remove("zoom"),e.view.ui.add(m),e.view.ui.add(f),e.view.ui.add(b,"bottom-right"),e.view.ui.add(g,"top-left");var S=e.map.layers.items.length,w=e.map.layers.items[S-1];e.view.when(function(){return w.when(function(){var e=w.createQuery();return w.queryFeatures(e)})})})}},{key:"changeBoundaryLayer",value:function(e){if(!this.map||!this.FeatureLayer)return 0;console.log(this.baseBoundaryFeatureUrl+e);var t=new this.FeatureLayer({url:this.baseBoundaryFeatureUrl+e,visible:!0,renderer:T}),a=function(e){var t=0;return Object.keys(_).forEach(function(a){_[a][1]>e&&_[a][0]<=e&&(t=parseInt(a))}),t}(e),r=new this.FeatureLayer({url:this.baseEventFeatureUrl+"/"+a,visible:!0,heatMapRenderer:L,popupTemplate:J});this.map.layers=[this.graphicsLayer2,r,t]}},{key:"openYearModal",value:function(){this.setState({yearModal:!0})}},{key:"handleSliderChange",value:function(e){if(!this.map)return 0;this.changeBoundaryLayer(e),this.setState({sliderValue:e})}},{key:"handleLayerPlay",value:function(){var e=this;this.stopUpdate=!this.stopUpdate,this.setState({isPlay:!this.state.isPlay}),this.view.goTo({center:[115,32.1],zoom:4},{duration:1e3,easing:"in-out-expo"});var t=0;if(this.playTimer)return clearInterval(this.playTimer),this.playTimer=null,void this.setState({playControllerText:"\u64ad\u653e\u8fb9\u754c\u53d8\u5316",isPlay:!1});this.setState({playControllerText:"\u6682\u505c\u64ad\u653e",isPlay:!0}),this.playTimer=setInterval(function(){t<121?(t&&e.changeBoundaryLayer.call(e,t),e.setState({sliderValue:t})):(e.stopUpdate=!e.stopUpdate,e.setState({isPlay:!1}),e.changeBoundaryLayer.call(e,t),clearInterval(e.playTimer),e.playTimer=null),t++},2e3)}},{key:"render",value:function(){var e=this;return console.log(this.props),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:"mapDiv",style:{height:"100%",width:"100%",padding:"5px"}}),n.a.createElement("div",{className:Y.a.traj_set}),n.a.createElement("div",{className:Y.a.play_button},n.a.createElement(f.a,{onClick:this.handleLayerPlay.bind(this),ghost:!0,icon:this.state.isPlay?"pause":"caret-right"},this.state.playControllerText)),n.a.createElement(D,{onClick:this.changeBoundaryLayer.bind(this),data:this.props.yearArea}),n.a.createElement(f.a,{style:{position:"absolute",right:70,bottom:80},onClick:this.openYearModal.bind(this)},"\u5e74\u4ee3\u53d8\u5316"),n.a.createElement(Z,{visible:this.state.yearModal,handleCancel:function(){return e.setState({yearModal:!1})},handleOk:function(){return e.setState({yearModal:!1})}},n.a.createElement(f.a,{onClick:function(){return e.setState({showWiki:!e.state.showWiki})}},"\u663e\u793a\u767e\u79d1"),this.state.showWiki&&n.a.createElement("iframe",{name:"wiki_frame",title:"baike",src:"https://baike.baidu.com/item/"+encodeURIComponent(q(this.props.currentYear))+"\u671d",height:"600px",width:"1240px",seamless:!0,frameborder:"0"}),n.a.createElement(D,{style:{position:"relative",left:0,right:0,bottom:0},onClick:this.props.onSelectYear,data:this.props.yearArea})),n.a.createElement(Q,{isShow:this.state.rightDrawShow,onClose:function(){return e.setState({rightDrawShow:!1})},data:{years:this.props.years,charProfiles:this.props.charProfiles,events:this.props.events,selectedBoundary:this.state.selectedBoundary}}),!this.state.rightDrawShow&&n.a.createElement(f.a,{style:{position:"absolute",right:0,bottom:3,height:"99%",width:15,padding:0},onClick:function(){return e.setState({rightDrawShow:!0})}},"<"),n.a.createElement(K,{year:this.props.years,event:this.props.events,people:this.props.charProfiles}))}}]),t}(r.Component),$=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).state={isOpen:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(G.a,{title:"\u4e8b\u4ef6\u7b80\u4ecb",placement:"right",closable:!1,visible:this.props.isShow,mask:!1,style:{marginTop:"60px"}},n.a.createElement("p",null,"\u4e8b\u4ef6\u540d\u79f0\uff1a"+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HName:"")),n.a.createElement("p",null,"\u53d1\u751f\u5730\u70b9\uff1a"+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HCityName:"")),n.a.createElement("p",null,"\u8d77\u59cb\u65f6\u95f4\uff1a"+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].STime+" \u5e74":"")),n.a.createElement("p",null,"\u7ed3\u675f\u65f6\u95f4\uff1a"+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].ETime+" \u5e74":"")),n.a.createElement("p",null,"\u4e8b\u4ef6\u7b80\u4ecb\uff1a"),n.a.createElement("p",{style:{textIndent:"2em"}},this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].Intro:""))}}]),t}(r.Component),ee=a(389),te=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(ee.a,null,n.a.createElement("div",{className:"charExp"},"\u4eba\u7269\u7ecf\u5386"),this.props.exp.map(function(e,t){return n.a.createElement(ee.a.Item,{key:t,color:"#dc9123"},e.year+"\u5e74\uff0c"+e.place+"\uff0c"+e.intro)})))}}]),t}(r.Component),ae=a(384),re=(a(382),function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).state={isOpen:!1},e.iconURL="../../icon/",e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(G.a,{title:"\u4eba\u7269\u7b80\u4ecb",placement:"right",closable:!1,visible:this.props.isShow,mask:!1,style:{marginTop:"60px"}},n.a.createElement("div",{style:{align:"center",textAlign:"center"}},n.a.createElement("img",{alt:"icon",src:this.iconURL+(this.props.charSelected?this.props.charSelected:"-1")+".jpg"})),n.a.createElement("hr",null),n.a.createElement("p",null,"\u59d3\u540d\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Name:"")),n.a.createElement("p",null,"\u5b57\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].zi:"")),n.a.createElement("p",null,"\u53f7\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].hao:"")),n.a.createElement("p",null,"\u751f\u5e74\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].STime+" \u5e74":"")),n.a.createElement("p",null,"\u5352\u5e74\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].ETime+" \u5e74":"")),n.a.createElement("p",null,"\u51fa\u751f\u5730\uff1a"+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Home:"")),n.a.createElement("p",null,"\u7b80\u4ecb\uff1a"),n.a.createElement("p",{style:{textIndent:"2em"}},this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Intro:""))}}]),t}(r.Component)),ne=V.staticPath,ie=["http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer","dark-gray","streets","hybrid"],se=ae.a.Content,oe=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).state={yearSelectedKeys:[],charSelectedKeys:[],eventSelectedKeys:[],isYearOpen:!0,isEventOpen:!1,isCharOpen:!1,charProfiles:[],years:[],events:[],experience:[],yearArea:[],curDrawing:0,currentYear:0,currentTileMap:"topo",isCharDrawerOpen:!1,isEventDrawerOpen:!1,isCharSelectChangeToAnother:!1,isEventSelectChangeToAnother:!1,isYearSelectChangeToAnother:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"onSelectYear",value:function(e){this.setState({currentYear:e})}},{key:"onSelectTileMap",value:function(e){this.setState({currentTileMap:e})}},{key:"processYearArea",value:function(e){var t=[];return Object.keys(e).forEach(function(a){Object.keys(e[a][0]).forEach(function(r){t.push([a+" "+r,e[a][0][r]])})}),t}},{key:"processYear",value:function(e){var t=0;return Object.keys(e).forEach(function(a){e[a].forEach(function(r,n){e[a][n]={Year:e[a][n]+"\u5e74",idx:t},t++})}),e}},{key:"componentDidMount",value:function(){var e=this,t=fetch(ne+"json/year.json").then(function(e){return e.json()}),a=fetch(ne+"json/profile.json").then(function(e){return e.json()}),r=fetch(ne+"json/event.json").then(function(e){return e.json()}),n=fetch(ne+"json/experience.json").then(function(e){return e.json()}),i=fetch(ne+"json/area.json").then(function(e){return e.json()});Promise.all([t,a,r,n,i]).then(function(t){console.log(t),e.setState({years:e.processYear(t[0]),charProfiles:t[1],events:t[2],experience:t[3],yearArea:e.processYearArea(t[4])})}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this,t=[];return this.state.experience.length&&this.state.experience.Tang.map(function(a){a.ID===e.state.charSelectedKeys[0]&&t.push(a)}),n.a.createElement("div",{className:"App"},n.a.createElement(v,null),n.a.createElement(j,{years:this.state.years,charProfiles:this.state.charProfiles,events:this.state.events,tilesMap:ie,handleTileSelect:this.onSelectTileMap.bind(this),currentTile:this.state.currentTileMap,onSelectYear:this.onSelectYear.bind(this)}),n.a.createElement(ae.a,{style:{position:"relative",height:"calc(100% - 60px)"}},n.a.createElement(se,{style:{position:"relative"}},n.a.createElement(X,{years:this.state.years,charProfiles:this.state.charProfiles,events:this.state.events,yearArea:this.state.yearArea,yearSelected:this.state.yearSelectedKeys[0],charSelected:this.state.charSelectedKeys[0],eventSelected:this.state.eventSelectedKeys[0],curDrawingPoint:this.handleCurDrawing,onSelectYear:this.onSelectYear.bind(this),currentYear:this.state.currentYear}),t.length?n.a.createElement(te,{exp:t}):null),n.a.createElement($,{events:this.state.events,isShow:this.state.isEventDrawerOpen,eventSelected:this.state.eventSelectedKeys[0]}),n.a.createElement(re,{chars:this.state.charProfiles,isShow:this.state.isCharDrawerOpen,charSelected:this.state.charSelectedKeys[0]})))}}]),t}(r.Component),le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(n.a.createElement(oe,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");le?(function(e,t){fetch(e).then(function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ce(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ce(t,e)})}}()}},[[214,1,2]]]);
//# sourceMappingURL=main.e6cfe074.chunk.js.map