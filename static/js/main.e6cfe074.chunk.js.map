{"version":3,"sources":["compnents/MainBox/mainBox.less","compnents/LeftSider/LeftSider.less","compnents/charts/YearSelector.less","compnents/Search/Search.less","compnents/Header/Header.js","compnents/LeftSider/LeftSider.js","compnents/MainBox/utils/renderer.js","compnents/charts/YearSelector.js","compnents/Search/Search.js","config/config.js","compnents/MainBox/utils/timeMap.js","compnents/Drawer/Common.js","compnents/YearModal/YearModal.js","compnents/MainBox/utils/popUpTemplate.js","compnents/MainBox/MainBox.js","compnents/MainBox/utils/sketch.js","compnents/Drawer/EventDrawer.js","compnents/Timelist/ExpTimeline.js","compnents/Drawer/CharDrawer.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","play_button","selectors","charts","searchWrapper","Header","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","visible","setState","react_default","a","createElement","className","props","title","onClick","handleClickbout","bind","about","modal","aboutTitle","okText","footer","onCancel","handleCancel","Component","defaultProps","Option","Select","SubMenu","Menu","LeftSider","collapsed","yearLabel","undefined","yearSelectedKeys","eventSelectedKeys","charSelectedKeys","currentYear","currentPeople","currentEvent","eventName","console","log","name","dynasty","year","idx","onSelectYear","_this2","years","menu","style","maxHeight","overflowY","yearList","_loop","_Object$keys","_i","push","key","map","index","Item","Year","handleYearSelect","keys","length","events","es_select","showSearch","onChange","handleEventSelect","allowClear","placeholder","concat","width","event","value","HName","people","handlePeopleSelect","charProfiles","char","Name","tiles","currentTile","tilesMap","tile","handleTileSelect","s","dropdown","overlay","trigger","es_button","join","renderer","type","field","defaultSymbol","uniqueValueInfos","symbol","color","heatMapRenderer","colorStops","ratio","maxPixelIntensity","minPixelIntensity","YearSelector","React","createRef","lineChartsInstance","option","data","echarts","init","current","setOption","tooltip","xAxis","item","yAxis","show","splitLine","interval","dataZoom","startValue","visualMap","top","right","series","areaStyle","on","e","dataIndex","renderChart","ref","AutoComplete","OptGroup","Complete","_Component","dataSource","initData","inherits","createClass","exist","forEach","y","c","includes","indexOf","content","options","children","group","label","opt","Search_Option","auto_complete","dropdownClassName","dropdownMatchSelectWidth","dropdownStyle","size","optionLabelProp","onSearch","handleSearch","input","suffix","icon","Config","staticPath","gisRestServer","dojoServer","timeMap","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","nameMap","夏","商","周","春秋","战国","秦","汉","三国","晋","十六国","南北","隋","唐","五代十国","宋","元","民","清","民国","searchName","dy","result","i","RightDrawer","isOpen","drawer","placement","closable","isShow","mask","marginTop","onClose","fontSize","selectedBoundary","Area","YearModal","_React$Component","apply","arguments","onOk","handleOk","centered","eventPopUpTemplate","MainBox","tangFeatureLayers","dojoUrl","config","tileMapUrl","baseBoundaryFeatureUrl","baseEventFeatureUrl","basePeopleFeatureUrl","highlightSelectChar","isPlay","playControllerText","sliderValue","rightDrawShow","showYearModal","playTimer","stopUpdate","selectGrphics","changeBaseMap","initMap","prevProps","prevState","changeBoundaryLayer","charLayer","layers","items","view","whenLayerView","then","layerView","queryChar","createQuery","where","charSelected","queryFeatures","highlight","remove","feature","features","goTo","center","geometry","x","zoom","duration","easing","setTimeout","drawLine","_this3","EsriLoader","loadModules","_ref","_ref2","slicedToArray","GraphicsLayer","Sketch","Map","Basemap","TileLayer","MapView","FeatureLayer","Graphic","Zoom","Compass","ScaleBar","graphicsLayer2","baseBoundaryFeatureLayer","url","id","baseEventFeatureLayer","popupTemplate","basePeopleFeatureLayer","tileLayer","baseMap","baseLayers","basemap","container","featureLayerView","graphic","layout","compass","scaleBar","unit","sketch","Obj","layer","query","spatialRelationship","results","boundaryhighlight","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","attributes","err","return","createSketch","graphics","add","ui","padding","left","bottom","len","queryLayer","when","boundaryLayer","evnetLayerIndex","parseInt","searchKey","eventLayer","yearModal","_this4","clearInterval","setInterval","_this5","Fragment","height","handleLayerPlay","ghost","YearSelector_YearSelector","yearArea","position","openYearModal","YearModal_YearModal","showWiki","src","encodeURIComponent","seamless","frameborder","Common_RightDrawer","Search_Complete","EventDrawer","eventSelected","HCityName","STime","ETime","textIndent","Intro","ExpTimeline","timeline","exp","place","intro","CharDrawer","iconURL","align","textAlign","alt","chars","zi","hao","Home","Content","Layout","App","isYearOpen","isEventOpen","isCharOpen","experience","curDrawing","currentTileMap","isCharDrawerOpen","isEventDrawerOpen","isCharSelectChangeToAnother","isEventSelectChangeToAnother","isYearSelectChangeToAnother","d","d1","yearData","fetch","res","json","profileData","eventData","experienceData","Promise","all","dataList","processYear","processYearArea","catch","error","ID","compnents_Header_Header","compnents_LeftSider_LeftSider","onSelectTileMap","compnents_MainBox_MainBox","yearSelected","curDrawingPoint","handleCurDrawing","Timelist_ExpTimeline","Drawer_EventDrawer","Drawer_CharDrawer","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","src_App_0","document","getElementById","URL","process","href","origin","addEventListener","response","contentType","headers","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"6EACAA,EAAAC,QAAA,CAAkBC,YAAA,gDCAlBF,EAAAC,QAAA,CAAkBE,UAAA,8CCAlBH,EAAAC,QAAA,CAAkBG,OAAA,8CCAlBJ,EAAAC,QAAA,CAAkBI,cAAA,yQCEZC,sBAOF,SAAAA,IAAa,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,IACTC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,KAAAH,QACKI,MAAQ,CACTC,SAAQ,GAHHR,iFAQTG,KAAKM,SAAS,CACVD,SAAS,2CAIbL,KAAKM,SAAS,CACVD,SAAS,qCAIb,OACIE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACXH,EAAAC,EAAAC,cAAA,QAAMC,UAAW,SAAUV,KAAKW,MAAMC,OACtCL,EAAAC,EAAAC,cAAA,UAAQC,UAAW,QAASG,QAASb,KAAKc,gBAAgBC,KAAKf,OAAQA,KAAKW,MAAMK,OAClFT,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CACIL,MAAOZ,KAAKW,MAAMO,WAClBb,QAASL,KAAKI,MAAMC,QACpBc,OAAQ,eACRC,OAAQ,KACRC,SAAUrB,KAAKsB,aAAaP,KAAKf,OAEjCO,EAAAC,EAAAC,cAAA,SAAI,gQACJF,EAAAC,EAAAC,cAAA,SAAI,gHArCHc,cAAf3B,EACK4B,aAAe,CAClBZ,MAAM,2EACNI,MAAM,2BACNE,WAAW,sFAwCJtB,6DC1CP6B,EAAWC,IAAXD,OACAE,EAAYC,IAAZD,QAsHOE,cAnHb,SAAAA,IAAc,IAAAhC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA6B,IACZhC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA+B,GAAA1B,KAAAH,QACKI,MAAQ,CACX0B,WAAW,EACXC,eAAWC,EACXC,iBAAkB,GAClBC,kBAAmB,GACnBC,iBAAkB,GAClBC,YAAa,CAAC,SAAK,eACnBC,cAAe,KACfC,aAAc,MAVJzC,iFAeI0C,GAChBC,QAAQC,IAAIF,GACZvC,KAAKM,SAAS,CAAEgC,aAAcC,+CAEbG,GACjBF,QAAQC,IAAIC,GACZ1C,KAAKM,SAAS,CAAE+B,cAAeK,6CAEhBC,EAASC,EAAMC,GAC9B7C,KAAKW,MAAMmC,aAAaD,GACxB7C,KAAKM,SAAS,CAAE8B,YAAa,CAACO,EAASC,GAAMP,cAAc,KAAKC,aAAa,wCAEtE,IAAAS,EAAA/C,KAEDgD,EACJzC,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CAAMC,MAAO,CAAEC,UAAW,IAAKC,UAAW,SAErC,SAACJ,GAEA,IADA,IAAMK,EAAW,GADPC,EAAA,WAEL,IAAIZ,EAAIa,EAAAC,GACXH,EAASI,KACPlD,EAAAC,EAAAC,cAACkB,EAAD,CAASf,MAAO8B,EAAMgB,IAAKhB,GACxBM,EAAMN,GAAMiB,IAAI,SAACf,EAAMgB,GAAP,OAAiBrD,EAAAC,EAAAC,cAACwC,EAAA,EAAKY,KAAN,CAAWH,IAAKhB,EAAOE,EAAKkB,KAAOF,EAAO/C,QAASkC,EAAKgB,iBAAiBhD,KAAKgC,EAAML,EAAME,EAAKkB,KAAMlB,EAAKC,MAAOD,EAAKkB,WAH9JN,EAAA,EAAAD,EAAiBzD,OAAOkE,KAAKhB,GAA7BQ,EAAAD,EAAAU,OAAAT,IAAqCF,IAOrC,OAAOD,EATR,CAUErD,KAAKW,MAAMqC,QAIdkB,EACJ3D,EAAAC,EAAAC,cAAC0D,EAAA,EAAD,CAAQC,YAAU,EAChBC,SAAYrE,KAAKsE,kBAAkBvD,KAAKf,MACxCuE,YAAY,EACZC,YAAW,GAAAC,OAAKzE,KAAKI,MAAMgC,YAAY,GAA5B,8BACXc,MAAO,CAAEwB,MAAM,IAAItB,UAAW,SAC7BpD,KAAKW,MAAMuD,OAAOlE,KAAKI,MAAMgC,YAAY,KACxCpC,KAAKW,MAAMuD,OAAOlE,KAAKI,MAAMgC,YAAY,IAAIuB,IAC3C,SAAAgB,GAAK,OACHpE,EAAAC,EAAAC,cAACgB,EAAD,CAAQmD,MAAOD,EAAME,OAClBF,EAAME,UAMbC,EACJvE,EAAAC,EAAAC,cAAC0D,EAAA,EAAD,CAAQC,YAAU,EAChBC,SAAYrE,KAAK+E,mBAAmBhE,KAAKf,MACzCuE,YAAY,EACZC,YAAW,GAAAC,OAAKzE,KAAKI,MAAMgC,YAAY,GAA5B,8BACXc,MAAO,CAAEwB,MAAM,IAAItB,UAAW,SAC7BpD,KAAKW,MAAMqE,aAAahF,KAAKI,MAAMgC,YAAY,KAC9CpC,KAAKW,MAAMqE,aAAahF,KAAKI,MAAMgC,YAAY,IAAIuB,IACjD,SAAAsB,GAAI,OACF1E,EAAAC,EAAAC,cAACgB,EAAD,CAAQmD,MAAOK,EAAKC,MACjBD,EAAKC,SAMZC,EACJ5E,EAAAC,EAAAC,cAACwC,EAAA,EAAD,CAAMC,MAAO,CAAEC,UAAW,IAAKC,UAAW,SACvCpD,KAAKW,MAAMyE,aACVpF,KAAKW,MAAM0E,SAAS1B,IAClB,SAAA2B,GAAI,OACF/E,EAAAC,EAAAC,cAACwC,EAAA,EAAKY,KAAN,CACEH,IAAK4B,EACLzE,QAAS,WAAQkC,EAAKpC,MAAM4E,iBAAiBD,KAC5CA,MAMb,OACE/E,EAAAC,EAAAC,cAAA,OAAKC,UAAW8E,IAAE/F,WAChBc,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACgF,EAAA,EAAD,CAAUC,QAAS1C,EAAO2C,QAAS,CAAC,UAClCpF,EAAAC,EAAAC,cAACmF,EAAA,EAAD,KAAS5F,KAAKI,MAAMgC,YAAYyD,KAAK,MAAQ,8BAGjDtF,EAAAC,EAAAC,cAAA,WACGqE,GAEHvE,EAAAC,EAAAC,cAAA,WACGyD,GAEH3D,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACgF,EAAA,EAAD,CAAUC,QAASP,EAAOQ,QAAS,CAAC,UAClCpF,EAAAC,EAAAC,cAACmF,EAAA,EAAD,sBAAAnB,OAAgBzE,KAAKW,MAAMyE,aAAe,2BA5G9B7D,0DCRjB,IAAMuE,EAAW,CACpBC,KAAM,eACNC,MAAO,QACPC,cAAe,CAAEF,KAAM,eACvBG,iBAAkB,CAAC,CAEftB,MAAO,IACPuB,OAAQ,CACJJ,KAAM,cACNK,MAAO,CAAE,GAAG,GAAI,IAAK,MAE1B,CAECxB,MAAO,IACPuB,OAAQ,CACJJ,KAAM,cACNK,MAAO,CAAE,IAAI,GAAI,IAAK,MAE3B,CAECxB,MAAO,IACPuB,OAAQ,CACJJ,KAAM,cACNK,MAAO,CAAE,GAAG,GAAI,GAAI,MAEzB,CAECxB,MAAO,IACPuB,OAAQ,CACJJ,KAAM,cACNK,MAAO,CAAE,IAAI,GAAI,IAAK,QAKrBC,EAAkB,CAC3BN,KAAM,UACNC,MAAO,QACPM,WAAY,CACV,CAAEF,MAAO,uBAAwBG,MAAO,GACxC,CAAEH,MAAO,UAAWG,MAAO,MAC3B,CAAEH,MAAO,UAAWG,MAAO,MAC3B,CAAEH,MAAO,UAAWG,MAAO,MAC3B,CAAEH,MAAO,UAAWG,MAAO,MAC3B,CAAEH,MAAO,UAAWG,MAAO,MAC3B,CAAEH,MAAO,UAAWG,MAAO,MAC3B,CAAEH,MAAO,UAAWG,MAAO,MAC3B,CAAEH,MAAO,UAAWG,MAAO,MAC3B,CAAEH,MAAO,UAAWG,MAAO,MAC3B,CAAEH,MAAO,UAAWG,MAAO,KAC3B,CAAEH,MAAO,UAAWG,MAAO,MAC3B,CAAEH,MAAO,UAAWG,MAAO,IAE7BC,kBAAmB,GACnBC,kBAAmB,oEC9CjBC,cACF,SAAAA,EAAY/F,GAAO,IAAAd,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA0G,IACf7G,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA4G,GAAAvG,KAAAH,KAAMW,KACDjB,OAASiH,IAAMC,YACpB/G,EAAKgH,mBAAqB,KAC1BhH,EAAKiH,OAAS,KAJCjH,2EAOPkH,GAAM,IAAAhE,EAAA/C,KACdA,KAAK6G,mBAAqBG,IAAQC,KAAKjH,KAAKN,OAAOwH,SACnDlH,KAAK6G,mBAAmBM,UAAUnH,KAAK8G,OAAS,CAC5CM,QAAS,CACLzB,QAAS,QAEb0B,MAAO,CACHN,KAAMA,EAAKpD,IAAI,SAAU2D,GACrB,OAAOA,EAAK,MAGpBC,MAAO,CACHC,MAAM,EACNC,UAAW,CACPD,MAAM,GAEVE,SAAU,IACVhF,KAAM,gBAEViF,SAAU,CAAC,CACPC,WAAY,cACb,CACC7B,KAAM,WAEV8B,UAAW,CACPC,IAAK,GACLC,MAAO,IAEXC,OAAQ,CACJtF,KAAM,2BACNqD,KAAM,OACNgB,KAAMA,EAAKpD,IAAI,SAAU2D,GACrB,OAAOA,EAAK,KAEhBW,UAAW,MAGnBjI,KAAK6G,mBAAmBqB,GAAG,QAAS,SAAU,SAAAC,GAC1C,IAAMvE,EAAQuE,EAAEC,UAChBrF,EAAKpC,MAAME,QAAQ+C,iDAKnB5D,KAAKW,MAAMoG,KAAK9C,QAChBjE,KAAKqI,YAAYlI,KAAKH,KAAMA,KAAKW,MAAMoG,mDAKvC/G,KAAKW,MAAMoG,KAAK9C,QAChBjE,KAAKqI,YAAYlI,KAAKH,KAAMA,KAAKW,MAAMoG,uCAK3C,OACIxG,EAAAC,EAAAC,cAAA,OAAKyC,MAAOlD,KAAKW,MAAMuC,MAAOxC,UAAW8E,IAAE9F,QACvCa,EAAAC,EAAAC,cAAA,OAAM6H,IAAKtI,KAAKN,iBAlEL6B,yDCJnBE,EAAqB8G,IAArB9G,OAAQ+G,EAAaD,IAAbC,SAGHC,EAAb,SAAAC,GACI,SAAAD,EAAY9H,GAAO,IAAAd,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAyI,IACf5I,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA2I,GAAAtI,KAAAH,KAAMW,KACDP,MAAQ,CACTuI,WAAY9I,EAAK+I,SAAS,KAHf/I,EADvB,OAAAC,OAAA+I,EAAA,EAAA/I,CAAA2I,EAAAC,GAAA5I,OAAAgJ,EAAA,EAAAhJ,CAAA2I,EAAA,EAAA/E,IAAA,WAAAkB,MAAA,SAQaA,GAAO,IAAA7B,EAAA/C,KACZ,IAAKA,KAAKW,MAAMiC,KACZ,OAAO,KAEX,IAAMA,EAAO,GACTmG,EAAQ,GACZjJ,OAAOkE,KAAKhE,KAAKW,MAAMiC,MAAMoG,QAAQ,SAAAC,GACjClG,EAAKpC,MAAMiC,KAAKqG,GAAGD,QAAQ,SAAAE,GACnBA,EAAEpF,KAAKqF,SAASvE,KAC0B,IAAtCmE,EAAMK,QAAQH,EAAI,KAAOC,EAAEpF,QAC3BlB,EAAKa,KAAK,CACN7C,MAAOqI,EACPI,QAASJ,EAAI,KAAOC,EAAEpF,OAE1BiF,EAAMtF,KAAKwF,EAAI,KAAOC,EAAEpF,WAKxC,IAAMa,EAAQ,GACdoE,EAAQ,GACRjJ,OAAOkE,KAAKhE,KAAKW,MAAMgE,OAAOqE,QAAQ,SAAAC,GAClClG,EAAKpC,MAAMgE,MAAMsE,GAAGD,QAAQ,SAAAE,GACpBA,EAAErE,MAAMsE,SAASvE,KAC0B,IAAvCmE,EAAMK,QAAQH,EAAI,KAAOC,EAAErE,QAC3BF,EAAMlB,KAAK,CACP7C,MAAOqI,EACPI,QAASJ,EAAI,KAAOC,EAAErE,YAM1C,IAAMC,EAAS,GACfiE,EAAQ,GACRjJ,OAAOkE,KAAKhE,KAAKW,MAAMmE,QAAQkE,QAAQ,SAAAC,GACnClG,EAAKpC,MAAMmE,OAAOmE,GAAGD,QAAQ,SAAAE,GACrBA,EAAEhE,KAAKiE,SAASvE,KAC0B,IAAtCmE,EAAMK,QAAQH,EAAI,KAAOC,EAAEhE,OAC3BJ,EAAOrB,KAAK,CACR7C,MAAOqI,EACPI,QAASJ,EAAI,KAAOC,EAAEhE,WA6B1C,IAAMoE,EAvBa,CACf,CACI1I,MAAO,eACP2I,SAAU3G,GAEd,CACIhC,MAAO,eACP2I,SAAU5E,GAEd,CACI/D,MAAO,eACP2I,SAAUzE,IAabnB,IAAI,SAAA6F,GAAK,OACNjJ,EAAAC,EAAAC,cAAC+H,EAAD,CAAU9E,IAAK8F,EAAM5I,MAAO6I,OAVf7I,EAUkC4I,EAAM5I,MARrDL,EAAAC,EAAAC,cAAA,YACKG,KAQA4I,EAAMD,SAAS5F,IAAI,SAAC+F,EAAK9F,GAAN,OAChBrD,EAAAC,EAAAC,cAACkJ,EAAD,CAAQjG,IAAKgG,EAAI9I,MAAQ8I,EAAIL,QAAUzF,EAAOgB,MAAO8E,EAAIL,SACrD9I,EAAAC,EAAAC,cAAA,QAAMC,UAAU,6BAA6BgJ,EAAIL,aAbrE,IAAqBzI,IAmBrBZ,KAAKM,SAAS,CACVqI,WAAYW,MA1FxB,CAAA5F,IAAA,eAAAkB,MAAA,SA6FiBA,GACT5E,KAAK4I,SAAShE,KA9FtB,CAAAlB,IAAA,SAAAkB,MAAA,WAiGQ,OACIrE,EAAAC,EAAAC,cAAA,OAAKC,UAAW8E,IAAE7F,cAAeuD,MAAO,CAAEwB,MAAO,MAC7CnE,EAAAC,EAAAC,cAACmJ,EAAA,EAAD,CACIlJ,UAAU,0BACVmJ,kBAAkB,mCAClBC,0BAA0B,EAC1BC,cAAe,CAAErF,MAAO,KACxBsF,KAAK,QACL9G,MAAO,CAAEwB,MAAO,QAChBiE,WAAY3I,KAAKI,MAAMuI,WACvBnE,YAAY,eACZyF,gBAAgB,QAChBC,SAAUlK,KAAKmK,aAAapJ,KAAKf,OAEjCO,EAAAC,EAAAC,cAAC2J,EAAA,EAAD,CAAOC,OAAQ9J,EAAAC,EAAAC,cAAC6J,EAAA,EAAD,CAAMvE,KAAK,SAASrF,UAAU,kCA/GjE+H,EAAA,CAA8BlH,aCPjBgJ,EAAS,CAClBC,WAAY,yBACZC,cAAe,kDACfC,WAAY,sECHHC,EAAU,CACnBC,EAAG,CAAC,EAAG,GACPC,EAAG,CAAC,EAAG,GACPC,EAAG,CAAC,EAAG,GACPC,EAAG,CAAC,EAAG,IACPC,EAAG,CAAC,GAAI,IACRC,EAAG,CAAC,GAAI,IACRC,EAAG,CAAC,GAAI,IACRC,EAAG,CAAC,GAAI,IACRC,EAAG,CAAC,GAAI,IACRC,EAAG,CAAC,GAAI,IACRC,GAAI,CAAC,GAAI,IACTC,GAAI,CAAC,GAAI,IACTC,GAAI,CAAC,GAAI,IACTC,GAAI,CAAC,GAAI,IACTC,GAAI,CAAC,GAAI,KACTC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,KACVC,GAAI,CAAC,IAAK,MAGDC,EAAU,CACnBC,SAAK,CAAC,EAAG,GACTC,SAAK,CAAC,EAAG,GACTC,SAAK,CAAC,EAAG,GACTC,eAAM,CAAC,EAAG,IACVC,eAAM,CAAC,GAAI,IACXC,SAAK,CAAC,GAAI,IACVC,SAAK,CAAC,GAAI,IACVC,eAAM,CAAC,GAAI,IACXC,SAAK,CAAC,GAAI,IACVC,qBAAO,CAAC,GAAI,IACZC,eAAM,CAAC,GAAI,IACXC,SAAK,CAAC,GAAI,IACVC,SAAK,CAAC,GAAI,IACVC,2BAAQ,CAAC,GAAI,IACbC,SAAK,CAAC,GAAI,KACVC,SAAK,CAAC,IAAK,KACXC,SAAK,CAAC,IAAK,KACXC,SAAK,CAAC,IAAK,KACXC,eAAM,CAAC,IAAK,MAaT,SAASC,EAAWC,GACvB,IAAIC,EAAS,EAMb,OALAvN,OAAOkE,KAAK+H,GAAS/C,QAAQ,SAAAsE,GACrBvB,EAAQuB,GAAG,GAAKF,GAAMrB,EAAQuB,GAAG,IAAMF,IACvCC,EAASC,KAGVD,eC1DEE,EAAb,SAAA7E,GACE,SAAA6E,IAAa,IAAA1N,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAuN,IACX1N,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAyN,GAAApN,KAAAH,QACKI,MAAQ,CACXoN,QAAO,GAHE3N,EADf,OAAAC,OAAA+I,EAAA,EAAA/I,CAAAyN,EAAA7E,GAAA5I,OAAAgJ,EAAA,EAAAhJ,CAAAyN,EAAA,EAAA7J,IAAA,SAAAkB,MAAA,WASI,OACErE,EAAAC,EAAAC,cAACgN,EAAA,EAAD,CACA7M,MAAO,eACP8M,UAAU,QACVC,UAAU,EACVtN,QAASL,KAAKW,MAAMiN,OACpBC,MAAM,EACN3K,MAAO,CAAC4K,UAAU,QAClBC,QAAS/N,KAAKW,MAAMoN,SAEhBxN,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAAC8K,SAAU,KAAvB,gBAAoCzN,EAAAC,EAAAC,cAAA,WAEhCT,KAAKW,MAAMoG,KAAKkH,iBAAiBtK,IAAI,SAAA2J,GACjC,OACI/M,EAAAC,EAAAC,cAAA,gCACQ6M,EAAEpI,KADV,IACgB3E,EAAAC,EAAAC,cAAA,WADhB,qBAEQ6M,EAAEY,KAFV,IAEgB3N,EAAAC,EAAAC,cAAA,WACZF,EAAAC,EAAAC,cAAA,mBA1B1B8M,EAAA,CAAiChM,aCApB4M,EAAb,SAAAC,GAAA,SAAAD,IAAA,OAAArO,OAAAC,EAAA,EAAAD,CAAAE,KAAAmO,GAAArO,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAqO,GAAAE,MAAArO,KAAAsO,YAAA,OAAAxO,OAAA+I,EAAA,EAAA/I,CAAAqO,EAAAC,GAAAtO,OAAAgJ,EAAA,EAAAhJ,CAAAqO,EAAA,EAAAzK,IAAA,SAAAkB,MAAA,WAGI,OACErE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CACEL,MAAM,cACNP,QAASL,KAAKW,MAAMN,QACpBkO,KAAMvO,KAAKW,MAAM6N,SACjBnN,SAAUrB,KAAKW,MAAMW,aACrBmN,UAAQ,EACR/J,MAAO,OAEN1E,KAAKW,MAAM4I,eAbtB4E,EAAA,CAA+BxH,IAAMpF,WCHxBmN,EAAqB,CAC9B9N,MAAO,UACPyI,QAAS,4DCwUEsF,cA1Tb,SAAAA,IAAc,IAAA9O,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2O,IACZ9O,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA6O,GAAAxO,KAAAH,QACK4O,kBAAoB,GACzB/O,EAAKgP,QAAUC,EAAOpE,WACtB7K,EAAKkP,WAAa,0EAClBlP,EAAKmP,uBAAyBF,EAAOrE,cAAgB,8BACrD5K,EAAKoP,oBAAsBH,EAAOrE,cAAgB,yBAClD5K,EAAKqP,qBAAuBJ,EAAOrE,cAAgB,8BACnD5K,EAAKsP,oBAAsB,GAC3BtP,EAAKO,MAAQ,CACXgP,QAAQ,EACRC,mBAAoB,uCACpBC,YAAa,EACbrB,iBAAkB,GAClBsB,eAAe,EACfC,eAAe,GAEjB3P,EAAK4P,UAAY,KACjB5P,EAAK6P,YAAa,EAClB7P,EAAK8P,cAAgB,GACrB9P,EAAK+P,cAAgB,aApBT/P,mFAuBZG,KAAK6P,qDAGYC,EAAWC,GACxBD,EAAU1N,cAAgBpC,KAAKW,MAAMyB,aACvCpC,KAAKgQ,oBAAoBhQ,KAAKW,MAAMyB,aAElC2N,EAAU9B,mBAAqBjO,KAAKI,MAAM6N,kBAC5CjO,KAAKM,SAAS,CAAEiP,eAAe,2CAIpB,IAAAxM,EAAA/C,KACTiQ,EAAYjQ,KAAK2D,IAAIuM,OAAOC,MAAM,IACtCnQ,KAAKoQ,KAAKC,cAAcJ,GAAWK,KAAK,SAACC,GACvC,IAAIC,EAAYP,EAAUQ,cAC1BD,EAAUE,MAAQ,MAAQ3N,EAAKpC,MAAMgQ,aACrCV,EAAUW,cAAcJ,GAAWF,KAAK,SAACjD,GACnCtK,EAAKoM,oBAAoBlL,QAC3BlB,EAAKoM,oBAAoBxL,IAAI,SAACkN,GAC5BA,EAAUC,WAId,IAAIC,EAAU1D,EAAO2D,SAQrBjO,EAAKqN,KAAKa,KACR,CACEC,OAAQ,CAACH,EAAQ,GAAGI,SAASC,EAAI,EAAGL,EAAQ,GAAGI,SAASlI,GACxDoI,KAAM,GAER,CACEC,SAAU,IACVC,OAAQ,gBAEZC,WAAW,WACTzO,EAAK0O,SAASV,EAASR,IACtB,2CAMC,IAAAmB,EAAA1R,KACR2R,IAAWC,YAAY,CACrB,4BACA,sBACA,WACA,eACA,wBACA,qBACA,2BACA,eACA,oBACA,uBACA,wBACA,sBACA,kBACC5R,KAAK6O,SAASyB,KAAK,SAAAuB,GAAuH,IAAAC,EAAAhS,OAAAiS,EAAA,EAAAjS,CAAA+R,EAAA,IAArHG,EAAqHF,EAAA,GAAtGG,EAAsGH,EAAA,GAA9FI,EAA8FJ,EAAA,GAAzFK,EAAyFL,EAAA,GAAhFM,EAAgFN,EAAA,GAArEO,EAAqEP,EAAA,GAA5DQ,EAA4DR,EAAA,GAA9CS,EAA8CT,EAAA,GAArCU,EAAqCV,EAAA,GAA/BW,EAA+BX,EAAA,GAAtBY,EAAsBZ,EAAA,IAAAA,EAAA,IAC3IJ,EAAKY,aAAeA,EACpBZ,EAAKiB,eAAiB,IAAIX,EAC1BN,EAAKkB,yBAA2B,IAAIN,EAAa,CAC/CO,IAAKnB,EAAK1C,uBACV8D,GAAI,IACJzS,SAAS,EACTyF,aAEF4L,EAAKqB,sBAAwB,IAAIT,EAAa,CAC5CO,IAAKnB,EAAKzC,oBACV6D,GAAI,IACJzS,SAAS,EACT2S,cAAetE,EACfrI,oBAEFqL,EAAKuB,uBAAyB,IAAIX,EAAa,CAC7CO,IAAKnB,EAAKxC,qBACV4D,GAAI,IACJzS,SAAS,EACTgG,oBAGFqL,EAAK9B,cAAgB,SAACb,GACpB,IAAImE,EAAY,IAAId,EAAU,CAC5BS,IAAK9D,IAEHoE,EAAU,IAAIhB,EAAQ,CACxBiB,WAAY,CAACF,GACbJ,GAAI,cAEFpB,EAAK/N,MACP+N,EAAK/N,IAAI0P,QAAUF,IAIvB,IAAID,EAAY,IAAId,EAAU,CAC5BS,IAAKnB,EAAK3C,aAERsE,EAAU,IAAIlB,EAAQ,CACxBiB,WAAY,CAACF,GACbJ,GAAI,cAENpB,EAAK/N,IAAM,IAAIuO,EAAI,CACjBmB,UACAnD,OAAQ,CACNwB,EAAKiB,eACLjB,EAAKqB,sBAELrB,EAAKkB,4BAGTlB,EAAKtB,KAAO,IAAIiC,EAAQ,CACtBnB,OAAQ,CAAC,IAAK,MACdvN,IAAK+N,EAAK/N,IACV2P,UAAW,SACXjC,KAAM,IAERK,EAAKtB,KAAKC,cAAcqB,EAAKkB,0BAA0BtC,KAAK,SAACC,GAC3DmB,EAAK6B,iBAAmBhD,IAE1BmB,EAAK8B,QAAU,IAAIjB,EACnB,IAAIlB,EAAO,IAAImB,EAAK,CAClBpC,KAAMsB,EAAKtB,KACXqD,OAAQ,eAENC,EAAU,IAAIjB,EAAQ,CACxBrC,KAAMsB,EAAKtB,OAETuD,EAAW,IAAIjB,EAAS,CAC1BtC,KAAMsB,EAAKtB,KACXwD,KAAM,WAEFC,EChLZ,SAAsBC,EAAK7B,GACvB,IAAM4B,EAAS,IAAI5B,EAAO,CACtB7B,KAAM0D,EAAI1D,KACV2D,MAAOD,EAAInB,iBAiCf,OA/BAkB,EAAO3L,GAAG,SAAU,SAACvD,GAIjB,GADAmP,EAAIxT,SAAS,CAAEiP,eAAe,IACV,aAAhB5K,EAAMvE,MAAsB,CAC5B,IAAI4T,EAAQF,EAAIlB,yBAAyBnC,cACzCqD,EAAInE,cAAclM,KAAKkB,EAAM6O,SAC7BQ,EAAM7C,SAAWxM,EAAM6O,QAAQrC,SAC/B6C,EAAMC,oBAAsB,aAC5BH,EAAIlB,yBAAyBhC,cAAcoD,GAAO1D,KAAK,SAAU4D,GAE7D1R,QAAQC,IAAIyR,GACRJ,EAAIK,mBACJL,EAAIK,kBAAkBrD,SAE1BgD,EAAIK,kBAAoBL,EAAIP,iBAAiB1C,UAAUqD,EAAQlD,UAC/D,IAAM/C,EAAmB,GACzB,GAAIiG,EAAQlD,SAAS/M,OAAQ,KAAAmQ,GAAA,EAAAC,GAAA,EAAAC,OAAAtS,EAAA,IACzB,QAAAuS,EAAAC,EAAoBN,EAAQlD,SAA5ByD,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAsC,KAA7BrD,EAA6BwD,EAAA3P,MAClCqJ,EAAiBxK,KAAKsN,EAAQ8D,aAFT,MAAAC,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,GAIzBR,EAAIxT,SAAS,CAAE2N,2BAK/B4F,EAAO3L,GAAG,SAAU,SAACvD,GAGjBmP,EAAIxT,SAAS,CAAEiP,eAAe,MAE3BsE,ED4IUmB,CAAatD,EAAMO,GAClCP,EAAKtB,KAAK6E,SAASC,IAAIxD,EAAK8B,SAC5B9B,EAAKtB,KAAK+E,GAAGC,QAAU,CAAEtN,IAAK,GAAIuN,KAAM,GAAItN,MAAO,EAAGuN,OAAQ,GAC9D5D,EAAKtB,KAAK+E,GAAGrE,OAAO,QACpBY,EAAKtB,KAAK+E,GAAGD,IAAI7D,GACjBK,EAAKtB,KAAK+E,GAAGD,IAAIxB,GACjBhC,EAAKtB,KAAK+E,GAAGD,IAAIvB,EAAU,gBAC3BjC,EAAKtB,KAAK+E,GAAGD,IAAIrB,EAAQ,YACzB,IAAI0B,EAAM7D,EAAK/N,IAAIuM,OAAOC,MAAMlM,OAC5BuR,EAAa9D,EAAK/N,IAAIuM,OAAOC,MAAMoF,EAAM,GAC7C7D,EAAKtB,KAAKqF,KAAK,WACb,OAAOD,EAAWC,KAAK,WACrB,IAAIzB,EAAQwB,EAAW/E,cACvB,OAAO+E,EAAW5E,cAAcoD,qDAMpBpQ,GAClB,IAAK5D,KAAK2D,MAAQ3D,KAAKsS,aACrB,OAAO,EAET9P,QAAQC,IAAIzC,KAAKgP,uBAAyBpL,GAC1C,IAAM8R,EAAgB,IAAI1V,KAAKsS,aAAa,CAC1CO,IAAK7S,KAAKgP,uBAAyBpL,EACnCvD,SAAS,EACTyF,aAEI6P,EJjKH,SAAmBvI,GACtB,IAAIC,EAAS,EAMb,OALAvN,OAAOkE,KAAK2G,GAAS3B,QAAQ,SAAAsE,GACrB3C,EAAQ2C,GAAG,GAAKF,GAAMzC,EAAQ2C,GAAG,IAAMF,IACvCC,EAASuI,SAAStI,MAGnBD,EI0JiBwI,CAAUjS,GAC5BkS,EAAa,IAAI9V,KAAKsS,aAAa,CACvCO,IAAK7S,KAAKiP,oBAAsB,IAAM0G,EACtCtV,SAAS,EACTgG,kBACA2M,cAAetE,IAEjB1O,KAAK2D,IAAIuM,OAAS,CAAClQ,KAAK2S,eAAgBmD,EAAYJ,2CAIpD1V,KAAKM,SAAS,CAAEyV,WAAW,+CAGVnR,GACjB,IAAK5E,KAAK2D,IACR,OAAO,EAGT3D,KAAKgQ,oBAAoBpL,GACzB5E,KAAKM,SAAS,CAAEgP,YAAa1K,8CAGb,IAAAoR,EAAAhW,KAChBA,KAAK0P,YAAc1P,KAAK0P,WACxB1P,KAAKM,SAAS,CAAE8O,QAASpP,KAAKI,MAAMgP,SAEpCpP,KAAKoQ,KAAKa,KAAK,CAAEC,OAAQ,CAAC,IAAK,MAAOG,KAAM,GAAK,CAAEC,SAAU,IAAMC,OAAQ,gBAC3E,IAAIjE,EAAI,EACR,GAAItN,KAAKyP,UAIP,OAHAwG,cAAcjW,KAAKyP,WACnBzP,KAAKyP,UAAY,UACjBzP,KAAKM,SAAS,CAAE+O,mBAAoB,uCAAUD,QAAQ,IAGxDpP,KAAKM,SAAS,CAAE+O,mBAAoB,2BAAQD,QAAQ,IACpDpP,KAAKyP,UAAYyG,YAAY,WACvB5I,EArOiB,KAsOfA,GACF0I,EAAKhG,oBAAoB7P,KAAK6V,EAAM1I,GAEtC0I,EAAK1V,SAAS,CAAEgP,YAAahC,MAG7B0I,EAAKtG,YAAcsG,EAAKtG,WACxBsG,EAAK1V,SAAS,CAAE8O,QAAQ,IACxB4G,EAAKhG,oBAAoB7P,KAAK6V,EAAM1I,GACpC2I,cAAcD,EAAKvG,WACnBuG,EAAKvG,UAAY,MAEnBnC,KAEC,sCAEI,IAAA6I,EAAAnW,KAEP,OADAwC,QAAQC,IAAIzC,KAAKW,OAEfJ,EAAAC,EAAAC,cAAAF,EAAAC,EAAA4V,SAAA,KACE7V,EAAAC,EAAAC,cAAA,OAAKqS,GAAG,SAAS5P,MAAO,CAAEmT,OAAQ,OAAQ3R,MAAO,OAAQ0Q,QAAS,SAClE7U,EAAAC,EAAAC,cAAA,OAAKC,UAAW8E,IAAC,WAGjBjF,EAAAC,EAAAC,cAAA,OAAKC,UAAW8E,IAAC,aACfjF,EAAAC,EAAAC,cAACmF,EAAA,EAAD,CACE/E,QAASb,KAAKsW,gBAAgBvV,KAAKf,MACnCuW,OAAK,EACLjM,KAAMtK,KAAKI,MAAMgP,OAAS,QAAU,eAEnCpP,KAAKI,MAAMiP,qBAGhB9O,EAAAC,EAAAC,cAAC+V,EAAD,CAAc3V,QAASb,KAAKgQ,oBAAoBjP,KAAKf,MAAO+G,KAAM/G,KAAKW,MAAM8V,WAC7ElW,EAAAC,EAAAC,cAACmF,EAAA,EAAD,CACE1C,MAAO,CAAEwT,SAAU,WAAY3O,MAAO,GAAIuN,OAAQ,IAClDzU,QAASb,KAAK2W,cAAc5V,KAAKf,OAFnC,4BAIAO,EAAAC,EAAAC,cAACmW,EAAD,CACEvW,QAASL,KAAKI,MAAM2V,UACpBzU,aAAc,kBAAM6U,EAAK7V,SAAS,CAAEyV,WAAW,KAC/CvH,SAAU,kBAAM2H,EAAK7V,SAAS,CAAEyV,WAAW,MAE3CxV,EAAAC,EAAAC,cAACmF,EAAA,EAAD,CAAQ/E,QAAS,kBAAMsV,EAAK7V,SAAS,CAAEuW,UAAWV,EAAK/V,MAAMyW,aAA7D,4BAEE7W,KAAKI,MAAMyW,UACXtW,EAAAC,EAAAC,cAAA,UAAQiC,KAAK,aAAa9B,MAAM,QAAQkW,IAAK,gCAAkCC,mBAAmB5J,EAAWnN,KAAKW,MAAMyB,cAAgB,SAAKiU,OAAO,QAAQ3R,MAAM,SAASsS,UAAQ,EAACC,YAAY,MAElM1W,EAAAC,EAAAC,cAAC+V,EAAD,CACEtT,MAAO,CAAEwT,SAAU,WAAYrB,KAAM,EAAGtN,MAAO,EAAGuN,OAAQ,GAC1DzU,QAASb,KAAKW,MAAMmC,aACpBiE,KAAM/G,KAAKW,MAAM8V,YAErBlW,EAAAC,EAAAC,cAACyW,EAAD,CACEtJ,OAAQ5N,KAAKI,MAAMmP,cACnBxB,QAAS,kBAAMoI,EAAK7V,SAAS,CAAEiP,eAAe,KAC9CxI,KAAM,CACJ/D,MAAOhD,KAAKW,MAAMqC,MAClBgC,aAAchF,KAAKW,MAAMqE,aACzBd,OAAQlE,KAAKW,MAAMuD,OACnB+J,iBAAkBjO,KAAKI,MAAM6N,qBAI9BjO,KAAKI,MAAMmP,eACZhP,EAAAC,EAAAC,cAACmF,EAAA,EAAD,CACE1C,MAAO,CAAEwT,SAAU,WAAY3O,MAAO,EAAGuN,OAAQ,EAAGe,OAAQ,MAAO3R,MAAO,GAAI0Q,QAAS,GACvFvU,QAAS,kBAAMsV,EAAK7V,SAAS,CAAEiP,eAAe,MAFhD,KAOFhP,EAAAC,EAAAC,cAAC0W,EAAD,CACEvU,KAAM5C,KAAKW,MAAMqC,MACjB2B,MAAO3E,KAAKW,MAAMuD,OAClBY,OAAQ9E,KAAKW,MAAMqE,uBA/SPzD,aEgBP6V,cA3Bb,SAAAA,IAAa,IAAAvX,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAoX,IACXvX,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAsX,GAAAjX,KAAAH,QACKI,MAAQ,CACXoN,QAAO,GAHE3N,wEAQX,OACEU,EAAAC,EAAAC,cAACgN,EAAA,EAAD,CACA7M,MAAO,2BACP8M,UAAU,QACVC,UAAU,EACVtN,QAASL,KAAKW,MAAMiN,OACpBC,MAAM,EACN3K,MAAO,CAAC4K,UAAU,SAEhBvN,EAAAC,EAAAC,cAAA,SAAI,kCAAST,KAAKW,MAAMuD,OAAOD,QAAQjE,KAAKW,MAAM0W,cAAcrX,KAAKW,MAAMuD,OAAOlE,KAAKW,MAAM0W,eAAexS,MAAM,KAClHtE,EAAAC,EAAAC,cAAA,SAAI,kCAAST,KAAKW,MAAMuD,OAAOD,QAAQjE,KAAKW,MAAM0W,cAAcrX,KAAKW,MAAMuD,OAAOlE,KAAKW,MAAM0W,eAAeC,UAAU,KACtH/W,EAAAC,EAAAC,cAAA,SAAI,kCAAST,KAAKW,MAAMuD,OAAOD,QAAQjE,KAAKW,MAAM0W,cAAcrX,KAAKW,MAAMuD,OAAOlE,KAAKW,MAAM0W,eAAeE,MAAM,UAAK,KACvHhX,EAAAC,EAAAC,cAAA,SAAI,kCAAST,KAAKW,MAAMuD,OAAOD,QAAQjE,KAAKW,MAAM0W,cAAcrX,KAAKW,MAAMuD,OAAOlE,KAAKW,MAAM0W,eAAeG,MAAM,UAAK,KACvHjX,EAAAC,EAAAC,cAAA,SAAI,kCACJF,EAAAC,EAAAC,cAAA,KAAGyC,MAAO,CAACuU,WAAW,QAASzX,KAAKW,MAAMuD,OAAOD,QAAQjE,KAAKW,MAAM0W,cAAcrX,KAAKW,MAAMuD,OAAOlE,KAAKW,MAAM0W,eAAeK,MAAM,YAvBlHnW,uBCiBXoW,oLAfX,OACEpX,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACmX,GAAA,EAAD,KACErX,EAAAC,EAAAC,cAAA,OAAKC,UAAW,WAAhB,4BACCV,KAAKW,MAAMkX,IAAIlU,IAAI,SAACwE,EAAEtF,GACrB,OAAOtC,EAAAC,EAAAC,cAACmX,GAAA,EAAS/T,KAAV,CAAeH,IAAKb,EAAKuD,MAAO,WACpC+B,EAAEvF,KAAK,eAAKuF,EAAE2P,MAAM,SAAI3P,EAAE4P,kBARfxW,uBCoCXyW,uBAnCb,SAAAA,IAAa,IAAAnY,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAgY,IACXnY,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAkY,GAAA7X,KAAAH,QACKI,MAAQ,CACXoN,QAAO,GAET3N,EAAKoY,QAAU,cALJpY,wEASX,OACEU,EAAAC,EAAAC,cAACgN,EAAA,EAAD,CACA7M,MAAO,2BACP8M,UAAU,QACVC,UAAU,EACVtN,QAASL,KAAKW,MAAMiN,OACpBC,MAAM,EACN3K,MAAO,CAAC4K,UAAU,SAEhBvN,EAAAC,EAAAC,cAAA,OAAKyC,MAAO,CAACgV,MAAM,SAASC,UAAU,WACpC5X,EAAAC,EAAAC,cAAA,OACE2X,IAAI,OAAOtB,IAAK9W,KAAKiY,SAASjY,KAAKW,MAAMgQ,aAAa3Q,KAAKW,MAAMgQ,aAAa,MAAM,UAExFpQ,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,SAAI,sBAAOT,KAAKW,MAAM0X,MAAMpU,QAAQjE,KAAKW,MAAMgQ,aAAa3Q,KAAKW,MAAM0X,MAAMrY,KAAKW,MAAMgQ,cAAczL,KAAK,KAC3G3E,EAAAC,EAAAC,cAAA,SAAI,gBAAMT,KAAKW,MAAM0X,MAAMpU,QAAQjE,KAAKW,MAAMgQ,aAAa3Q,KAAKW,MAAM0X,MAAMrY,KAAKW,MAAMgQ,cAAc2H,GAAG,KACxG/X,EAAAC,EAAAC,cAAA,SAAI,gBAAMT,KAAKW,MAAM0X,MAAMpU,QAAQjE,KAAKW,MAAMgQ,aAAa3Q,KAAKW,MAAM0X,MAAMrY,KAAKW,MAAMgQ,cAAc4H,IAAI,KACzGhY,EAAAC,EAAAC,cAAA,SAAI,sBAAOT,KAAKW,MAAM0X,MAAMpU,QAAQjE,KAAKW,MAAMgQ,aAAa3Q,KAAKW,MAAM0X,MAAMrY,KAAKW,MAAMgQ,cAAc4G,MAAM,UAAK,KACjHhX,EAAAC,EAAAC,cAAA,SAAI,sBAAOT,KAAKW,MAAM0X,MAAMpU,QAAQjE,KAAKW,MAAMgQ,aAAa3Q,KAAKW,MAAM0X,MAAMrY,KAAKW,MAAMgQ,cAAc6G,MAAM,UAAK,KACjHjX,EAAAC,EAAAC,cAAA,SAAI,4BAAQT,KAAKW,MAAM0X,MAAMpU,QAAQjE,KAAKW,MAAMgQ,aAAa3Q,KAAKW,MAAM0X,MAAMrY,KAAKW,MAAMgQ,cAAc6H,KAAK,KAC5GjY,EAAAC,EAAAC,cAAA,SAAI,sBACJF,EAAAC,EAAAC,cAAA,KAAGyC,MAAO,CAACuU,WAAW,QAASzX,KAAKW,MAAM0X,MAAMpU,QAAQjE,KAAKW,MAAMgQ,aAAa3Q,KAAKW,MAAM0X,MAAMrY,KAAKW,MAAMgQ,cAAc+G,MAAM,YA/B/GnW,cCQnBiJ,GAAaD,EAAOC,WAEpBnF,GAAW,CACf,0EACA,YACA,UACA,UAGMoT,GAAYC,KAAZD,QAkIOE,eAhIb,SAAAA,IAAc,IAAA9Y,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA2Y,IACZ9Y,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA6Y,GAAAxY,KAAAH,QACKI,MAAQ,CACX6B,iBAAkB,GAClBE,iBAAkB,GAClBD,kBAAmB,GACnB0W,YAAY,EACZC,aAAa,EACbC,YAAY,EACZ9T,aAAc,GACdhC,MAAO,GACPkB,OAAQ,GACR6U,WAAY,GACZtC,SAAU,GACVuC,WAAY,EACZ5W,YAAa,EACb6W,eAAgB,OAChBC,kBAAkB,EAClBC,mBAAmB,EACnBC,6BAA6B,EAC7BC,8BAA8B,EAC9BC,6BAA6B,GArBnBzZ,4EAyBDiT,GACX9S,KAAKM,SAAS,CAAC8B,YAAa0Q,4CAGdmG,GACdjZ,KAAKM,SAAS,CAAE2Y,2DAGFlS,GACd,IAAMsG,EAAS,GASf,OARAvN,OAAOkE,KAAK+C,GAAMiC,QAAQ,SAAAuQ,GACxBzZ,OAAOkE,KAAK+C,EAAKwS,GAAG,IAAIvQ,QAAQ,SAAAwQ,GAC9BnM,EAAO5J,KAAK,CACV8V,EAAI,IAAMC,EACVzS,EAAKwS,GAAG,GAAGC,SAIVnM,sCAGGtG,GACV,IAAIlE,EAAM,EAUV,OATA/C,OAAOkE,KAAK+C,GAAMiC,QAAQ,SAAAuQ,GACxBxS,EAAKwS,GAAGvQ,QAAQ,SAAC1B,EAAM1D,GACrBmD,EAAKwS,GAAG3V,GAAS,CACfE,KAAMiD,EAAKwS,GAAG3V,GAAS,SACvBf,OAEFA,QAGGkE,8CAGW,IAAAhE,EAAA/C,KACZyZ,EAAWC,MAAMlP,GAAa,kBAAkB8F,KAAK,SAAAqJ,GAAG,OAAIA,EAAIC,SAChEC,EAAcH,MAAMlP,GAAa,qBAAqB8F,KAAK,SAAAqJ,GAAG,OAAIA,EAAIC,SACtEE,EAAYJ,MAAMlP,GAAa,mBAAmB8F,KAAK,SAAAqJ,GAAG,OAAIA,EAAIC,SAClEG,EAAiBL,MAAMlP,GAAa,wBAAwB8F,KAAK,SAAAqJ,GAAG,OAAIA,EAAIC,SAC5EnD,EAAWiD,MAAMlP,GAAa,kBAAkB8F,KAAK,SAAAqJ,GAAG,OAAIA,EAAIC,SACtEI,QAAQC,IAAI,CAACR,EAAUI,EAAaC,EAAWC,EAAgBtD,IAAWnG,KAAK,SAAC4J,GAC9E1X,QAAQC,IAAIyX,GACZnX,EAAKzC,SAAS,CACZ0C,MAAOD,EAAKoX,YAAYD,EAAS,IACjClV,aAAckV,EAAS,GACvBhW,OAAQgW,EAAS,GACjBnB,WAAYmB,EAAS,GACrBzD,SAAU1T,EAAKqX,gBAAgBF,EAAS,QAEzCG,MAAM,SAACvF,GACRtS,QAAQ8X,MAAMxF,sCAGT,IAAApD,EAAA1R,KACD6X,EAAM,GAKZ,OAJA7X,KAAKI,MAAM2Y,WAAW9U,QAAUjE,KAAKI,MAAM2Y,WAAX,KAA8BpV,IAAI,SAACwE,GAC7DA,EAAEoS,KAAO7I,EAAKtR,MAAM+B,iBAAiB,IAAI0V,EAAIpU,KAAK0E,KAItD5H,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAAC+Z,EAAD,MACAja,EAAAC,EAAAC,cAACga,EAAD,CACEzX,MAAOhD,KAAKI,MAAM4C,MAClBgC,aAAchF,KAAKI,MAAM4E,aACzBd,OAAQlE,KAAKI,MAAM8D,OACnBmB,SAAUA,GACVE,iBAAkBvF,KAAK0a,gBAAgB3Z,KAAKf,MAC5CoF,YAAapF,KAAKI,MAAM6Y,eACxBnW,aAAc9C,KAAK8C,aAAa/B,KAAKf,QAEvCO,EAAAC,EAAAC,cAACgT,GAAA,EAAD,CAAQvQ,MAAO,CAAEwT,SAAU,WAAYL,OAAQ,sBAC7C9V,EAAAC,EAAAC,cAACgY,GAAD,CAASvV,MAAO,CAAEwT,SAAU,aAC1BnW,EAAAC,EAAAC,cAACka,EAAD,CACE3X,MAAOhD,KAAKI,MAAM4C,MAClBgC,aAAchF,KAAKI,MAAM4E,aACzBd,OAAQlE,KAAKI,MAAM8D,OACnBuS,SAAUzW,KAAKI,MAAMqW,SACrBmE,aAAc5a,KAAKI,MAAM6B,iBAAiB,GAC1C0O,aAAc3Q,KAAKI,MAAM+B,iBAAiB,GAC1CkV,cAAerX,KAAKI,MAAM8B,kBAAkB,GAC5C2Y,gBAAiB7a,KAAK8a,iBACtBhY,aAAc9C,KAAK8C,aAAa/B,KAAKf,MACrCoC,YAAapC,KAAKI,MAAMgC,cAEzByV,EAAI5T,OAAS1D,EAAAC,EAAAC,cAACsa,GAAD,CAAalD,IAAKA,IAAU,MAE5CtX,EAAAC,EAAAC,cAACua,EAAD,CACE9W,OAAQlE,KAAKI,MAAM8D,OACnB0J,OAAQ5N,KAAKI,MAAM+Y,kBACnB9B,cAAerX,KAAKI,MAAM8B,kBAAkB,KAC9C3B,EAAAC,EAAAC,cAACwa,GAAD,CACE5C,MAAOrY,KAAKI,MAAM4E,aAClB4I,OAAQ5N,KAAKI,MAAM8Y,iBACnBvI,aAAc3Q,KAAKI,MAAM+B,iBAAiB,cAzHpCZ,aCTZ2Z,GAAcC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DAsCN,SAASC,GAAgBC,EAAO3M,GAC9B4M,UAAUC,cACPC,SAASH,GACTnL,KAAK,SAAAuL,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB3b,QACfsb,UAAUC,cAAcO,YAI1B1Z,QAAQC,IACN,iHAKEqM,GAAUA,EAAOqN,UACnBrN,EAAOqN,SAASN,KAMlBrZ,QAAQC,IAAI,sCAGRqM,GAAUA,EAAOsN,WACnBtN,EAAOsN,UAAUP,UAO5BxB,MAAM,SAAAC,GACL9X,QAAQ8X,MAAM,4CAA6CA,KC1FjE+B,IAASC,OAAO/b,EAAAC,EAAAC,cAAC8b,GAAD,MAASC,SAASC,eAAe,SDgB1C,SAAkB3N,GACvB,GAA6C,kBAAmB4M,UAAW,CAGzE,GADkB,IAAIgB,IAAIC,IAAwBvB,OAAOC,SAASuB,MACpDC,SAAWzB,OAAOC,SAASwB,OAIvC,OAGFzB,OAAO0B,iBAAiB,OAAQ,WAC9B,IAAMrB,EAAK,GAAAhX,OAAMkY,IAAN,sBAEPzB,IAgEV,SAAiCO,EAAO3M,GAEtC4K,MAAM+B,GACHnL,KAAK,SAAAyM,GAEJ,IAAMC,EAAcD,EAASE,QAAQC,IAAI,gBAEnB,MAApBH,EAASI,QACO,MAAfH,IAA8D,IAAvCA,EAAY5T,QAAQ,cAG5CsS,UAAUC,cAAcyB,MAAM9M,KAAK,SAAAuL,GACjCA,EAAawB,aAAa/M,KAAK,WAC7B8K,OAAOC,SAASiC,aAKpB9B,GAAgBC,EAAO3M,KAG1BuL,MAAM,WACL7X,QAAQC,IACN,mEArFA8a,CAAwB9B,EAAO3M,GAI/B4M,UAAUC,cAAcyB,MAAM9M,KAAK,WACjC9N,QAAQC,IACN,gHAMJ+Y,GAAgBC,EAAO3M,MCvC/B6M","file":"static/js/main.e6cfe074.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"play_button\":\"_1A0Na77mvvdzir8BTaZ7Pe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectors\":\"iOiwMT-1TxxMLRgACDatD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"charts\":\"oEFAxP79VZEMLn9X4OCbh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchWrapper\":\"_5UDuQJuf1p8makYUDFNrA\"};","import React,{Component} from 'react'\r\nimport { Modal } from 'antd'\r\nimport './Header.css'\r\nclass Header extends Component{\r\n    static defaultProps = {\r\n        title:'唐代历史地理数据展示平台',\r\n        about:'关于我们',\r\n        aboutTitle:'ESRI DEMO-唐朝历史地理信息展示平台',\r\n\r\n    }\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            visible:false\r\n        }\r\n    }\r\n\r\n    handleClickbout(){\r\n        this.setState({\r\n            visible: true,\r\n      });\r\n    }\r\n    handleCancel(){\r\n        this.setState({\r\n            visible: false,\r\n      });\r\n    }\r\n    render(){\r\n        return(\r\n            <div className='header'>\r\n                <span className={'title'}>{this.props.title}</span>\r\n                <button className={'about'} onClick={this.handleClickbout.bind(this)}>{this.props.about}</button>\r\n                <Modal\r\n                    title={this.props.aboutTitle}\r\n                    visible={this.state.visible}\r\n                    okText={'确认'}\r\n                    footer={null}\r\n                    onCancel={this.handleCancel.bind(this)}\r\n              >\r\n                    <p>{'简介：该平台展示了唐朝不同年代的疆界范围、人物轨迹及历史事件，并支持查询搜索等功能。'}</p>\r\n                    <p>{'制作成员：侯骁谋 劳大钊 吴宇东 詹文'}</p>\r\n              </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Header","import React, { Component } from 'react'\r\nimport { Menu, Dropdown, Button } from 'antd';\r\nimport s from './LeftSider.less';\r\nimport { Select } from 'antd';\r\n\r\nconst { Option } = Select;\r\nconst { SubMenu } = Menu;\r\n\r\nclass LeftSider extends Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      collapsed: false,\r\n      yearLabel: undefined,\r\n      yearSelectedKeys: [],\r\n      eventSelectedKeys: [],\r\n      charSelectedKeys: [],\r\n      currentYear: ['夏', '-2100年'],\r\n      currentPeople: null,\r\n      currentEvent: null\r\n    };\r\n  }\r\n\r\n\r\n  handleEventSelect(eventName) {\r\n    console.log(eventName)\r\n    this.setState({ currentEvent: eventName });\r\n  }\r\n  handlePeopleSelect(name) {\r\n    console.log(name)\r\n    this.setState({ currentPeople: name });\r\n  }\r\n  handleYearSelect(dynasty, year, idx) {\r\n    this.props.onSelectYear(idx);\r\n    this.setState({ currentYear: [dynasty, year],currentPeople:null,currentEvent:null});\r\n  }\r\n  render() {\r\n\r\n    const years = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {\r\n          ((years) => {\r\n            const yearList = [];\r\n            for (let name of Object.keys(years)) {\r\n              yearList.push(\r\n                <SubMenu title={name} key={name}>\r\n                  {years[name].map((year, index) => <Menu.Item key={name + year.Year + index} onClick={this.handleYearSelect.bind(this, name, year.Year, year.idx)}>{year.Year}</Menu.Item>)}\r\n                </SubMenu>\r\n              )\r\n            }\r\n            return yearList;\r\n          })(this.props.years)\r\n        }\r\n      </Menu>\r\n    );\r\n    const events = (\r\n      <Select showSearch\r\n        onChange = {this.handleEventSelect.bind(this)}\r\n        allowClear={true}\r\n        placeholder={`${this.state.currentYear[0]}: 历史事件`} \r\n        style={{ width:140,overflowY: 'auto' }}>\r\n        {this.props.events[this.state.currentYear[0]] &&\r\n          this.props.events[this.state.currentYear[0]].map(\r\n            event => (\r\n              <Option value={event.HName}>\r\n                {event.HName}\r\n              </Option>\r\n            )\r\n          )}\r\n      </Select>\r\n    );\r\n    const people = (\r\n      <Select showSearch\r\n        onChange = {this.handlePeopleSelect.bind(this)}\r\n        allowClear={true}\r\n        placeholder={`${this.state.currentYear[0]}: 历史人物`} \r\n        style={{ width:140,overflowY: 'auto' }}>\r\n        {this.props.charProfiles[this.state.currentYear[0]] &&\r\n          this.props.charProfiles[this.state.currentYear[0]].map(\r\n            char => (\r\n              <Option value={char.Name}>\r\n                {char.Name}\r\n              </Option>\r\n            )\r\n          )}\r\n      </Select>\r\n    );\r\n    const tiles = (\r\n      <Menu style={{ maxHeight: 500, overflowY: 'auto' }}>\r\n        {this.props.currentTile &&\r\n          this.props.tilesMap.map(\r\n            tile => (\r\n              <Menu.Item\r\n                key={tile}\r\n                onClick={() => { this.props.handleTileSelect(tile) }}>\r\n                {tile}\r\n              </Menu.Item>\r\n            )\r\n          )}\r\n      </Menu>\r\n    );\r\n    return (\r\n      <div className={s.selectors}>\r\n        <div>\r\n          <Dropdown overlay={years} trigger={['click']}>\r\n            <Button>{this.state.currentYear.join(' ') || '年代边界'}</Button>\r\n          </Dropdown>\r\n        </div>\r\n        <div>\r\n          {people}\r\n        </div>\r\n        <div>\r\n          {events}\r\n        </div>\r\n        <div>\r\n          <Dropdown overlay={tiles} trigger={['click']}>\r\n            <Button>{`底图: ${this.props.currentTile || '底图'}`}</Button>\r\n          </Dropdown>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftSider","export const renderer = {\n    type: \"unique-value\",  // autocasts as new UniqueValueRenderer()\n    field: \"China\",\n    defaultSymbol: { type: \"simple-fill\" },  // autocasts as new SimpleFillSymbol()\n    uniqueValueInfos: [{\n        // All features with value of \"North\" will be blue\n        value: '0',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [ 51,51, 204, 0.5 ]\n        }\n    }, {\n        // All features with value of \"East\" will be green\n        value: '1',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [ 151,51, 204, 0.5 ]\n        }\n    }, {\n        // All features with value of \"South\" will be red\n        value: '2',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [ 51,51, 44, 0.5 ]\n        }\n    }, {\n        // All features with value of \"West\" will be yellow\n        value: '3',\n        symbol: {\n            type: \"simple-fill\",  // autocasts as new SimpleFillSymbol()\n            color: [ 251,51, 204, 0.5 ]\n        }\n    }]\n};\n\nexport const heatMapRenderer = {\n    type: \"heatmap\",\n    field: \"STime\",\n    colorStops: [\n      { color: \"rgba(63, 40, 102, 0)\", ratio: 0 },\n      { color: \"#472b77\", ratio: 0.083 },\n      { color: \"#4e2d87\", ratio: 0.166 },\n      { color: \"#563098\", ratio: 0.249 },\n      { color: \"#5d32a8\", ratio: 0.332 },\n      { color: \"#6735be\", ratio: 0.415 },\n      { color: \"#7139d4\", ratio: 0.498 },\n      { color: \"#7b3ce9\", ratio: 0.581 },\n      { color: \"#853fff\", ratio: 0.664 },\n      { color: \"#a46fbf\", ratio: 0.747 },\n      { color: \"#c29f80\", ratio: 0.83 },\n      { color: \"#e0cf40\", ratio: 0.913 },\n      { color: \"#ffff00\", ratio: 1 }\n    ],\n    maxPixelIntensity: 25,\n    minPixelIntensity: 0\n  };","import React, { Component } from 'react';\nimport echarts from 'echarts/lib/echarts';\nimport 'echarts/lib/chart/line';\nimport 'echarts/lib/component/tooltip';\nimport 'echarts/lib/component/dataZoom';\nimport 'echarts/lib/component/title';\nimport s from './YearSelector.less';\n\nclass YearSelector extends Component {\n    constructor(props) {\n        super(props);\n        this.charts = React.createRef();\n        this.lineChartsInstance = null;\n        this.option = null;\n    }\n\n    renderChart(data) {\n        this.lineChartsInstance = echarts.init(this.charts.current);\n        this.lineChartsInstance.setOption(this.option = {\n            tooltip: {\n                trigger: 'axis'\n            },\n            xAxis: {\n                data: data.map(function (item) {\n                    return item[0];\n                })\n            },\n            yAxis: {\n                show: true,\n                splitLine: {\n                    show: false\n                },\n                interval: 500000000,\n                name: '面积'\n            },\n            dataZoom: [{\n                startValue: '2014-06-01'\n            }, {\n                type: 'inside'\n            }],\n            visualMap: {\n                top: 10,\n                right: 10,\n            },\n            series: {\n                name: '疆域面积',\n                type: 'line',\n                data: data.map(function (item) {\n                    return item[1];\n                }),\n                areaStyle: {}\n            }\n        });\n        this.lineChartsInstance.on('click', 'series', e => {\n            const index = e.dataIndex;\n            this.props.onClick(index);\n        });\n    }\n\n    componentDidMount() {\n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.props.data.length) {\n            this.renderChart.call(this, this.props.data);\n        }\n    }\n\n    render() {\n        return (\n            <div style={this.props.style} className={s.charts}>\n                <div  ref={this.charts}></div>\n            </div>\n        )\n    }\n}\n\nexport { YearSelector };","import React, { Component } from 'react';\nimport s from './Search.less';\nimport { Icon, Input, AutoComplete } from 'antd';\n\nconst { Option, OptGroup } = AutoComplete;\n\n\nexport class Complete extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dataSource: this.initData('')\n        }\n    }\n\n    initData(value) {\n        if (!this.props.year) {\n            return null;\n        }\n        const year = [];\n        let exist = [];\n        Object.keys(this.props.year).forEach(y => {\n            this.props.year[y].forEach(c => {\n                if (c.Year.includes(value)) {\n                    if (exist.indexOf(y + ': ' + c.Year) === -1) {\n                        year.push({\n                            title: y,\n                            content: y + ': ' + c.Year\n                        })\n                        exist.push(y + ': ' + c.Year)\n                    }\n                }\n            })\n        });\n        const event = [];\n        exist = [];\n        Object.keys(this.props.event).forEach(y => {\n            this.props.event[y].forEach(c => {\n                if (c.HName.includes(value)) {\n                    if (exist.indexOf(y + ': ' + c.HName) === -1) {\n                        event.push({\n                            title: y,\n                            content: y + ': ' + c.HName\n                        })\n                    }\n                }\n            })\n        });\n        const people = [];\n        exist = [];\n        Object.keys(this.props.people).forEach(y => {\n            this.props.people[y].forEach(c => {\n                if (c.Name.includes(value)) {\n                    if (exist.indexOf(y + ': ' + c.Name) === -1) {\n                        people.push({\n                            title: y,\n                            content: y + ': ' + c.Name\n                        })\n                    }\n                }\n            })\n        });\n        const dataSource = [\n            {\n                title: '年代',\n                children: year,\n            },\n            {\n                title: '事件',\n                children: event\n            },\n            {\n                title: '人物',\n                children: people\n            },\n        ];\n\n        function renderTitle(title) {\n            return (\n                <span>\n                    {title}\n                </span>\n            );\n        }\n\n        const options = dataSource\n            .map(group => (\n                <OptGroup key={group.title} label={renderTitle(group.title)}>\n                    {group.children.map((opt, index) => (\n                        <Option key={opt.title + opt.content + index} value={opt.content}>\n                            <span className=\"certain-search-item-count\">{opt.content}</span>\n                        </Option>\n                    ))}\n                </OptGroup>\n            ))\n\n        this.setState({\n            dataSource: options\n        })\n    }\n    handleSearch(value) {\n        this.initData(value);\n    }\n    render() {\n        return (\n            <div className={s.searchWrapper} style={{ width: 250 }}>\n                <AutoComplete\n                    className=\"certain-category-search\"\n                    dropdownClassName=\"certain-category-search-dropdown\"\n                    dropdownMatchSelectWidth={true}\n                    dropdownStyle={{ width: 300 }}\n                    size=\"large\"\n                    style={{ width: '100%' }}\n                    dataSource={this.state.dataSource}\n                    placeholder=\"搜索\"\n                    optionLabelProp=\"value\"\n                    onSearch={this.handleSearch.bind(this)}\n                >\n                    <Input suffix={<Icon type=\"search\" className=\"certain-category-icon\" />} />\n                </AutoComplete>\n            </div>\n        );\n    }\n}","export const Config = {\n    staticPath: 'http://localhost:8887/',\n    gisRestServer: 'https://172.20.32.70:6443/arcgis/rest/services/',\n    dojoServer: \"http://tony-space.top:8007/arcgis_js_api/library/4.11/dojo/dojo.js\"\n}","export const timeMap = {\n    0: [0, 1],\n    1: [1, 2],\n    2: [2, 5],\n    3: [5, 10],\n    4: [10, 15],\n    5: [15, 19],\n    6: [19, 38],\n    7: [38, 41],\n    8: [41, 47],\n    9: [47, 51],\n    10: [51, 61],\n    11: [61, 69],\n    12: [69, 82],\n    13: [82, 91],\n    14: [91, 103],\n    15: [103, 111],\n    16: [111, 117],\n    17: [117, 128],\n    18: [128, 134]\n}\n\nexport const nameMap = {\n    '夏': [0, 1],\n    '商': [1, 2],\n    '周': [2, 5],\n    '春秋': [5, 10],\n    '战国': [10, 15],\n    '秦': [15, 19],\n    '汉': [19, 38],\n    '三国': [38, 41],\n    '晋': [41, 47],\n    '十六国': [47, 51],\n    '南北': [51, 61],\n    '隋': [61, 69],\n    '唐': [69, 82],\n    '五代十国': [82, 91],\n    '宋': [91, 103],\n    '元': [103, 111],\n    '民': [111, 117],\n    '清': [117, 128],\n    '民国': [128, 134]\n}\n\nexport function searchKey(dy) {\n    let result = 0;\n    Object.keys(timeMap).forEach(i => {\n        if (timeMap[i][1] > dy && timeMap[i][0] <= dy) {\n            result = parseInt(i);\n        }\n    })\n    return result;\n}\n\nexport function searchName(dy) {\n    let result = 0;\n    Object.keys(nameMap).forEach(i => {\n        if (nameMap[i][1] > dy && nameMap[i][0] <= dy) {\n            result = i;\n        }\n    })\n    return result;\n}\n\n","import React,{Component} from 'react'\nimport {Drawer} from 'antd'\n\nexport class RightDrawer extends Component{\n  constructor(){\n    super();\n    this.state = {\n      isOpen:false\n    }\n  }\n\n  render(){\n    return(\n      <Drawer\n      title={\"检索\"}\n      placement=\"right\"\n      closable={true}\n      visible={this.props.isShow}\n      mask={false}\n      style={{marginTop:'60px'}}\n      onClose={this.props.onClose}\n      >\n          <div style={{fontSize: 18}}>疆域</div><br/>\n          {\n              this.props.data.selectedBoundary.map(i => {\n                  return (\n                      <div>\n                          名称：{i.Name} <br/>\n                          面积：{i.Area} <br/>\n                          <hr/>\n                      </div>\n                  )\n              })\n          }\n      </Drawer>\n  )}\n}\n","import { Modal } from 'antd';\nimport React from 'react';\n\nexport class YearModal extends React.Component {\n\n  render() {\n    return (\n      <div>\n        <Modal\n          title=\"Basic Modal\"\n          visible={this.props.visible}\n          onOk={this.props.handleOk}\n          onCancel={this.props.handleCancel}\n          centered\n          width={'80%'}\n        >\n          {this.props.children}\n        </Modal>\n      </div>\n    );\n  }\n}","export const eventPopUpTemplate = {\n    title: \"{HName}\",\n    content: \"位置：{HCityName}, 事件：{HName}\"\n};\n","import React, { Component } from 'react'\r\nimport { Button } from 'antd';\r\nimport EsriLoader from 'esri-loader'\r\nimport s from './mainBox.less';\r\nimport { createSketch, renderer, heatMapRenderer } from './utils';\r\nimport { YearSelector } from '../charts';\r\nimport Search from '../Search';\r\nimport config from '../../config';\r\nimport { searchKey, searchName } from './utils/timeMap';\r\nimport { RightDrawer } from '../Drawer/Common';\r\nimport { YearModal } from '../YearModal/YearModal';\r\nimport { eventPopUpTemplate } from './utils/popUpTemplate';\r\n\r\nconst BOUNDARY_LAYER_NUM = 121;\r\n\r\nclass MainBox extends Component {\r\n  constructor() {\r\n    super()\r\n    this.tangFeatureLayers = []\r\n    this.dojoUrl = config.dojoServer;\r\n    this.tileMapUrl = \"http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer\"\r\n    this.baseBoundaryFeatureUrl = config.gisRestServer + \"country_boundary/MapServer/\";\r\n    this.baseEventFeatureUrl = config.gisRestServer + \"events_point/MapServer\";\r\n    this.basePeopleFeatureUrl = config.gisRestServer + \"country_boundary/MapServer/\";\r\n    this.highlightSelectChar = []\r\n    this.state = {\r\n      isPlay: false,\r\n      playControllerText: '播放边界变化',\r\n      sliderValue: 0,\r\n      selectedBoundary: [],\r\n      rightDrawShow: false,\r\n      showYearModal: false\r\n    }\r\n    this.playTimer = null;\r\n    this.stopUpdate = true;\r\n    this.selectGrphics = [];\r\n    this.changeBaseMap = () => { };\r\n  }\r\n  componentDidMount() {\r\n    this.initMap()\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.currentYear !== this.props.currentYear) {\r\n      this.changeBoundaryLayer(this.props.currentYear);\r\n    }\r\n    if (prevState.selectedBoundary !== this.state.selectedBoundary) {\r\n      this.setState({ rightDrawShow: true });\r\n    }\r\n  }\r\n\r\n  queryForChar() {\r\n    let charLayer = this.map.layers.items[14]\r\n    this.view.whenLayerView(charLayer).then((layerView) => {\r\n      var queryChar = charLayer.createQuery();\r\n      queryChar.where = \"ID=\" + this.props.charSelected\r\n      charLayer.queryFeatures(queryChar).then((result) => {\r\n        if (this.highlightSelectChar.length) {\r\n          this.highlightSelectChar.map((highlight) => {\r\n            highlight.remove()\r\n            return void 0;\r\n          })\r\n        }\r\n        let feature = result.features\r\n        // let x = 0, y = 0\r\n        // for (let i = 0; i < feature.length; i++) {\r\n        //   x += feature[i].geometry.x\r\n        //   y += feature[i].geometry.y\r\n        // }\r\n        // x /= feature.length\r\n        // y /= feature.length\r\n        this.view.goTo(\r\n          {\r\n            center: [feature[0].geometry.x + 3, feature[0].geometry.y],\r\n            zoom: 6\r\n          },\r\n          {\r\n            duration: 1000,\r\n            easing: 'in-out-expo'\r\n          })\r\n        setTimeout(() => {\r\n          this.drawLine(feature, layerView)\r\n        }, 1000)\r\n        return void 0;\r\n      })\r\n    })\r\n  }\r\n\r\n  initMap() {\r\n    EsriLoader.loadModules([\r\n      \"esri/layers/GraphicsLayer\",\r\n      \"esri/widgets/Sketch\",\r\n      \"esri/Map\",\r\n      \"esri/Basemap\",\r\n      \"esri/layers/TileLayer\",\r\n      \"esri/views/MapView\",\r\n      \"esri/layers/FeatureLayer\",\r\n      'esri/Graphic',\r\n      'esri/widgets/Zoom',\r\n      \"esri/widgets/Compass\",\r\n      'esri/widgets/ScaleBar',\r\n      'esri/widgets/Search',\r\n      \"dojo/domReady!\"\r\n    ], this.dojoUrl).then(([GraphicsLayer, Sketch, Map, Basemap, TileLayer, MapView, FeatureLayer, Graphic, Zoom, Compass, ScaleBar, Search]) => {\r\n      this.FeatureLayer = FeatureLayer;\r\n      this.graphicsLayer2 = new GraphicsLayer();\r\n      this.baseBoundaryFeatureLayer = new FeatureLayer({\r\n        url: this.baseBoundaryFeatureUrl,\r\n        id: '0',\r\n        visible: true,\r\n        renderer\r\n      })\r\n      this.baseEventFeatureLayer = new FeatureLayer({\r\n        url: this.baseEventFeatureUrl,\r\n        id: '4',\r\n        visible: true,\r\n        popupTemplate: eventPopUpTemplate,\r\n        heatMapRenderer\r\n      })\r\n      this.basePeopleFeatureLayer = new FeatureLayer({\r\n        url: this.basePeopleFeatureUrl,\r\n        id: '0',\r\n        visible: true,\r\n        heatMapRenderer\r\n      })\r\n\r\n      this.changeBaseMap = (tileMapUrl) => {\r\n        let tileLayer = new TileLayer({\r\n          url: tileMapUrl\r\n        });\r\n        let baseMap = new Basemap({\r\n          baseLayers: [tileLayer],\r\n          id: 'myBaseMap'\r\n        });\r\n        if (this.map) {\r\n          this.map.basemap = baseMap;\r\n        }\r\n      }\r\n\r\n      let tileLayer = new TileLayer({\r\n        url: this.tileMapUrl\r\n      });\r\n      let basemap = new Basemap({\r\n        baseLayers: [tileLayer],\r\n        id: 'myBaseMap'\r\n      });\r\n      this.map = new Map({\r\n        basemap,\r\n        layers: [\r\n          this.graphicsLayer2,\r\n          this.baseEventFeatureLayer,\r\n          // this.basePeopleFeatureLayer,\r\n          this.baseBoundaryFeatureLayer,\r\n        ]\r\n      });\r\n      this.view = new MapView({\r\n        center: [115, 32.1],\r\n        map: this.map,\r\n        container: \"mapDiv\",\r\n        zoom: 5\r\n      });\r\n      this.view.whenLayerView(this.baseBoundaryFeatureLayer).then((layerView) => {\r\n        this.featureLayerView = layerView;\r\n      });\r\n      this.graphic = new Graphic()\r\n      let zoom = new Zoom({\r\n        view: this.view,\r\n        layout: 'horizontal'\r\n      })\r\n      let compass = new Compass({\r\n        view: this.view\r\n      });\r\n      let scaleBar = new ScaleBar({\r\n        view: this.view,\r\n        unit: 'metric'\r\n      })\r\n      const sketch = createSketch(this, Sketch);\r\n      this.view.graphics.add(this.graphic)\r\n      this.view.ui.padding = { top: 80, left: 30, right: 0, bottom: 0 };\r\n      this.view.ui.remove('zoom')\r\n      this.view.ui.add(zoom)\r\n      this.view.ui.add(compass)\r\n      this.view.ui.add(scaleBar, 'bottom-right');\r\n      this.view.ui.add(sketch, \"top-left\");\r\n      let len = this.map.layers.items.length\r\n      let queryLayer = this.map.layers.items[len - 1]\r\n      this.view.when(function () {\r\n        return queryLayer.when(function () {\r\n          let query = queryLayer.createQuery()\r\n          return queryLayer.queryFeatures(query)\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  changeBoundaryLayer(index) {\r\n    if (!this.map || !this.FeatureLayer) {\r\n      return 0;\r\n    }\r\n    console.log(this.baseBoundaryFeatureUrl + index)\r\n    const boundaryLayer = new this.FeatureLayer({\r\n      url: this.baseBoundaryFeatureUrl + index,\r\n      visible: true,\r\n      renderer\r\n    });\r\n    const evnetLayerIndex = searchKey(index);\r\n    const eventLayer = new this.FeatureLayer({\r\n      url: this.baseEventFeatureUrl + '/' + evnetLayerIndex,\r\n      visible: true,\r\n      heatMapRenderer,\r\n      popupTemplate: eventPopUpTemplate,\r\n    })\r\n    this.map.layers = [this.graphicsLayer2, eventLayer, boundaryLayer];\r\n  }\r\n\r\n  openYearModal() {\r\n    this.setState({ yearModal: true });\r\n  }\r\n\r\n  handleSliderChange(value) {\r\n    if (!this.map) {\r\n      return 0;\r\n    }\r\n    // TO FIX: slider切换年份不生效\r\n    this.changeBoundaryLayer(value);\r\n    this.setState({ sliderValue: value });\r\n  }\r\n\r\n  handleLayerPlay() {\r\n    this.stopUpdate = !this.stopUpdate\r\n    this.setState({ isPlay: !this.state.isPlay })\r\n\r\n    this.view.goTo({ center: [115, 32.1], zoom: 4 }, { duration: 1000, easing: 'in-out-expo' })\r\n    let i = 0\r\n    if (this.playTimer) {\r\n      clearInterval(this.playTimer);\r\n      this.playTimer = null;\r\n      this.setState({ playControllerText: '播放边界变化', isPlay: false })\r\n      return;\r\n    }\r\n    this.setState({ playControllerText: '暂停播放', isPlay: true })\r\n    this.playTimer = setInterval(() => {\r\n      if (i < BOUNDARY_LAYER_NUM) {\r\n        if (i) {\r\n          this.changeBoundaryLayer.call(this, i);\r\n        }\r\n        this.setState({ sliderValue: i });\r\n      }\r\n      else {\r\n        this.stopUpdate = !this.stopUpdate\r\n        this.setState({ isPlay: false })\r\n        this.changeBoundaryLayer.call(this, i);\r\n        clearInterval(this.playTimer);\r\n        this.playTimer = null;\r\n      }\r\n      i++;\r\n      return void 0;\r\n    }, 2000)\r\n  }\r\n  render() {\r\n    console.log(this.props)\r\n    return (\r\n      <>\r\n        <div id='mapDiv' style={{ height: '100%', width: '100%', padding: '5px' }}></div>\r\n        <div className={s['traj_set']}>\r\n          \r\n        </div>\r\n        <div className={s['play_button']}>\r\n          <Button\r\n            onClick={this.handleLayerPlay.bind(this)}\r\n            ghost\r\n            icon={this.state.isPlay ? 'pause' : 'caret-right'}\r\n          >\r\n            {this.state.playControllerText}\r\n          </Button>\r\n        </div>\r\n        <YearSelector onClick={this.changeBoundaryLayer.bind(this)} data={this.props.yearArea} />\r\n        <Button\r\n          style={{ position: 'absolute', right: 70, bottom: 80 }}\r\n          onClick={this.openYearModal.bind(this)}\r\n        >年代变化</Button>\r\n        <YearModal\r\n          visible={this.state.yearModal}\r\n          handleCancel={() => this.setState({ yearModal: false })}\r\n          handleOk={() => this.setState({ yearModal: false })}\r\n        >\r\n          <Button onClick={() => this.setState({ showWiki: !this.state.showWiki })}>显示百科</Button>\r\n          {\r\n            this.state.showWiki &&\r\n            <iframe name=\"wiki_frame\" title=\"baike\" src={\"https://baike.baidu.com/item/\" + encodeURIComponent(searchName(this.props.currentYear)) + \"朝\"} height=\"600px\" width=\"1240px\" seamless frameborder=\"0\"></iframe>\r\n          }\r\n          <YearSelector\r\n            style={{ position: 'relative', left: 0, right: 0, bottom: 0 }}\r\n            onClick={this.props.onSelectYear}\r\n            data={this.props.yearArea} />\r\n        </YearModal>\r\n        <RightDrawer\r\n          isShow={this.state.rightDrawShow}\r\n          onClose={() => this.setState({ rightDrawShow: false })}\r\n          data={{\r\n            years: this.props.years,\r\n            charProfiles: this.props.charProfiles,\r\n            events: this.props.events,\r\n            selectedBoundary: this.state.selectedBoundary\r\n          }}\r\n        />\r\n        {\r\n          !this.state.rightDrawShow &&\r\n          <Button\r\n            style={{ position: 'absolute', right: 0, bottom: 3, height: '99%', width: 15, padding: 0 }}\r\n            onClick={() => this.setState({ rightDrawShow: true })}\r\n          >\r\n            &lt;\r\n        </Button>\r\n        }\r\n        <Search\r\n          year={this.props.years}\r\n          event={this.props.events}\r\n          people={this.props.charProfiles}\r\n        />\r\n        {/* <Slider\r\n          years={this.props.years}\r\n          value={this.state.sliderValue}\r\n          onChange={this.handleSliderChange.bind(this)}\r\n        /> */}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MainBox","function createSketch(Obj, Sketch) {\n    const sketch = new Sketch({\n        view: Obj.view,\n        layer: Obj.graphicsLayer2\n    });\n    sketch.on(\"create\", (event) => {\n        // check if the create event's state has changed to complete indicating\n        // the graphic create operation is completed.\n        Obj.setState({ rightDrawShow: true });\n        if (event.state === \"complete\") {\n            let query = Obj.baseBoundaryFeatureLayer.createQuery();\n            Obj.selectGrphics.push(event.graphic);\n            query.geometry = event.graphic.geometry;\n            query.spatialRelationship = \"intersects\";\n            Obj.baseBoundaryFeatureLayer.queryFeatures(query).then(function (results) {\n                // prints an array of all the features in the service to the console\n                console.log(results);\n                if (Obj.boundaryhighlight) {\n                    Obj.boundaryhighlight.remove();\n                }\n                Obj.boundaryhighlight = Obj.featureLayerView.highlight(results.features);\n                const selectedBoundary = [];\n                if (results.features.length) {\n                    for (let feature of results.features) {\n                        selectedBoundary.push(feature.attributes);\n                    }\n                    Obj.setState({ selectedBoundary });\n                }\n            });\n        }\n    });\n    sketch.on(\"update\", (event) => {\n        // check if the create event's state has changed to complete indicating\n        // the graphic create operation is completed.\n        Obj.setState({ rightDrawShow: true });\n    });\n    return sketch;\n}\n\nexport { createSketch };\n","import React,{Component} from 'react'\r\nimport {Drawer} from 'antd'\r\n\r\nclass EventDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isOpen:false\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <Drawer\r\n      title={\"事件简介\"}\r\n      placement=\"right\"\r\n      closable={false}\r\n      visible={this.props.isShow}\r\n      mask={false}\r\n      style={{marginTop:'60px'}}\r\n      >\r\n        <p>{'事件名称：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HName:'')}</p>\r\n        <p>{'发生地点：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].HCityName:'')}</p>\r\n        <p>{'起始时间：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].STime+' 年':'')}</p>\r\n        <p>{'结束时间：'+(this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].ETime+' 年':'')}</p>\r\n        <p>{'事件简介：'}</p>\r\n        <p style={{textIndent:'2em'}}>{this.props.events.length&&this.props.eventSelected?this.props.events[this.props.eventSelected].Intro:''}</p>\r\n      </Drawer>\r\n  )}\r\n}\r\n\r\nexport default EventDrawer","import React,{Component} from 'react';\r\nimport { Timeline } from 'antd';\r\n\r\nclass ExpTimeline extends Component{\r\n  render(){\r\n    return(\r\n      <div>\r\n        <Timeline>\r\n          <div className={'charExp'}>人物经历</div>\r\n          {this.props.exp.map((e,idx)=>{ \r\n            return <Timeline.Item key={idx} color={'#dc9123'}>\r\n              {e.year+'年，'+e.place+'，'+e.intro}\r\n            </Timeline.Item>\r\n          })}\r\n        </Timeline>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ExpTimeline","import React,{Component} from 'react'\r\nimport {Drawer} from 'antd'\r\n\r\nclass CharDrawer extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isOpen:false\r\n    }\r\n    this.iconURL = '../../icon/'\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <Drawer\r\n      title={\"人物简介\"}\r\n      placement=\"right\"\r\n      closable={false}\r\n      visible={this.props.isShow}\r\n      mask={false}\r\n      style={{marginTop:'60px'}}\r\n      >\r\n        <div style={{align:'center',textAlign:'center'}}>\r\n          <img\r\n            alt=\"icon\" src={this.iconURL+(this.props.charSelected?this.props.charSelected:'-1')+'.jpg'} />\r\n        </div>\r\n        <hr/>\r\n        <p>{'姓名：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Name:'')}</p>\r\n        <p>{'字：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].zi:'')}</p>\r\n        <p>{'号：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].hao:'')}</p>\r\n        <p>{'生年：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].STime+' 年':'')}</p>\r\n        <p>{'卒年：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].ETime+' 年':'')}</p>\r\n        <p>{'出生地：'+(this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Home:'')}</p>\r\n        <p>{'简介：'}</p>\r\n        <p style={{textIndent:'2em'}}>{this.props.chars.length&&this.props.charSelected?this.props.chars[this.props.charSelected].Intro:''}</p>\r\n      </Drawer>\r\n  )}\r\n}\r\n\r\nexport default CharDrawer","import React, { Component } from 'react';\nimport Header from './compnents/Header/Header'\nimport LeftSider from './compnents/LeftSider/LeftSider'\nimport MainBox from './compnents/MainBox/MainBox'\nimport EventDrawer from './compnents/Drawer/EventDrawer'\nimport ExpTimeline from './compnents/Timelist/ExpTimeline'\nimport { Layout } from 'antd';\nimport './App.css';\nimport CharDrawer from './compnents/Drawer/CharDrawer';\nimport Config from './config';\n\nconst staticPath = Config.staticPath;\n\nconst tilesMap = [\n  'http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetWarm/MapServer',\n  'dark-gray',\n  'streets',\n  'hybrid'\n]\n\nconst { Content } = Layout\nclass App extends Component {\n  constructor() {\n    super()\n    this.state = {\n      yearSelectedKeys: [],\n      charSelectedKeys: [],\n      eventSelectedKeys: [],\n      isYearOpen: true,\n      isEventOpen: false,\n      isCharOpen: false,\n      charProfiles: [],\n      years: [],\n      events: [],\n      experience: [],\n      yearArea: [],\n      curDrawing: 0,\n      currentYear: 0,\n      currentTileMap: 'topo',\n      isCharDrawerOpen: false,\n      isEventDrawerOpen: false,\n      isCharSelectChangeToAnother: false,\n      isEventSelectChangeToAnother: false,\n      isYearSelectChangeToAnother: false,\n    }\n  }\n\n  onSelectYear(id) {\n    this.setState({currentYear: id});\n  }\n\n  onSelectTileMap(currentTileMap) {\n    this.setState({ currentTileMap })\n  }\n\n  processYearArea(data) {\n    const result = [];\n    Object.keys(data).forEach(d => {\n      Object.keys(data[d][0]).forEach(d1 => {\n        result.push([\n          d + ' ' + d1,\n          data[d][0][d1]\n        ])\n      })\n    });\n    return result;\n  }\n\n  processYear(data) {\n    let idx = 0;\n    Object.keys(data).forEach(d => {\n      data[d].forEach((item, index) => {\n        data[d][index] = {\n          Year: data[d][index] + '年',\n          idx\n        }\n        idx++;\n      });\n    });\n    return data;\n  }\n\n  componentDidMount() {\n    const yearData = fetch(staticPath + 'json/year.json').then(res => res.json())\n    const profileData = fetch(staticPath + 'json/profile.json').then(res => res.json())\n    const eventData = fetch(staticPath + 'json/event.json').then(res => res.json())\n    const experienceData = fetch(staticPath + 'json/experience.json').then(res => res.json())\n    const yearArea = fetch(staticPath + 'json/area.json').then(res => res.json())\n    Promise.all([yearData, profileData, eventData, experienceData, yearArea]).then((dataList) => {\n      console.log(dataList)\n      this.setState({\n        years: this.processYear(dataList[0]),\n        charProfiles: dataList[1],\n        events: dataList[2],\n        experience: dataList[3],\n        yearArea: this.processYearArea(dataList[4])\n      })\n    }).catch((err) => {\n      console.error(err);\n    })\n  }\n  render() {\n    const exp = []\n    this.state.experience.length && this.state.experience['Tang'].map((e) => {\n      if (e.ID === this.state.charSelectedKeys[0]) exp.push(e)\n      return void 0;\n    })\n    return (\n      <div className=\"App\">\n        <Header />\n        <LeftSider\n          years={this.state.years}\n          charProfiles={this.state.charProfiles}\n          events={this.state.events}\n          tilesMap={tilesMap}\n          handleTileSelect={this.onSelectTileMap.bind(this)}\n          currentTile={this.state.currentTileMap}\n          onSelectYear={this.onSelectYear.bind(this)}\n        />\n        <Layout style={{ position: 'relative', height: 'calc(100% - 60px)' }}>\n          <Content style={{ position: 'relative' }}>\n            <MainBox\n              years={this.state.years}\n              charProfiles={this.state.charProfiles}\n              events={this.state.events}\n              yearArea={this.state.yearArea}\n              yearSelected={this.state.yearSelectedKeys[0]}\n              charSelected={this.state.charSelectedKeys[0]}\n              eventSelected={this.state.eventSelectedKeys[0]}\n              curDrawingPoint={this.handleCurDrawing}\n              onSelectYear={this.onSelectYear.bind(this)}\n              currentYear={this.state.currentYear}\n            />\n            {exp.length ? <ExpTimeline exp={exp} /> : null}\n          </Content>\n          <EventDrawer\n            events={this.state.events}\n            isShow={this.state.isEventDrawerOpen}\n            eventSelected={this.state.eventSelectedKeys[0]} />\n          <CharDrawer\n            chars={this.state.charProfiles}\n            isShow={this.state.isCharDrawerOpen}\n            charSelected={this.state.charSelectedKeys[0]} />\n        </Layout>\n\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}